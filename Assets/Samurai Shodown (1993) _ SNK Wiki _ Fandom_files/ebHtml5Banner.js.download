var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};
$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))return;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<e.length-1;f++){var g=e[f];if(!(g in d))return;d=d[g]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&(void 0===$jscomp.propertyToPolyfillSymbol[e]&&(c=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+c+"$"+e),$jscomp.defineProperty(d,$jscomp.propertyToPolyfillSymbol[e],{configurable:!0,writable:!0,value:b})))};$jscomp.polyfill("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var f=d[c];if(f===b||Object.is(f,b))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(b,c){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,c||0)}},"es6","es3");
$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};$jscomp.polyfill("Object.values",function(a){return a?a:function(b){var c=[],d;for(d in b)$jscomp.owns(b,d)&&c.push(b[d]);return c}},"es8","es3");
var EBGInfra=EBGInfra?EBGInfra:{declareNamespace:function(a){var b=window.EBG;a=a.split(".");for(var c=0;c<a.length;c++){var d=a[c],e=b[d];e||(e=b[d]={});b=e}},declareClass:function(a,b){a.prototype.constructor=a;b&&(a.__superClass=b,a.__basePrototypePending=!0,EBG._resolveInheritance(a));return a},runTimed:function(a,b,c,d){return setTimeout(function(){b.apply(a,c)},d)},setInterval:function(a,b,c,d){return setInterval(function(){b.apply(a,c)},d)},clearInterval:function(a){clearInterval(a)},sequence:function(){var a=
[],b=function(c){c.count--;if(0<=c.count)return EBG.runTimed(this,b,[c],c.interval),c.tfunc.apply(c.context,c.args);EBG.isFunc(c.callback)&&c.callback.apply(c.cbContext,c.cbArgs);a[c.index]=null};return function(c,d,e,f,g,h,k,l,m,p){if(EBG.isFunc(d)){var n;a:{for(n=0;n<a.length;n++)if(a[n]&&a[n].func==d)break a;n=!1}h=EBG.isNumber(h)?h:g;p=p||{};EBG.isFunc(l)&&!EBG.isDefined(p.trailing)&&(p.trailing=!1);c={context:c,func:d,tfunc:!1===n?this.throttle(d,h,p):a[n].tfunc,args:e?e:[],count:f,interval:g,
cbContext:k,callback:l,cbArgs:m?m:[]};d=a.push(c)-1;a[d].index=d;return b(c)}return!1}}(),debounce:function(a,b,c){var d,e,f,g,h,k=function(){var l=(new Date).getTime()-g;l<b&&0<=l?d=setTimeout(k,b-l):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this;e=arguments;g=(new Date).getTime();var l=c&&!d;d||(d=setTimeout(k,b));l&&(h=a.apply(f,e),f=e=null);return h}},throttle:function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var k=function(){h=!1===c.leading?0:(new Date).getTime();g=null;f=
a.apply(d,e);g||(d=e=null)};return function(){var l=(new Date).getTime();h||!1!==c.leading||(h=l);var m=b-(l-h);d=this;e=arguments;0>=m||m>b?(g&&(clearTimeout(g),g=null),h=l,f=a.apply(d,e),g||(d=e=null)):g||!1===c.trailing||(g=setTimeout(k,m));return f}},_resolveInheritance:function(a){if(a.__basePrototypePending){var b=a.__superClass;EBG._resolveInheritance(b);b=b.prototype;var c=a.prototype,d;for(d in b)c[d]=c[d]||b[d];delete a.__basePrototypePending}},callSuperConstructor:function(a,b,c){(a=a.__superClass)&&
(c?a.apply(b,c):a.apply(b));return b},callSuperFunction:function(a,b,c,d){if(a=a.__superClass)var e=a.prototype[c];try{if(e)return d?e.apply(b,d):e.apply(b)}catch(f){}},typeOf:function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array||!(a instanceof Object)&&"[object Array]"==Object.prototype.toString.call(a)||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if(!(a instanceof Object||"[object Function]"!=
Object.prototype.toString.call(a)&&("undefined"==typeof a.call||"undefined"==typeof a.propertyIsEnumerable||a.propertyIsEnumerable("call"))))return"function"}else return"function"==b&&"undefined"==typeof a.call?"object":"null";return b},isFunc:function(a){return"function"==EBG.typeOf(a)},isDefined:function(a){return"undefined"!=EBG.typeOf(a)},notNull:function(a){return null!=a},isDefinedNotNull:function(a){return this.isDefined(a)&&this.notNull(a)},hasValue:function(a){return null!=a&&"undefined"!=
EBG.typeOf(a)},hasOwnValue:function(a,b,c){for(var d in a)if(a.hasOwnProperty(d))if(c&&EBG.isFunc(a[d].toLowerCase)){if(a[d].toLowerCase()===b.toLowerCase())return!0}else if(a[d]===b)return!0;return!1},objMatch:function(a,b){if(a&&!b||!a&&b)return!1;for(var c in a){switch(!0){case !EBG.isDefined(b[c]):var d=!1;break;case a[c]===b[c]:case EBG.isElementOrNode(a[c]):d=a[c]===b[c];break;case EBG.isObj(a[c]):case EBG.isArray(a[c]):d=EBG.objMatch(a[c],b[c]);break;default:d=!1}if(!d)return!1}return!0},isObj:function(a){return"object"==
EBG.typeOf(a)},isArray:function(a){return"array"==EBG.typeOf(a)},isBool:function(a){return"boolean"==EBG.typeOf(a)},isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isNode:function(a){var b=a&&a.ownerDocument&&(a.ownerDocument.defaultView||a.ownerDocument.parentwindow);return!b||"object"!==typeof b.Node&&"function"!==typeof b.Node?a&&"object"===typeof a&&"number"===typeof a.nodeType&&"string"===typeof a.nodeName:a instanceof b.Node},isElement:function(a){var b=a&&a.ownerDocument&&(a.ownerDocument.defaultView||
a.ownerDocument.parentwindow);return!b||"object"!==typeof b.HTMLElement&&"function"!==typeof b.HTMLElement?a&&"object"===typeof a&&null!==a&&1===a.nodeType&&"string"===typeof a.nodeName:a instanceof b.HTMLElement},isElementOrNode:function(a){return this.isElement(a)||this.isNode(a)},format:function(a){for(var b=1;b<arguments.length;b++)a=a.replace(new RegExp("\\{"+(b-1)+"\\}","gi"),""+arguments[b]);return a},throwEx:function(a){throw{name:"",message:a};},mergeObj:function(a,b,c){c=!!c;for(var d in a)!a.hasOwnProperty(d)||
b.hasOwnProperty(d)&&!c||(b[d]=a[d])},cloneObj:function(a,b,c){c=c||1;if(!EBG.isObj(a))return null;var d={},e;for(e in a)a.hasOwnProperty(e)&&(b&&EBG.isElementOrNode(a[e])||EBG.isDefinedNotNull(a[e])&&a[e]==a[e].self?d[e]=a[e]:d[e]=EBG.isObj(a[e])&&4>=c?EBG.cloneObj(a[e],null,c+1):a[e]);return d},combinePaths:function(a,b){a=a||"";b=b||"";a&&"/"!=a[a.length-1]&&b&&"/"!=b[0]&&(a+="/");b&&(a+=b);return a},px:function(a){return 0<a.toString().search("%")?a:EBG.format("{0}px",a)},indexOfArray:function(a,
b){for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1},filterObject:function(a,b,c){if("function"!=typeof b)throw new TypeError;var d={},e;for(e in a)if(a.hasOwnProperty(e)){var f=a[e];b.call(c||window,f,e,a)&&(d[e]=f)}return d},filterArray:function(a,b,c){var d=a.length>>>0;if("function"!=typeof b)throw new TypeError;for(var e=[],f=0;f<d;f++)if(f in a){var g=a[f];b.call(c||window,g,f,a)&&e.push(g)}return e},isGlobalDef:function(a,b){var c="undefined"!=typeof window[a];b&&c&&(c=eval(a+"=="+b));
return c},getPageUrl:function(a){try{return a&&a.location&&a.location.href?a.location.href:null}catch(b){return null}},_isXMLHttpRequestSupported:function(a){var b=window.XMLHttpRequest?new XMLHttpRequest:null;b=b&&EBG.isBool(b.withCredentials);b=EBG.isMRAID()?a?!0:!1:b;void("");return b},htmlDecode:function(a){this.helperDiv=this.helperDiv?this.helperDiv:document.createElement("div");this.helperDiv.innerHTML=a;return this.helperDiv.textContent},
htmlEncode:function(a){this.helperDiv=this.helperDiv?this.helperDiv:document.createElement("div");this.helperDiv.textContent=a;return this.helperDiv.innerHTML},getDataFromRemoteServer:function(a,b,c,d,e){if(!a||EBG.isOfflineDemo)return!1;d=EBG.isBool(d)?d:!0;e=EBG.isBool(e)?e:!1;var f=function(){try{if(e){if(9===document.documentMode)var l=(new window.DOMParser).parseFromString(k.responseText,"text/xml");else{var m=document.createElement("div");m.innerHTML="<xml>"+k.responseText+"</xml>";document.body.appendChild(m);
l=m.firstChild.XMLDocument;document.body.removeChild(m)}b.call(c,l)}else b.call(c,k.responseText)}catch(p){void(""),b.call(c)}};void("");var g=!1;try{if(this._isXMLHttpRequestSupported(!0)){var h=new XMLHttpRequest;h.open("GET",a,d);g=!0;d&&(h.onreadystatechange=function(){4==h.readyState&&(200==h.status?b.call(c,e?h.responseXML:h.responseText):b.call(c))});h.send();d||b.call(c,e?h.responseXML:h.responseText)}else if(window.XDomainRequest)if(d){var k=
new XDomainRequest;k.onerror=function(){void("");b.call(c)};k.ontimeout=function(){void("");b.call(c)};k.onload=f;k.onprogress=function(){};k.open("get",a);k.send();g=!0}else void("")}catch(l){void(""),g=!1}return g},isPercentage:function(a){return"string"==typeof a?/\d+%/.test(a)&&EBG.isNumber(parseInt(a)):!1},getTime:function(){var a=(new Date).getTime()/
1E3;return function(){return(new Date).getTime()/1E3-a}}(),getObjKeys:function(a){a=a||{};if(Object.keys)return Object.keys(a);var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b},serializeObject:function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c+"="+a[c]);return b.join("&")},capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},getTopAccessibleWindow:function(){var a=window;if(a.location.ancestorOrigins){for(var b=window,c=window,d=a.location.ancestorOrigins,
e=!1,f=0;f<d.length;f++){a=a.parent;var g=document.createElement("a");g.href=d[f];g=g.hostname;"null"!==d[f]&&(window.location.origin===d[f]||""===window.location.hostname&&""===g)?(c=a,e||(b=a)):e=!0}return function(h){return("boolean"==typeof h?h:1)?b:c}}try{if(a.top.document.domain||""===a.parent.document.domain)a=a.top;else throw new DOMException;}catch(h){try{for(a=window;a!==a.parent&&a.self!==a.parent;)if(a.parent.document.domain||""===a.parent.document.domain)a=a.parent}catch(k){}}return function(){return a}}(),
getBigScript:function(a){return function(){if(a.currentScript)var b=a.currentScript;else b=a.getElementsByTagName("script"),b=b[b.length-1];return b}}(document),valueFromPath:function(a,b,c){b=b.split(".");for(var d=0;d<b.length;d++)a=a[b[d]];return EBG.isObj(a)&&c?EBG.cloneObj(a):a},getTimes:function(){var a=new Date;a={dtime:a.getTime(),pnow:0,ptime:0,tzoff:a.getTimezoneOffset()};performance&&(performance.now&&(a.pnow=Math.ceil(performance.now())),a.ptime=Math.ceil(performance.timeOrigin)||0);return a},
now:function(){var a=window.performance&&performance.now?performance.now():0;return Math.round(a,0)},getCtick:function(a,b,c){return window.performance&&performance.now&&(c?+new Date-a:Math.round(performance.now())-b)},isMRAID:function(){return window.mraid&&EBG.isFunc(mraid.getVersion)},replaceServerTokens:function(a,b){b=b.oURLTokens=b.oURLTokens||this.pairsToObj(b.sUrlTokens,"$$");for(var c in b)b.hasOwnProperty(c)&&(a=a.replace(new RegExp("\\[%"+c+"%\\]","ig"),b[c]));return a},replaceURLTokens:function(a,
b){if(!b)return a;void("");try{if(a){a=a.replace(/\[%random%\]|\[ebRandom\]|\[timestamp\]/ig,b.rnd).replace(/\[%tp_adid%\]/ig,b.adId).replace(/\[%tp_flightid%\]/ig,b.placementId).replace(/\[%tp_campaignid%\]/ig,b.campaignId);b.gdpr&&(a=a.replace(/\[%gdpr%\]|\${gdpr}|{gdpr}/ig,b.gdpr));if(b.gdprconsent){a=a.replace(/\[%gdpr_consent%\]|{gdpr_consent}/ig,b.gdprconsent);var c=[1,2,4,6,7,8,9,10,11,12,13,14,15,16,18,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,36,
37,39,40,41,42,44,45,46,47,48,49,50,51,52,53,56,57,58,59,60,61,62,63,65,66,67,68,69,70,71,72,73,75,76,77,78,79,80,82,83,84,85,86,87,88,89,90,91,92,93,94,95,97,98,100,101,102,104,108,109,110,111,114,115,119,120,122,124,126,127,128,129,130,131,132,133,134,136,137,138,139,140,141,142,143,144,145,147,148,149,150,151,152,153,154,155,157,158,159,160,161,162,163,164,165,167,168,170,173,174,177,178,179,183,184,185,190,192,193,194,195,196,198,199,200,202,203,205,206,208,209,210,211,212,213,215,216,217,218,
223,224,226,227,228,230,231,234,235,236,237,238,239,240,241,242,243,244,246,248,249,250,251,252,253,254,255,256,259,261,262,263,264,265,266,270,272,273,274,275,276,277,278,279,280,281,282,284,285,289,290,293,294,295,297,298,299,301,302,303,304,308,310,311,312,314,315,316,317,318,319,321,323,325,328,329,331,333,334,335,336,337,343,345,347,349,350,351,354,358,359,360,361,365,368,371,373,374,375,377,378,380,381,382,384,385,387,388,394,397,402,408,409,410,412,413,415,416,418,422,423,424,427,428,429,431,
434,435,436,438,439,440,444,447,448,450,452,455,458,459,461,462,466,467,468,469,471,473,475,479,482,484,486,488,490,491,493,495,496,497,498,501,502,505,506,507,508,509,511,512,516,517,519,520,521,524,527,528,530,531,535,536,539,541,543,544,545,546,547,549,550,553,554,556,559,561,565,568,569,570,571,573,574,577,578,579,580,581,584,587,590,591,593,596,597,598,599,601,602,606,607,609,610,612,613,614,615,617,618,620,621,624,625,626,628,630,631,638,639,644,645,646,647,648,649,650,652,653,654,655,656,657,
658,659,662,663,664,665,666,667,668,670,671,672,674,675,676,678,681,682,683,684,685,686,687,688,690,691,694,697,699,702,703,706,707,708,709,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,753,754,755,756,757,758,759,760,761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800,801,802,
803,804,805,806,807,808,809,810,811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840,841,842,843,844,845,846,847,848,849,850,851,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880,881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,899,900,901,902,903,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,
930,931,932,933,934,935,936,937,938,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1E3,1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013,1014,1015,1016,1018,1019,1020,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044];try{a.match(/\${gdpr_consent_\d+}/ig).forEach(function(d){-1<
c.indexOf(+d.match(/\d+/))&&(a=a.replace(d,b.gdprconsent))})}catch(d){}}a=this.replaceServerTokens(a,b)}void("")}catch(d){void(""),EBG.log.endGroup()}EBG.log.endGroup();return a},pairsToObj:function(a,b){var c={};a=decodeURIComponent(a).split(b);for(b=0;b<a.length;b++)try{var d=a[b].split("=");1<d.length&&(c[d[0]]=encodeURIComponent(d[1]))}catch(e){void("")}return c}},EBGUUID=function(){var a=
(new Date).getTime();try{var b=[];if(window.crypto)b=crypto.getRandomValues(new Uint32Array(36));else for(var c=0;36>c;c++)b.push(parseInt(1E11*Math.random(),16));return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d,e){e=(a+b[e]%17)%16|0;a=Math.floor(a/16)||(new Date).getTime();return("x"===d?e:e&3|8).toString(16)})}catch(d){return[a,parseInt(1E11*Math.random(),16)].join("-")}},EBGTimeline=function(a,b){var c=a.exscope,d=this.getTimes();this.startTimeD=a.startTimeD;this.startTimeP=
a.startTimeP;this.adsid=a.adsid?a.adsid:EBGUUID();this.ebsid="cframe"===c?EBGUUID():0;this.sid=a.sID;this.updateSessions();var e=window.szmkSession||{},f=window.EBG.szmkSession||{};this.data={sid:a.sID,config_sid:a.config_sid,config_sids:a.config_sids||[],event:b,adsid:this.adsid,ebsid:this.ebsid,ebsids:[-1],eb_adsids:[-1],events:[b],pid:a.placementId,siteid:a.siteId,formatid:a.formatId,templatename:a.templateName,isstdad:!0===a.isStdAd?1:0,imageonly:!0===a.imageOnly?1:0,exscope:c,purpose:"timeline",
dtimes:[d.dtime],ptimes:[d.ptime],pnows:[d.pnow],v_states:[document.visibilityState],r_states:[document.readyState],cticks:[this.getCtick(this.startTimeD,this.startTimeP,"cframe"===c)],tzoffs:[d.tzoff],w_sid:e.sid||0,w_dtime:e.dtime||0,w_ptime:e.ptime||0,w_sids:e.sids||[],w_adsids:e.adsids||[],ebg_sid:f.sid||0,ebg_dtime:f.dtime||0,ebg_ptime:f.ptime||0,ebg_sids:f.sids||[],ebg_adsids:f.adsids||[],seq:0}};
EBGTimeline.prototype={updateSessions:function(){var a=this.getTimes();try{window.szmkSession=window.szmkSession||{sid:EBGUUID(),dtime:a.dtime,ptime:a.ptime,sids:[],adsids:[]},window.szmkSession.sids.push(this.sid),window.szmkSession.adsids.push(this.adsid),window.EBG&&(window.EBG.szmkSession=window.EBG.szmkSession||{sid:EBGUUID(),dtime:a.dtime,ptime:a.ptime,sids:[],adsids:[]},window.EBG.szmkSession.sids.push(this.sid),window.EBG.szmkSession.adsids.push(this.adsid))}catch(b){}},update:function(a,
b){try{b=b||{};var c=this.getTimes(),d=this.data;d.event=a;d.events.push(a);d.cticks.push(this.getCtick(this.startTimeD,this.startTimeP,"cframe"===d.exscope));d.dtimes.push(c.dtime);d.ptimes.push(c.ptime);d.pnows.push(c.pnow);d.v_states.push(document.visibilityState);d.r_states.push(document.readyState);d.tzoffs.push(c.tzoff);d.seq++;d.ebsids.push(b.eb_ebsid?b.eb_ebsid:-1);d.eb_adsids.push(b.eb_adsid?b.eb_adsid:-1)}catch(e){}},getData:function(){var a={};try{var b=this.data,c;for(c in b){var d=b[c];
a[c]=Array.isArray(d)?d.join(","):""+d}}catch(e){return{sid:this.sid,purpose:"timeline",event:"error",error:e.stack.replace(/\n/g,"||").replace(/\s{2,}/g," "),dtime:(new Date).getTime()}}return a},getTimes:function(){var a=new Date;a={dtime:a.getTime(),pnow:0,ptime:0,tzoff:a.getTimezoneOffset()};performance&&(performance.now&&(a.pnow=Math.ceil(performance.now())),a.ptime=Math.ceil(performance.timeOrigin)||0);return a},getCtick:function(a,b,c){return window.performance&&performance.now&&(c?(new Date).getTime()-
a:Math.round(performance.now())-b)},getUUID:function(){var a=(new Date).getTime();try{var b=[];if(window.crypto)b=crypto.getRandomValues(new Uint32Array(36));else for(var c=0;36>c;c++)b.push(parseInt(1E11*Math.random(),16));return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d,e){e=(a+b[e]%17)%16|0;a=Math.floor(a/16)||(new Date).getTime();return("x"===d?e:e&3|8).toString(16)})}catch(d){return[a,parseInt(1E11*Math.random(),16)].join("-")}}};EBG=window.EBG||{};
EBGInfra.mergeObj(EBGInfra,EBG,!1);EBG.declareNamespace("Logging");EBG.Logging.LoggerLevels={NONE:0,ERROR:1,INFO:2,WARN:3,DEBUG:4};EBG.Logging.Logger=function(a){this._level=a;this.startNestingGroupNames=[];this.endNestingGroupNames=[];this._stringFilters=[];this._fGroupFilter=!1;this._maxIndent=15};
EBG.Logging.Logger.prototype={setLevel:function(a){this._level=a},setFilter:function(a,b){"string"==EBG.typeOf(a)&&(a=[a]);this._fGroupFilter=EBG.isDefined(b)?b:!0;this._stringFilters=a},debug:function(a){this._reportToLog(EBG.Logging.LoggerLevels.DEBUG,arguments)},info:function(a){this._reportToLog(EBG.Logging.LoggerLevels.INFO,arguments)},warn:function(a){this._reportToLog(EBG.Logging.LoggerLevels.WARN,arguments)},error:function(a){this._reportToLog(EBG.Logging.LoggerLevels.ERROR,arguments)},exception:function(a,
b){a="string"!==b?EBG.format("Exception in {0}. message: {1}",a,b.message):EBG.format("Exception in: {0}. message: {1}",a,b);b.stack&&(a+=EBG.format(" stack: {0}",b.stack));this._reportToLog(EBG.Logging.LoggerLevels.ERROR,[a])},startGroup:function(a){this._supportNesting()&&this._passesFilter(a)&&this.startNestingGroupNames.push(a)},endGroup:function(){this._supportNesting()&&0<this.endNestingGroupNames.length&&window.console.groupEnd(this.endNestingGroupNames.pop())},_consoleAvailable:function(){return void 0!==
window.console},_supportNesting:function(){return this._consoleAvailable()?void 0!==window.console.group:!1},_supportErrorMessage:function(){return void 0!==window.console.error},_supportInfoMessage:function(){return void 0!==window.console.info||void 0!==window.opera},_supportWarnMessage:function(){return void 0!==window.console.warn||void 0!==window.opera},_supportObjectView:function(){return void 0!==window.console.dir||void 0!==window.opera},_callConsoleFunction:function(a,b){var c=!1;switch(a){case EBG.Logging.LoggerLevels.INFO:this._supportInfoMessage()&&
(window.console.info(b),c=!0);break;case EBG.Logging.LoggerLevels.WARN:this._supportWarnMessage()&&(window.console.warn(b),c=!0);break;case EBG.Logging.LoggerLevels.ERROR:this._supportErrorMessage()&&(consoleFunction=window.console.error(b),c=!0)}c||window.console.log(b)},_resetNesting:function(){for(var a=0;a<=this._maxIndent;a++)this.endGroup();console.warn("Reset log group nesting. MaxIndent = "+this._maxIndent)},_passesFilter:function(a){var b=!1;if(0==this._stringFilters.length)b=!0;else for(var c=
0;c<this._stringFilters.length;c++)if(-1<a.indexOf(this._stringFilters[c])){b=!0;break}return b},_reportToLog:function(a,b){if(this._level>=a&&this._consoleAvailable()){var c=b[0];"[object String]"!==Object.prototype.toString.call(c)?this._supportObjectView()||(c=c.toString()):c=EBG.format.apply(null,b);if(void 0===window.opera){for(;this.startNestingGroupNames.length;)window.console.group(this.startNestingGroupNames[0]),this.endNestingGroupNames.push(this.startNestingGroupNames.shift());(this._passesFilter(c)||
this._fGroupFilter&&0<this.endNestingGroupNames.length)&&this._callConsoleFunction(a,c);this.endNestingGroupNames.length>this._maxIndent&&this._resetNesting()}else this._passesFilter(c)&&opera.postError(c)}}};EBG.declareClass(EBG.Logging.Logger,null);EBG.log=EBG.log||new EBG.Logging.Logger(EBG.Logging.LoggerLevels.NONE);
(function(a,b,c){b||(b={fn:{},extend:function(){for(var e=arguments[0],f=1,g=arguments.length;f<g;f++){var h=arguments[f],k;for(k in h)e[k]=h[k]}return e}});b.fn.pm=function(){void("");return this};if(a.EBG&&!EBG.pm){b.pm=EBG.pm=function(e){d.send(e)};b.pm.bind=EBG.bind=function(e,f,g,h,k){d.bind(e,f,g,h,k)};b.pm.unbind=EBG.unbind=function(e,f){d.unbind(e,f)};b.pm.dispatch=function(e,f,g,h){d._dispatch({data:JSON.stringify({data:f,
type:e}),source:g,target:h,origin:null})};b.pm.__dispatch=b.pm.dispatch;b.pm.origin=EBG.pm.origin=null;var d={send:function(e){e=b.extend({},d.defaults,e);var f=e.target;if(e.target)if(e.type){var g={data:e.data,type:e.type};e.success&&(g.callback=d._callback(e.success));e.error&&(g.errback=d._callback(e.error));"postMessage"in f&&!e.hash&&(d._bind(),f.postMessage(JSON.stringify(g),e.origin||"*"))}else void("");else void("")},
bind:function(e,f,g,h,k,l){"postMessage"in a&&!l&&(d._bind(h),h=d.data("listeners.postmessage"),h||(h={},d.data("listeners.postmessage",h)),l=h[e],l||(l=[],h[e]=l),l.push({fn:f,origin:k||b.pm.origin,bindObj:g}))},unbind:function(e,f){var g=d.data("listeners.postmessage");if(g&&e)if(f){var h=g[e];if(h){for(var k=[],l=0,m=h.length;l<m;l++){var p=h[l];p.fn!==f&&k.push(p)}g[e]=k}}else delete g[e]},data:function(e,f){return f===c?d._data[e]:d._data[e]=f},_data:{},_CHARS:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),
_random:function(){for(var e=[],f=0;32>f;f++)e[f]=d._CHARS[0|32*Math.random()];return e.join("")},_callback:function(e){var f=d.data("callbacks.postmessage");f||(f={},d.data("callbacks.postmessage",f));var g=d._random();f[g]=e;return g},_bind:function(e){d.data("listening.postmessage")||(e=e?e:a,e.addEventListener?e.addEventListener("message",d._dispatch,!1):a.attachEvent&&e.attachEvent("onmessage",d._dispatch),d.data("listening.postmessage",1))},_dispatch:function(e){var f={};try{f=JSON.parse(e.data)}catch(p){return}if(f.type){var g=
(d.data("callbacks.postmessage")||{})[f.type];if(g)g(f.data);else{g=(d.data("listeners.postmessage")||{})[f.type]||[];for(var h=0,k=g.length;h<k;h++){var l=g[h];if(l.origin&&e.origin!==l.origin)void(""),f.errback&&d.send({target:e.source,data:{message:"postmessage origin mismatch",origin:[e.origin,l.origin]},type:f.errback});else try{var m=l.bindObj?l.fn.apply(l.bindObj,[f.data,e]):l.fn(f.data,e);f.callback&&d.send({target:e.source,
data:m,type:f.callback})}catch(p){f.errback&&d.send({target:e.source,data:p,type:f.errback})}}}}else void("")}};b.extend(d,{defaults:{target:null,url:null,type:null,data:null,success:null,error:null,origin:"*",hash:!1}})}else b.pm=EBG.pm})(this,"undefined"===typeof jQuery?null:jQuery);"JSON"in window&&window.JSON||(JSON={});
(function(){function a(l){return 10>l?"0"+l:l}function b(l){e.lastIndex=0;return e.test(l)?'"'+l.replace(e,function(m){var p=h[m];return"string"===typeof p?p:"\\u"+("0000"+m.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+l+'"'}function c(l,m){var p=f,n=m[l];n&&"object"===typeof n&&"function"===typeof n.toJSON&&(n=n.toJSON(l));"function"===typeof k&&(n=k.call(m,l,n));switch(typeof n){case "string":return b(n);case "number":return isFinite(n)?String(n):"null";case "boolean":case "null":return String(n);
case "object":if(!n)return"null";f+=g;var t=[];if("[object Array]"===Object.prototype.toString.apply(n)){var u=n.length;for(l=0;l<u;l+=1)t[l]=c(l,n)||"null";m=0===t.length?"[]":f?"[\n"+f+t.join(",\n"+f)+"\n"+p+"]":"["+t.join(",")+"]";f=p;return m}if(k&&"object"===typeof k)for(u=k.length,l=0;l<u;l+=1){var q=k[l];"string"===typeof q&&(m=c(q,n))&&t.push(b(q)+(f?": ":":")+m)}else for(q in n)Object.hasOwnProperty.call(n,q)&&(m=c(q,n))&&t.push(b(q)+(f?": ":":")+m);m=0===t.length?"{}":f?"{\n"+f+t.join(",\n"+
f)+"\n"+p+"}":"{"+t.join(",")+"}";f=p;return m}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(l){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(l){return this.valueOf()});var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,g,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=function(l,m,p){var n;g=f="";if("number"===typeof p)for(n=0;n<p;n+=1)g+=" ";else"string"===typeof p&&(g=p);if((k=m)&&"function"!==typeof m&&("object"!==typeof m||"number"!==typeof m.length))throw Error("JSON.stringify");return c("",{"":l})});
"function"!==typeof JSON.parse&&(JSON.parse=function(l,m){function p(n,t){var u,q=n[t];if(q&&"object"===typeof q)for(u in q)if(Object.hasOwnProperty.call(q,u)){var r=p(q,u);void 0!==r?q[u]=r:delete q[u]}return m.call(n,t,q)}d.lastIndex=0;d.test(l)&&(l=l.replace(d,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(l.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return l=eval("("+l+")"),"function"===typeof m?p({"":l},""):l;throw new SyntaxError("JSON.parse");})})();EBG.declareNamespace("API");EBG.API.InjectionMethod={APPEND:"append",INSERT_BEFORE:"insertBefore",INSERT_AFTER:"insertAfter",FIRST_CHILD:"firstChild",LAST_CHILD:"lastChild"};EBG.API.BrowserTypes={NON_SUPPORTED:0,IE:1,FF:2,NN:3,SAFARI:4,CHROME:5,AOL:6,OPERA:7,EDGE:8};
EBG.API.PlatformTypes={NON_SUPPORTED:0,WIN_95:1,WIN_98:2,WIN_2000:3,WIN_XP:4,WIN_ME:5,WIN_NT:6,MAC:7,WIN_VISTA:8,WIN_7:9,IPHONE:10,IPAD:11,IPOD:12,ANDROID_2_TAB:13,ANDROID_3_TAB:14,WIN_10:15,ANDROID_5_TAB:16,ANDROID_2_MOBILE:17,ANDROID_3_MOBILE:18,WIN_MOBILE_7:19,ANDROID_4_TAB:20,ANDROID_4_MOBILE:21,WIN_8:22,MAC_NEW:23,MAC_YOSEMITE:24,ANDROID_5_MOBILE:25,CROS:26,FBAN:27,SMART_TV:28,UBUNTU:29,LINUX:30,ANDROID_1:31,ANDROID_6_MOBILE:32,ANDROID_6_TAB:33,Mac_El_Capitan:34,Mac_Sierra:35,ANDROID_7_MOBILE:36,
ANDROID_7_TAB:37,ANDROID_8_MOBILE:39,ANDROID_8_TAB:40,ANDROID_9_MOBILE:41,ANDROID_9_TAB:42,ANDROID_10_MOBILE:43,ANDROID_10_TAB:44,ANDROID_11_MOBILE:45,ANDROID_11_TAB:46};EBG.API.DeviceTypes={DESKTOP:0,MOBILE:1,TABLET:2,UNKNOWN:3};
EBG.API.EventNames={INAPP_IMPRESSION:"INAPP_IMPRESSION",CREATE_AD:"CREATE_AD",CREATE_ADAPTOR:"CREATE_ADAPTOR",ADAPTOR_MODULES_READY:"ADAPTOR_MODULES_READY",CREATE_INT_MGR:"CREATE_INT_MGR",CREATE_ANIM_MGR:"CREATE_ANIM_MGR",CREATE_POSITIONING_HELPER:"CREATE_POSITIONING_HELPER",CREATE_GEOMETRY_HELPER:"CREATE_GEOMETRY_HELPER",SHOW_AD:"SHOW_AD",ADD_CREATIVES:"ADD_CREATIVES",ADD_INTERACTION:"ADD_INTERACTION",ADD_EYE_DIV:"ADD_EYE_DIV",ADD_HTML5_MAIN_CREATIVE:"ADD_HTML5_MAIN_CREATIVE",ADD_HTML5_PANEL_CREATIVE:"ADD_HTML5_PANEL_CREATIVE",
ADD_EMPTY_BANNER_CREATIVE:"ADD_EMPTY_BANNER_CREATIVE",ADD_BANNER_IMAGE_CREATIVE:"ADD_BANNER_IMAGE_CREATIVE",ADD_BANNER_DEFAULT_IMAGE_CREATIVE:"ADD_BANNER_DEFAULT_IMAGE_CREATIVE",ADD_BANNER_PRELOAD_IMAGE_CREATIVE:"ADD_BANNER_PRELOAD_IMAGE_CREATIVE",ADD_BANNER_DEFAULT_FLASH_CREATIVE:"ADD_BANNER_DEFAULT_FLASH_CREATIVE",ADD_BANNER_RICH_FLASH_CREATIVE:"ADD_BANNER_RICH_FLASH_CREATIVE",ADD_FLOATING_INTRO_CREATIVE:"ADD_FLOATING_INTRO_CREATIVE",ADD_FLOATING_REMINDER_CREATIVE:"ADD_FLOATING_REMINDER_CREATIVE",
ADD_FLOATING_MINISITE_CREATIVE:"ADD_FLOATING_MINISITE_CREATIVE",ADD_PANEL_RICH_FLASH_CREATIVE:"ADD_PANEL_RICH_FLASH_CREATIVE",SHOW_BANNER_RICH_FLASH_CREATIVE:"SHOW_BANNER_RICH_FLASH_CREATIVE",SHOW_PANEL_RICH_FLASH_CREATIVE:"SHOW_PANEL_RICH_FLASH_CREATIVE",SHOW_PANEL_CREATIVE:"SHOW_PANEL_CREATIVE",SHOW_REMINDER:"SHOW_REMINDER",SHOW_MINISITE:"SHOW_MINISITE",PAGE_LOAD:"PAGE_LOAD",COLLECT_TIMERS:"COLLECT_TIMERS",PAGE_UNLOAD:"PAGE_UNLOAD",AD_UNLOAD:"AD_UNLOAD",PAGE_BEFORE_UNLOAD:"PAGE_BEFORE_UNLOAD",PAGE_HIDE:"PAGE_HIDE",
PAGE_RESIZE:"PAGE_RESIZE",PAGE_SCROLL:"PAGE_SCROLL",PAGE_FOCUS:"PAGE_FOCUS",PAGE_FOCUSIN:"PAGE_FOCUSIN",PAGE_FOCUSOUT:"PAGE_FOCUSOUT",PAGE_BLUR:"PAGE_BLUR",PAGE_HIDDEN:"PAGE_HIDDEN",PAGE_VISIBLE:"PAGE_VISIBLE",INTERACTION_REPORT_REMOTE_SERVERS:"INTERACTION_REPORT_REMOTE_SERVERS",START_TIMER:"START_TIMER",STOP_TIMER:"STOP_TIMER",UPDATE_TIMER:"UPDATE_TIMER",HANDLE_COUNTER_INTERACTION:"HANDLE_COUNTER_INTERACTION",HANDLE_TIMER_INTERACTION:"HANDLE_TIMER_INTERACTION",DEFAULT_CLICK:"DEFAULT_CLICK",EXPAND:"EXPAND",
COLLAPSE:"COLLAPSE",USER_INTERACTION:"USER_INTERACTION",MOUSE_OVER:"MOUSE_OVER",MOUSE_OUT:"MOUSE_OUT",MOUSE_MOVE:"MOUSE_MOVE",MODULE_LOAD:"MODULE_LOAD",USER_INITIATED_VIDEO:"USER_INITIATED_VIDEO",DWELL_UNIQUE:"DWELL_UNIQUE",DWELL_VIDEO_START:"DWELL_VIDEO_START",DWELL_VIDEO_STOP:"DWELL_VIDEO_STOP",CREATIVE_CONTAINER_READY:"CREATIVE_CONTAINER_READY",RICH_FLASH_PLAYED:"RICH_FLASH_PLAYED",REPLAY_AD:"REPLAY_AD",BANDWITH_DETECTED:"BANDWITH_DETECTED",FULL_SCREEN_START:"FULL_SCREEN_START",FULL_SCREEN_END:"FULL_SCREEN_STOP",
ANIMATE_PANEL:"ANIMATE_PANEL",CLOSE_AD:"CLOSE_AD",OPEN_PAGE:"OPEN_PAGE",MAX_AD_DURATION:"MAX_AD_DURATION",FLASH_IN_FRAME_TWO:"FLASH_IN_FRAME_TWO",SHOW_HIDE_ELEMENTS:"SHOW_HIDE_ELEMENTS",DEFAULT_IMPRESSION:"DEFAULT_IMPRESSION",AIE_LOADED:"AIE_LOADED",INIT_MANAGERS:"INIT_MANAGERS",MOUSE_MOVE_NEEDED:"MOUSE_MOVE_NEEDED",VISIBILITY_CHECK:"VISIBILITY_CHECK",VISIBILITY_HIDDEN:"VISIBILITY_HIDDEN",AD_START:"AD_START",ELEMENT_LOADED:"ELEMENT_LOADED",AD_STACKING:"AD_STACKING",SCREEN_ORIENTATION:"SCREEN_ORIENTATION",
PORTRAIT:"PORTRAIT",LANDSCAPE:"LANDSCAPE",CHANGE_PANEL_POSITION:"CHANGE_PANEL_POSITION",PANEL_FREQUENCY_LOADED:"PANEL_FREQUENCY_LOADED",THROTTLED:"THROTTLED",FLASH_DETECTED:"FLASH_DETECTED",ANIMATION:"ANIMATION",RESIZE_PANEL:"RESIZE_PANEL",MESSAGE_CREATIVE:"MESSAGE_CREATIVE",ELEMENT_HIDDEN:"ELEMENT_HIDDEN",ELEMENT_SHOWN:"ELEMENT_SHOWN",DEVICE_MOTION:"DEVICE_MOTION",DEVICE_ORIENTATION:"DEVICE_ORIENTATION",INSTREAM_SEND_IMPRESSION:"INSTREAM_SEND_IMPRESSION",IMPRESSION_SENT:"IMPRESSION_SENT"};
EBG.API.EbEventNames={PAGE_LOAD:EBG.API.EventNames.PAGE_LOAD,SCREEN_ORIENTATION:EBG.API.EventNames.SCREEN_ORIENTATION,VISIBILITY:EBG.API.EventNames.VISIBILITY_CHECK,EXPAND:EBG.API.EventNames.EXPAND,COLLAPSE:EBG.API.EventNames.COLLAPSE,DEVICE_MOTION:EBG.API.EventNames.DEVICE_MOTION,DEVICE_ORIENTATION:EBG.API.EventNames.DEVICE_ORIENTATION};
EBG.VideoInteraction={STARTED:"ebVideoStarted",PERCENT_25_PLAYED:"eb25Per_Played",PERCENT_50_PLAYED:"eb50Per_Played",PERCENT_75_PLAYED:"eb75Per_Played",FULLPLAY:"ebVideoFullPlay",MUTE:"ebVideoMute",UNMUTE:"ebVideoUnmute",PAUSE:"ebVideoPause",REPLAY:"ebVideoReplay",UNMUTED:"ebVideoUnmuted",FULLSCREEN_START:"ebFSStart",FULLSCREEN_END:"ebFSEnd",FULLSCREEN_MUTE:"ebFSVideoMute",FULLSCREEN_PAUSE:"ebFSVideoPause",SLIDER_DRAGGED:"ebSliderDragged",VIDEO_PLAY_DURATION:"ebVideoPlayDuration",VIDEO_ASSET_DURATION:"ebVideoAssetDuration",
FULLSCREEN_DURATION:"ebFSVideoPlayDuration",FULLSCREEN_ASSET_DURATION:"ebFSVideoAssetDuration",USER_INITIATED_VIDEO:"ebUserInitiatedVideo",SKIP:"ebSkip",VIDEO_START:"AdVideoStart",FIRST_POINT:"AdVideoFirstQuartile",MID_POINT:"AdVideoMidpoint",THIRD_POINT:"AdVideoThirdQuartile",VIDEO_COMPLETE:"AdVideoComplete"};EBG.VideoQuartiles=[EBG.VideoInteraction.STARTED,EBG.VideoInteraction.PERCENT_25_PLAYED,EBG.VideoInteraction.PERCENT_50_PLAYED,EBG.VideoInteraction.PERCENT_75_PLAYED,EBG.VideoInteraction.FULLPLAY];
EBG.ReportImpressionType={SERVER:0,DELAYED:1,CLIENT:2};
EBG.EBMessage={SDK_BRIDGE_LOADED:"sdkBridgeLoaded",MRAID_LOADED:"mraidLoaded",REQ_INIT:"reqInit",INIT:"ebInit",INITDONE:"ebInitDone",GET_ENVIROMENT:"ebGetEnvironment",SHOW_DEFAULT_IMAGE:"ebShowDefaultImage",CLICKTHROUGH:"ebclickthrough",NOTIFIED_INTERACTION:"ebNotifiedInteraction",VERSION_TRACKING_IMPRESSION:"ebversiontrackingimpression",USER_ACTION_COUNTER:"ebCIUserActionCounter",AUTOMATIC_EVENT_COUNTER:"ebCIAutomaticEventCounter",START_TIMER:"ebCIStartTimer",UPDATE_TIMER:"ebUpdateTimer",STOP_TIMER:"ebCIStopTimer",
START_VIDEO_TIMER:"ebStartVideoTimer",STOP_VIDEO_TIMER:"ebendvideotimer",VIDEO_INTERACTION:"ebVideoInteraction",VIDEO_INIT:"ebVideoInit",VIDEO_LOAD:"ebVideoLoad",INIT_VIDEO_LOADER:"ebInitVideoLoader",VIDEO_FS_OPEN:"ebVideoFSOpen",VIDEO_FS_CLOSE:"ebVideoFSClose",VIDEO_FS_AUTO_CLOSE:"ebVideoFSAutoClose",START_VIDEO:"ebtStartVideo",STOP_VIDEO:"ebtStoptVideo",UPDATE_VIDEO_DURATION:"ebtUpdateVideoDuration",FULL_SCREEN_OPEN:"ebFullScreenOpen",FULL_SCREEN_CLOSE:"ebFullScreenClose",FULL_SCREEN_AUTO_CLOSE:"ebFullScreenAutoClose",
MOUSE_MOVE:"ebMouseMove",PAGE_LOAD:"ebPageLoad",TRIGGER_AD_START:"ebTriggerAdStart",INIT_EXPANSION_PARAMS:"ebInitExpansionParams",RESET_COLLAPSE_TIMER:"ebResetCollapseTimer",NEW_SE:"ebNewSE",EXPAND:"ebExpandPanel",EXPAND_DONE:"ebExpandDone",COLLAPSE:"ebCollapsePanel",COLLAPSE_DONE:"ebCollapseDone",NOTIFY_INTERACTION_MONITOR:"NotifyInteractionMonitor",HIDE_INTRO:"ebHideIntro",INTRO_FULL_PLAY:"ebIntroFullPlay",KEEP_AD_OPREN:"ebKeepAdOpen",GO_TO_MINISITE:"ebGoToMiniSite",UPDATE_CLICK:"ebUpdateClick",
DOCUMENT_LOADED:"ebDocumentLoaded",PLAY_VIDEO_ON_NATIVE_PLAYER:"playVideoOnNativePlayer",CREATE_CALENDAR_EVENT:"createCalendarEvent",STORE_PICTURE:"storePicture",SDK_DATA_CHANGE:"sdkDataChange",SDK_EVENT:"sdkEvent",ADAPTOR_READY:"adaptorReady",SWIPE:"ebSwipe",DISPOSE:"ebDispose",SET_RESIZE_PROPS:"ebResizeProperties",RESIZE:"ebResize",SET_EXPAND_PROPS:"ebExpandProperties",SET_ORIENTATION_PROPS:"ebOrientationProperties",CLOSE:"ebClose",CLOSE_AD:"ebclosead",SET_STATE:"ebSetstate",RESET_STATE:"ebResetstate",
REQ_MOUSE_MOVE:"ebReqMouseMove",ANIMATION:"ebAnimation",VISIBILITY:"ebVisibility",PANEL_FREQUENCY:"ebPanelFrequency",HIDE_ELEMENT:"ebHideElement",SHOW_ELEMENT:"ebShowElement",ACKNOWLEDGE:"ebAcknowledge",SEND_IMP:"sendImp",UPDATE_VISIBILITY_ASSET:"ebUpdateVisibilityAsset",HEAVY_AD_INTERVENTION:"HeavyAdIntervention"};EBG.DurationInteraction={TIMER:"Timer",AGGREGATE:"Aggregate"};
EBG.Animation={Easing:{linear:"linear",easeInQuad:"easeInQuad",easeOutQuad:"easeOutQuad",easeInOutQuad:"easeInOutQuad",easeInCubic:"easeInCubic",easeOutCubic:"easeOutCubic",easeInOutCubic:"easeInOutCubic",easeInQuart:"easeInQuart",easeOutQuart:"easeOutQuart",easeInOutQuart:"easeInOutQuart",easeInQuint:"easeInQuint",easeOutQuint:"easeOutQuint",easeInOutQuint:"easeInOutQuint"},TransitionEasing:{ease:"ease",linear:"linear",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out"}};
EBG.INNERIFRAMEMessage={LOADED:"ebInnerIframeLoaded",INIT:"ebInitInnerIframe",VERIFY:"ebVerifyInnerIframe",EBO:"ebO",GLOBALPARAMS:"ebGlobalParams",CONTINUE_SENDING:"ContinueSending",NOT_LASTMSG:"NotLastMsg",LASTMSG:"LastMsg",ADCONFIG_REQUEST:"AdConfig_Request",SECRET_TAGS:"Secret_Tags"};
EBG.FS={EB_VERSION_TRACKING_IMPRESSION:"ebversiontrackingimpression",EB_CLICKTHROUGH:"ebclickthrough",EB_CREATIVE_EVENT_SUBSCRIPTION:"ebcreativeaddhdr",EB_CI_USER_ACTION_COUNTER:"ebciuseractioncounter",EB_CI_AUTOMATIC_EVENT_COUNTER:"ebciautomaticeventcounter",EB_VIDEO_INTERACTION:"ebvideointeraction",EB_START_TIMER:"ebstarttimer",EB_END_TIMER:"ebendtimer",EB_CI_START_TIMER:"ebcistarttimer",EB_CI_STOP_TIMER:"ebcistoptimer",EB_UPDATE_TIMER:"ebupdatetimer",EB_START_VIDEO_TIMER:"ebstartvideotimer",EB_STOP_VIDEO_TIMER:"ebendvideotimer",
EB_PAGE_LOAD:"ebpageload",EB_COMMAND:"ebcommand",EB_MSG:"ebmsg",EB_EXPAND_PANEL:"ebexpandpanel",EB_COLLAPSE_PANEL:"ebcollapsepanel",EB_SET_STATE:"ebsetstate",EB_RESET_STATE:"ebresetstate",EB_MOUSE_TRACKER:"ebmousetracker",EB_MOUSE_MOVE:"ebmousemove",EB_TEST_DC:"ebtestdc",EB_CLOSE_AD:"ebclosead",EB_REPLAY_AD:"ebreplayad",EB_REPLAY_EXP:"ebreplayexp",EB_LOAD_RICH_BANNER:"ebloadrichbanner",EB_SHOW_RICH_BANNER:"ebshowrichbanner",EB_INIT_VIDEO_LOADER:"ebinitvideoloader",EB_HIDE_INTRO:"ebhideintro",EB_INTRO_FULL_PLAY:"ebintrofullplay",
EB_KEEP_AD_OPREN:"ebkeepadopen",EB_GO_TO_MINISITE:"ebgotominisite",EB_VIDEO_LOAD:"ebvideoload",EB_VIDEO_LOAD_AND_PLAY:"ebvideoloadandplay",EB_FULL_SCREEN_OPEN:"ebfullscreenopen",EB_FULL_SCREEN_CLOSE:"ebfullscreenclose",EB_FULL_SCREEN_AUTO_CLOSE:"ebfullscreenautoclose",EB_VIDEO_FS_OPEN:"ebvideofsopen",EB_VIDEO_FS_CLOSE:"ebvideofsclose",EB_VIDEO_FS_AUTO_CLOSE:"ebvideofsautoclose",EB_START_VIDEO:"ebtstartvideo",EB_STOP_VIDEO:"ebtstopvideo",EB_UPDATE_VIDEO_DURATION:"ebtupdatevideoduration",EB_GET_JS_VAR:"ebgetjsvar",
EB_GET_ALL_JS_VARS:"ebgetalljsvars",EB_SET_JS_VAR:"ebsetjsvar",EB_INIT_SE:"ebinitse",EB_SET_SE_PROXY:"ebsetseproxy",EB_SE_EXPAND_STARTED:"ebseexpandstarted",EB_SE_RETRACT_STARTED:"ebseretractstarted",EB_SE_RETRACT_FINISHED:"ebseretractfinished",EB_NOTIFICATION:"notification",EB_VIDEO_ACTIVE_MODE:"ebvideoactivemode"};EBG.ActionType={USER:"user",AUTO:"auto"};EBG.ExpBaseInteractions={PANELS_VIEWED:"ebPanelsViewed",AUTO_SHOW:"autoshow",DURATION:"duration"};EBG.SingleExpInteractions=EBG.ExpBaseInteractions;
EBG.orientation={Both:"BOTH",Landscape:"LANDSCAPE",Portrait:"PORTAIT"};
EBG.adTypes={RichBannerHtml5:"Html5Banner",PoliteBannerHtml5:"Html5PoliteBanner",SEBannerHtml5:"Html5SEBanner",ExpBannerHtml5:"Html5ExpBanner",DynamicExpBannerHtml5:"Html5DynamicExpBanner",StdBanner:"StdBanner",Banner:"Banner",SingleExpBanner:"SingleExpBanner",ExpBanner:"ExpBanner",VisibilityAd:"Visibility",FloatingAd:"FloatingAd",FloatingAdWithRem:"FloatingAdWithReminder",TrackingAd:"Tracking",StdBannerHtml5:"Html5StdBanner",WallpaperAd:"WallpaperAd",Image:"Image",Html5InstreamBanner:"Html5InstreamBanner",
FourthParty:"4thParty"};EBG.adParts={BANNER:"banner",PANEL:"panel",DEFAULTBANNER:"defaultBanner",RICHBANNER:"richBanner"};EBG.WindowTarget={BLANK:"_blank",SELF:"_self",PARENT:"_parent",TOP:"_top"};
EBG.Const={OUTER_DIV:"eyeDiv",DATACAPTURE:"/BurstingPipe/BurstingDataCapturePipe.asp",AKAMAIFCS_PLUID_9:"rtmp://flv.stream.atwola.com/flash/flv/mm",AKAMAIFCS_PLUID_43:"rtmp://eyeblaster.fcod.msecnd.net/vod/a10061/e1",AKAMAIFCS_PLUID_42_45:"rtmp://cp57388.edgefcs.net/ondemand",AKAMAI_DEFAULT:"rtmp://cp16207.edgefcs.net/ondemand",SHOW_HIDE_FLAG:"data-ebhidingoverlappingelement",SHOW_HIDE_BACKUP:"data-ebvisibilitybackup"};
EBG.PanelPositionType={PAGE_RELATIVE_PERCENTAGE:0,BANNER_RELATIVE_PIXELS:1,PAGE_RELATIVE_PIXELS:2,VIEWPORT_RELATIVE_PERCENTAGE:3,VIEWPORT_RELATIVE_PIXELS:4};EBG.PanelCorner={TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_LEFT:3,BOTTOM_RIGHT:4};EBG.AnimationType={NONE:"none",LINEAR:"linear",EASE_OUT:"easeout",EASE_OUT_SNAP:"easeoutsnap"};EBG.ExpandCollapseMethod={CLIP:"clip",RESIZE:"resize"};
EBG.AnimationDefaults={easeOutCoefficient:.1,stepTime:10,linearSteps:50,snapThreshold:10,animationType:EBG.AnimationType.NONE,snap:!1,checkShowHideOnEachStep:!1,hideAssetAfterExpand:!1,removeAssetAfterExpand:!1,hideAssetAfterCollapse:!0,removeAssetAfterCollapse:!0,method:EBG.ExpandCollapseMethod.ExpBanner,endAnimationHideAsset:!1,endAnimationRemoveAsset:!1};
EBG.AnimationPushDownDefaults={easeOutCoefficient:.1,stepTime:50,linearSteps:20,snapThreshold:10,animationType:EBG.AnimationType.LINEAR,snap:!1,method:EBG.ExpandCollapseMethod.RESIZE,checkShowHideOnEachStep:!1,hideAssetAfterExpand:!1,removeAssetAfterExpand:!1,hideAssetAfterCollapse:!0,removeAssetAfterCollapse:!0,method:EBG.ExpandCollapseMethod.ExpBanner,endAnimationHideAsset:!1,endAnimationRemoveAsset:!1};
EBG.AnimProps={easeOutCoefficient:"easeOutCoefficient",snapThreshold:"snapThreshold",method:"method",endAnimationHideAsset:"endAnimationHideAsset",endAnimationRemoveAsset:"endAnimationRemoveAsset"};EBG.AnimDefaultProps={stepTime:"stepTime",linearSteps:"linearSteps",animationType:"animationType"};EBG.AnimNonDefaultPanelValues={animationType:EBG.AnimationType.NONE,stepTime:0,linearSteps:1};EBG.AnimExpansionProps={hideAssetAfterExpand:"hideAssetAfterExpand",removeAssetAfterExpand:"removeAssetAfterExpand"};
EBG.AnimCollapseProps={hideAssetAfterCollapse:"hideAssetAfterCollapse",removeAssetAfterCollapse:"removeAssetAfterCollapse"};EBG.ProtectedElementIds=["ebAd","eyeDiv","ebDefault","ebRich","ebDiv"];EBG.VisibilityMode={DEFAULT_MODE:"defaultMode",BASIC_MODE:"basicMode",ENHANCED_MODE:"enhancedMode"};EBG.AcCertProgram={IAB_EU:0,NAI_US:1};EBG.AcIconPosition={TopRight:0,TopLeft:1,BottomRight:2,BottomLeft:3};EBG.PreloadType={DefaultImg:0,PreloadImg:1,DefaultFlash:2};
EBG.ThrottleStates={LOAD:"load",THROTTLE:"throttle",RESUME:"resume",PAUSE:"pause",POLLED:"polled"};EBG.WebEnvironment={BROWSER:0,ANDROID_MOBILE_BROWESR:1,ANDROID_WEB_VIEW:2,IOS_MOBILE_BROWSER:3,IOS_WEB_VIEW:4,OTHER_MOBILE_BROWSER:5,OTHER_WEB_VIEW:6,ANDROID_UNKNOWN:97,IOS_UNKNOWN:98,UNKNOWN:99};EBG.Purposes={COOKIES:1,MEASUREMENTS:7,DEBUG:10};EBG.SDK_STATES=EBG.SDK_STATES||{};EBG.SDK_STATES.API={DEFAULT:"SDKdefault",EXPANDED:"SDKexpanded",LOADING:"SDKloading",RESIZED:"SDKresized"};
EBG.SDK_EVENTS=EBG.SDK_EVENTS||{};EBG.SDK_EVENTS.API={STATE_CHANGE:"SDKstateChange",ERROR:"SDKerror",READY:"SDKready",VIEWABLE_CHANGE:"SDKviewableChange",SIZE_CHANGE:"SDKsizeChange",RESIZE_PROPS_CHANGE:"SDKresizePropsChange",EXPAND_PROPS_CHANGE:"SDKexpandPropsChange",WINDOW_SIZE_CHANGE:"windowSizeChange"};EBG.SDK_BRIDGE_EVENTS={SESSION_START:"sessionStart",GEOMETRY_CHANGE:"geometryChange"};EBG.BuildVersions={ini:1,v2:2,babyshark:3};EBG.declareNamespace("Adaptors");
EBG.Adaptors.TagNames={DIV:"div",IFRAME:"iframe",IMG:"img",SCRIPT:"script",OBJECT:"object",EMBED:"embed",SPAN:"span",A:"a",BODY:"body"};EBG.Adaptors.InjectionMethod=EBG.API.InjectionMethod;EBG.Adaptors.WindowProp={top:"top",left:"left",location:"location",menubar:"menubar",width:"width",height:"height"};EBG.Adaptors.MoreSupportedEvent={visibilitychange:1,mozvisibilitychange:1,msvisibilitychange:1,webkitvisibilitychange:1};EBG.Adaptors.StdWebAdaptor=function(){this._setEvents()};
EBG.Adaptors.StdWebAdaptor._walkUpIframes=function(a,b,c,d){c=c||window;var e=c.location.origin||c.location.protocol+"//"+c.location.host,f=c,g=!1,h="";d=!!d;try{if(c.location.ancestorOrigins)for(a&&a.call(f),h=0;h<c.location.ancestorOrigins.length;h++){0==h&&"null"==e&&(e=c.location.ancestorOrigins[0]);f=f.parent;g=!1;if(c.location.ancestorOrigins[h]==e)try{g=!0}catch(k){g=!1}if(g)a&&a.call(f);else{try{b&&b.call(f)}catch(k){}if(!d)break}}else for(a&&a.call(f);f!==f.parent;){f=f.parent;h=null;try{if(h=
f.location.origin||f.location.protocol+"//"+f.location.host,"null"==e||"about://"==e)e=h}catch(k){}if(h===e)a&&a.call(f);else{try{b&&b.call(f)}catch(k){}if(!d)break}}}catch(k){}};EBG.Adaptors.StdWebAdaptor._getTopAccessibleWindow=function(a){var b=window;EBG.Adaptors.StdWebAdaptor._walkUpIframes(function(){b=this},null,window,!("boolean"==typeof a?a:1));return b};EBG.Adaptors.StdWebAdaptor.onEnvEvent=function(){EBG.adaptor._handleEvent.apply(EBG.adaptor,arguments)};
EBG.Adaptors.StdWebAdaptor.prototype={_environmentEvents:{},_logicalEvents:{},_subscribedEvents:{},_subscribedEventsOnElement:[],_listener:null,_listenerBinding:null,_loadedModules:{},walkUpIframes:EBG.Adaptors.StdWebAdaptor._walkUpIframes,getTopAccessibleWindow:EBG.Adaptors.StdWebAdaptor._getTopAccessibleWindow,initInnerModules:function(a,b,c,d,e,f){this.browser||(this.browser=new EBG.Adaptors.Browser(a,b,c,d,e,f));this.flash||(this.flash=EBG.Adaptors.FlashDetector?new EBG.Adaptors.FlashDetector:
null)},registerSpecialBrowserEvents:function(){},loadModule:function(a,b,c,d){if(!a||!b||!b.modulesDir)return!1;var e=this;b=0==a.indexOf("http")?a:b.modulesDir+a+".js";a=a.toLowerCase();var f=new EBG.Events.Event(EBG.Events.EventNames.MODULE_LOAD);f.dispatcher=this;f.eventData={name:a};f.timing=EBG.Events.EventTiming.BEFORE;if(!EBG.eventMgr.dispatchEvent(f)){if(this._loadedModules[a])c&&this._loadedModules[a].callback.push({func:c,binding:d||window});else{this._loadedModules[a]={loading:!0,loaded:!1,
scriptWin:window,callback:c?[{func:c,binding:d||window}]:[]};var g=document.createElement("script");g.type="text/javascript";g.async=!0;g.readyState?g.onreadystatechange=function(){if("loaded"===g.readyState||"complete"===g.readyState)g.onreadystatechange=null,e._handleModuleLoaded(a)}:g.onload=function(){e._handleModuleLoaded(a)};g.src=b;(EBG.getBigScript().parentElement||document.getElementsByTagName("html")[0]).appendChild(g);EBG.scripts=EBG.scripts||[];EBG.scripts.push(g)}this._loadedModules[a].loaded&&
EBG.runTimed(this,function(){this._handleModuleLoaded(a)},[],0)}},_handleModuleLoaded:function(a){var b=this._loadedModules[a];b.loading=!1;b.loaded=!0;var c=new EBG.Events.Event(EBG.Events.EventNames.MODULE_LOAD);c.dispatcher=this;c.eventData={name:a};c.timing=EBG.Events.EventTiming.ONTIME;if(!EBG.eventMgr.dispatchEvent(c)){a=b.callback.length;for(var d=0;d<a;d++){var e=b.callback.shift();e.func.apply(e.binding,[b.scriptWin])}c.timing=EBG.Events.EventTiming.AFTER;EBG.eventMgr.dispatchEvent(c)}},
copy:function(a){for(var b in this._subscribedEvents)this._subscribedEvents.hasOwnProperty(b)&&(this._removeEventListener(window,this._environmentEvents[b].name,EBG.Adaptors.StdWebAdaptor.onEnvEvent),a.subscribeToEvent(b));for(b=0;b<this._subscribedEventsOnElement.length;b++){var c=this._subscribedEventsOnElement[b];if(c){var d=c.elementId,e=c.eventName;c=c.callback;var f=this.getElementById(d);f&&(this._removeEventListener(f,e,c),a.subscribeToEventOnElement(e,d,c))}}a.flash=this.flash||null},intMonitorExist:function(){return EBG.isPreview&&
(top.ebHandleFsCommandsPrev||top.ebHandleEventMonitor)&&!EBG.isTestMode},notifyIntMonitor:function(a){top.ebHandleFsCommandsPrev&&top.ebHandleFsCommandsPrev(a.command,a.args,a.objName,a.adId,a.elapsedTime);top.ebHandleEventMonitor&&top.ebHandleEventMonitor({name:a.command,args:a.args,objName:a.objName,adId:a.adId,elapsedTime:a.elapsedTime})},hasEvent:function(a){void("");a=!!this._environmentEvents[a];void("");EBG.log.endGroup();return a},generateElementId:function(a,
b){return EBG.format("eb{0}_{1}",a,b)},_getTags:function(a,b){void("");EBG.isGlobalDef("JSON")&&void("",JSON.stringify(a));var c="";if(b&&a.tagName==EBG.Adaptors.TagNames.SCRIPT&&a.text&&!a.attributes)void(""),b.push(a);else{c="";a.attributes&&(this._setObjDefaultAttributes(a),c=this._getObjAttributesStr(a));c=EBG.format("<{0} {1}>",a.tagName,c);a.innerHTML&&(c+=a.innerHTML);a.text&&(c+=a.text);a.params&&(c+=this._getObjParamsStr(a));
if(a.children)for(var d=0;d<a.children.length;d++)c+=this._getTags(a.children[d],b);c+=EBG.format("</{0}>",a.tagName)}void("");EBG.log.endGroup();return c},writeReportingIFrame:function(a,b,c){this.inject({tagName:EBG.Adaptors.TagNames.IFRAME,attributes:{id:a,src:b,style:{width:"0px",height:"0px"},frameborder:0}},EBG.Adaptors.InjectionMethod.APPEND,this.getElementById(c))},writeScript:function(a,b,c){try{this.inject({tagName:EBG.Adaptors.TagNames.SCRIPT,attributes:{id:a,
name:a,src:b}},EBG.Adaptors.InjectionMethod.APPEND,this.getElementById(c))}catch(d){void("")}},inject:function(a,b,c){if(c&&a){var d=c.ownerDocument,e=!1;if(EBG.isElementOrNode(a))d=a,e=!0;else if(d=d.createElement(a.tagName),a.attributes){this._setObjDefaultAttributes(a);for(var f in a.attributes)EBG.isObj(a.attributes[f])?this.setStyleToElem(d,a.attributes[f]):d.setAttribute(f,a.attributes[f])}switch(b){case EBG.Adaptors.InjectionMethod.INSERT_BEFORE:c.parentNode.insertBefore(d,
c);break;case EBG.Adaptors.InjectionMethod.INSERT_AFTER:c.nextSibling?c.parentNode.insertBefore(d,c.nextSibling):c.parentNode.appendChild(d);break;case EBG.Adaptors.InjectionMethod.FIRST_CHILD:c.firstChild?c.insertBefore(d,c.firstChild):c.appendChild(d);break;default:c.appendChild(d)}if(e)return d;e="";a.innerHTML&&(e=a.innerHTML);f=[];if(a.children)for(var g=0;g<a.children.length;g++){var h=a.children[g];e+=EBG.adaptor._getTags(h,f);h.meta&&1==h.meta.isChromePowerSaver&&this._resizeAfterPaint(h.attributes.id,
h.meta.origWidth,h.meta.origHeight)}e&&(d.innerHTML=e);a.text&&(d.text=a.text);for(g=0;g<f.length;g++)this.inject(f[g],b,c);return d}},addInlineDOM:function(a,b){this.inject(a,EBG.Adaptors.InjectionMethod.APPEND,this.getElementById(b))},setInnerHtml:function(a,b){a&&(a.innerHTML=b)},setStyleToElem:function(a,b,c){if(a&&"object"===typeof b)if(c)for(var d in b){if(b.hasOwnProperty(d))if(void 0===a.style[d]){c=["Webkit","Moz","ms","O"];for(var e=window.getComputedStyle?window.getComputedStyle(a,null):
a.style,f=0;f<c.length;f++){var g=c[f]+EBG.capitalize(d);if(void 0!==e[g]){a.style[g]=b[d];break}}}else a.style[d]=b[d]}else for(d in b)b.hasOwnProperty(d)&&(a.style[d]=b[d])},getStyleOfElem:function(a){if(a)return a.style},setListener:function(a,b){void("");void("");this._listener=a;this._listenerBinding=b;EBG.log.endGroup()},hasHiddenParent:function(a){if(!a)return!1;for(var b="none"==window.getComputedStyle(a).display;(a=a.parentElement)&&
!(b="none"==window.getComputedStyle(a).display););return b},subscribeToEvent:function(a,b){void("");void("");var c=this.getDisplayWin(),d=this.getPageWin();if(this.hasEvent(a))if(this._subscribedEvents[a])void("");else{var e=this._environmentEvents[a],f=e.inCurWin?window:this.getPageWin();b&&(f=f.document);this._logicalEvents[e.name].signInAllWindows&&this.serving&&
this.serving.detectServingMode(!0)===EBG.Adaptors.ServingMode.FRIENDLY_IFRAME&&c!==d?(this._addEventListener(d,e.name,EBG.Adaptors.StdWebAdaptor.onEnvEvent),this._addEventListener(c,e.name,EBG.Adaptors.StdWebAdaptor.onEnvEvent)):this._addEventListener(f,e.name,EBG.Adaptors.StdWebAdaptor.onEnvEvent);this._subscribedEvents[a]={}}else void("");EBG.log.endGroup()},subscribeToEventOnElement:function(a,b,c){void("");
void("");var d=!1,e="string"==typeof b?this.getElementById(b,this.getDisplayWin()):b;e||(void(""),d=!0);for(var f=this._subscribedEventsOnElement.length,g=0;g<f;g++)if(this._subscribedEventsOnElement[g]&&this._subscribedEventsOnElement[g].elementId==b&&this._subscribedEventsOnElement[g].eventName==a){void("",
a,b);d=!0;break}d||(this._addEventListener(e,a,c),this._subscribedEventsOnElement[f]={elementId:b,eventName:a,callback:c});EBG.log.endGroup()},unsubscribeFromEventOnElement:function(a,b,c){void("");void("");var d="string"==typeof b?this.getDisplayWin().document.getElementById(b):b;if(d){for(var e=this._subscribedEventsOnElement.length,f=-1,g=0;g<e;g++)if(this._subscribedEventsOnElement[g]&&this._subscribedEventsOnElement[g].elementId==
b&&this._subscribedEventsOnElement[g].eventName==a&&this._subscribedEventsOnElement[g].callback==c){void("");f=g;break}0<=g?(this._removeEventListener(d,a,c),this._subscribedEventsOnElement[f]=null):void("")}else void("");EBG.log.endGroup()},_addEventListener:function(a,b,c){"load"==
b&&this.isPageLoaded()?setTimeout(function(){c({type:"load"})},5):window.addEventListener?a.addEventListener(b,c,!1):window.attachEvent&&a.attachEvent("on"+b,c)},_removeEventListener:function(a,b,c){window.removeEventListener?a.removeEventListener(b,c,!1):window.detachEvent&&a.detachEvent("on"+b,c)},_checkIfPropExist:function(a,b){return a&&0<=a?EBG.format(", {0}={1}",b,a):""},openPage:function(a,b){void("");var c=EBG.WindowTarget.BLANK,d="";b&&(c=b.target,b.xPos||b.yPos||
b.width||b.height)&&(d="titlebar=1,resizable=1,scrollbars=1,directories=0,toolbar=1,status=1"+this._checkIfPropExist(b.yPos,EBG.Adaptors.WindowProp.top),d+=this._checkIfPropExist(b.xPos,EBG.Adaptors.WindowProp.left),d+=this._checkIfPropExist(b.showAddressBar,EBG.Adaptors.WindowProp.location),d+=this._checkIfPropExist(b.showMenuBar,EBG.Adaptors.WindowProp.menubar),d+=this._checkIfPropExist(b.width,EBG.Adaptors.WindowProp.width),d+=this._checkIfPropExist(b.height,EBG.Adaptors.WindowProp.height));void("",
a,c,d);b=window.open(a,c,d);!b&&(c=document.createElement("a"),d=((d=EBG&&EBG.getBigScript?EBG.getBigScript():null)?d.parentElement:null)||document.body)&&(c.setAttribute("id","SZMK_BRD_Anchortag"),c.setAttribute("href",a),c.setAttribute("target","_blank"),d.appendChild(c),c.click(),d.removeChild(c));EBG.log.endGroup();return b},reportBeacon:function(a){navigator&&EBG.isFunc(navigator.sendBeacon)&&navigator.sendBeacon(a)},reportToRemoteServerUsingImage:function(){var a=[];return function(b){void("");
void("");for(var c=0;c<a.length;c++)if(a[c]===b)return;this.ReportingImg=new Image;this.ReportingImg.src=b;a.push(b);EBG.log.endGroup()}}(),getDataFromRemoteServer:function(a,b,c,d,e){return EBG.getDataFromRemoteServer(a,b,c,d,e)},reportToRemoteServer:function(a,b,c,d){void("");if(a&&!EBG.isOfflineDemo){b=!!b;d=d||this.getRequestMethod(a);if("POST"==d){var e=a.split("?");a=e[0];e=e[1]}void("",
a,b);var f=!1;try{if(this.browser.isSafari()&&"POST"==d){var g=document.createElement("iframe");g.style.display="none";g.style.width="0px";g.style.height="0px";document.body.appendChild(g);g=g.contentWindow?g.contentWindow:g.contentDocument.document?g.contentDocument.document:g.contentDocument;g.document.open();g.document.write(this.getIframeFormScript(a,e));g.document.close();f=!0}else if(EBG._isXMLHttpRequestSupported()){var h=new XMLHttpRequest;h.open(d,a,b);h.setRequestHeader("Content-type","text/plain");
if(b||!b&&!this.browser.isFF())h.withCredentials=!0;try{h.send(e)}catch(l){if(b)throw l;}f=!0}else if(window.XDomainRequest&&!c&&b){var k=new XDomainRequest;k.open(d,a);k.send(e);f=!0}}catch(l){void(""),f=!1}f||this.reportToRemoteServerUsingImage(a);EBG.log.endGroup()}},getIframeFormScript:function(a,b){return'<script>var e=document.createElement("form"),t="'+b+'".split("&");e.setAttribute("method","post"),e.setAttribute("action","'+a+'");for(var i=0;i<t.length;++i){var a=t[i].substr(0,t[i].indexOf("=")),r=t[i].substr(t[i].indexOf("=")+1),m=document.createElement("input");m.setAttribute("type","hidden"),m.setAttribute("name",a),m.setAttribute("value",r),e.appendChild(m)}e.submit();\x3c/script>'},
getElementById:function(a,b){var c=null;b=b?b:this.getDisplayWin();if(EBG.isDefinedNotNull(a)&&(c=b.document.getElementById(a),!c)){b=this.findAllShadowRoots(b);for(var d=0;d<b.length&&!(c=b[d].querySelector("#"+a));d++);}return c},findAllShadowRoots:function(a){function b(d){d=d.querySelectorAll("*");for(var e=0;e<d.length;e++)if(d[e].shadowRoot){var f=d[e].shadowRoot;c.includes(f)||(c.push(f),b(f))}}var c=[];!this.browser.isIE()&&a&&a.document&&a.document.body&&"function"==typeof a.document.body.attachShadow&&
b(a.document);return c},supportsPageLoadEvents:function(){return!(this.browser.isOpera()&&14>this.browser.getVersion())&&!(this.browser.isIE()&&7>this.browser.getVersion())&&!EBG.isMRAID()},getHostName:function(a){return(a?a:this.getDisplayWin()).location.hostname},getDomain:function(a){return(a?a:this.getDisplayWin()).document.domain},getDisplayWin:function(){return window},getPageWin:function(){return window},getResolution:function(){var a=0;switch(window.screen.width){case 640:a=1;break;case 800:a=
2;break;case 1024:a=4;break;case 1152:a=8;break;case 1280:a=16;break;case 1600:a=32;break;case 1400:a=64;break;case 1920:a=128;break;case 1680:a=256;break;case 1366:a=512;break;case 1440:a=1024;break;case 1360:a=2048;break;case 768:a=4096;break;case 1093:a=8192;break;case 960:a=16384;break;case 2560:a=32768}return a},inInnerIframe:function(){return!1},inPlacementIframe:function(){return!1},_setEvents:function(){this.supportsPageLoadEvents?(this._setEvent(EBG.Events.EventNames.PAGE_LOAD,"load"),this._setEvent(EBG.Events.EventNames.PAGE_UNLOAD,
"unload",!0),this._setEvent(EBG.Events.EventNames.PAGE_BEFORE_UNLOAD,"beforeunload",!0),this._setEvent(EBG.Events.EventNames.PAGE_HIDE,"pagehide",!0)):void("");this._setEvent(EBG.Events.EventNames.PAGE_RESIZE,"resize");this._setEvent(EBG.Events.EventNames.SCREEN_ORIENTATION,"orientationchange");this._setEvent(EBG.Events.EventNames.MOUSE_MOVE,"mousemove",!1,["clientX","clientY","pageX","pageY","view"],!0)},_setEvent:function(a,b,c,d,e){this._environmentEvents[a]=
{name:b,inCurWin:c?c:!1};this._logicalEvents[b]={name:a,signInAllWindows:e};if(d)for(this._logicalEvents[b].attr=[],a=0;a<d.length;a++)this._logicalEvents[b].attr[a]=d[a]},isPageLoaded:function(){if(this._isPageLoaded)return!0;this._isPageLoaded=EBGInfra.isDefined(window.gEBMainWindow)&&EBGInfra.isDefined(gEBMainWindow.EBP)&&gEBMainWindow.EBP.isPageLoaded;!this._isPageLoaded&&this.getPageWin().document.readyState&&(this._isPageLoaded="complete"==this.getPageWin().document.readyState);void("",
EBG.adaptor._isPageLoaded);return EBG.adaptor._isPageLoaded},_handleEvent:function(a){void("");var b=this._logicalEvents[a.type].name;switch(b){case EBG.Events.EventNames.PAGE_LOAD:this._isPageLoaded=!0;break;case EBG.Events.EventNames.PAGE_RESIZE:EBG.adaptor.inInnerIframe()&&this.serving.rehidePlacementIframe();break;case EBG.Events.EventNames.SCREEN_ORIENTATION:this._handleOrientationEvent();EBG.log.endGroup();return;case EBG.Events.EventNames.DEVICE_MOTION:this._handleDeviceMotionEvent(a);
EBG.log.endGroup();return;case EBG.Events.EventNames.DEVICE_ORIENTATION:this._handleDeviceOrientationEvent(a);EBG.log.endGroup();return;case EBG.Events.EventNames.PAGE_BEFORE_UNLOAD:if(this.browser.isIE()&&this._isPageLoaded){EBG.log.endGroup();return}}if(b){var c=new EBG.Events.Event(b);EBGInfra.isDefinedNotNull(this._logicalEvents[a.type].attr)&&this._prepareLogicalEventData(c,a,this._logicalEvents[a.type].attr);EBG.isFunc(this._listener)&&(void(""),this._listener.call(this._listenerBinding,
c))}b==EBG.Events.EventNames.PAGE_UNLOAD&&this.dispose();EBG.log.endGroup()},dispose:function(){for(var a in this._subscribedEvents)if(this._subscribedEvents.hasOwnProperty(a)){var b=this._environmentEvents[a].name,c=this._environmentEvents[a].inCurWin?window:this.getPageWin();this._removeEventListener(c,b,EBG.Adaptors.StdWebAdaptor.onEnvEvent);this._logicalEvents[b].signInAllWindows&&(c=c==this.getPageWin()?this.getDisplayWin():this.getPageWin(),this._removeEventListener(c,b,EBG.Adaptors.StdWebAdaptor.onEnvEvent))}try{EBG.adaptor._removeEventListener(EBG.adaptor.getPageWin(),
"focus",EBG.adaptor._updateFocused),10>EBG.adaptor.browser.getVersion()&&EBG.adaptor._removeEventListener(EBG.adaptor.getPageWin().document,"focusin",EBG.adaptor._updateFocused)}catch(d){}this._removeEventListener(this.getDisplayWin(),"resize",EBG.adaptor.updateScrollBarWidth)},_handleOrientationEvent:function(){},_handleDeviceMotionEvent:function(){},_handleDeviceOrientationEvent:function(){},_prepareLogicalEventData:function(a,b,c){try{a.eventData={};for(var d=0;d<c.length;d++)a.eventData[c[d]]=
b[c[d]]}catch(e){void("")}},_getDefaultAttributes:function(a){var b={};switch(a.toLowerCase()){case EBG.Adaptors.TagNames.IFRAME:b={marginheight:"0px",marginwidth:"0px",frameborder:"0",scrolling:"no"},this.browser.isChrome()&&(b.allow="autoplay")}return b},_getDefaultStyle:function(a){var b={border:"0px",padding:"0px",margin:"0px"};switch(a.toLowerCase()){case EBG.Adaptors.TagNames.DIV:EBG.mergeObj({top:"0px",left:"0px",overflow:"visible",fontSize:"0px",
lineHeight:"0px",textAlign:"left"},b,!0)}return b},_setObjDefaultAttributes:function(a){var b=this._getDefaultAttributes(a.tagName);EBG.mergeObj(a.attributes,b,!0);b.style=this._getDefaultStyle(a.tagName);a.attributes.style&&EBG.mergeObj(a.attributes.style,b.style,!0);a.attributes=b},_getObjParamsStr:function(a){a=a.params;var b="",c;for(c in a)a.hasOwnProperty(c)&&(b+=EBG.format("<PARAM name='{0}' value='{1}'>",c,a[c]));return b},_getObjAttributesStr:function(a){a=a.attributes;var b="",c;for(c in a)if(a.hasOwnProperty(c)){var d=
a[c];if(EBG.isObj(d)){var e=d;d="";for(var f in e)if(e.hasOwnProperty(f)){var g=e[f];"textAlign"==f&&(f="text-align");d+=EBG.format("{0}:{1}; ",f,g)}}if(d)try{d=d.toString().replace(/"/ig,"&quot;"),b+=EBG.format(' {0}="{1}"',c,d)}catch(h){void("")}}return b},_resizeAfterPaint:function(a,b,c){b&&c&&EBG.runTimed(this,function(){void("");var d=this.getElementById(a);this.setElemStyle(d,"width",b);this.setElemStyle(d,"height",
c)},[],50)},handleEvent:function(a){this._handleEvent(a)},setElemStyle:function(a,b,c){a&&b&&c&&(a.style[b]=c)},getPositioningById:function(a,b,c){a=this.getElementById(a);return this.getPositioningByElement(a,b,c)},getPositioningByElement:function(a,b,c){a=a&&a.getBoundingClientRect?a.getBoundingClientRect():null;if(!a)return null;b=this.getScrollLeftTop(b,c);return{X:Math.floor(a.left)+b.X,Y:Math.floor(a.top)+b.Y}},getScrollLeftTop:function(a,b){a=this._getCurrentWindow(a,b);b=a.document;var c=
{X:{0:"XOffset",1:"Left"},Y:{0:"YOffset",1:"Top"}},d;for(d in c)c[d]=a["page"+c[d][0]]||(b.documentElement?b.documentElement["scroll"+c[d][1]]:b.documentElement["page"+c[d][0]])||(b.body?b.body["scroll"+c[d][1]]:0);return c},_getCurrentWindow:function(a,b){void("");try{var c=a?this.getDisplayWin():top;EBG.log.endGroup();return c}catch(d){void(""),EBG.log.endGroup()}},getRequestMethod:function(a){return this.browser.isIE()&&
6==this.browser.getVersion()||this.isInApp()?"GET":2E3<a.length?"POST":"GET"},removeElement:function(a){var b;"string"==EBG.typeOf(a)?b=this.getElementById(a):EBG.isElementOrNode(a)&&(b=a);b&&(b.parentNode.removeChild(b),b.removeNode&&b.removeNode(!0))},getBrowserLanguage:function(){var a="en-US";void("");"undefined"!==typeof navigator.language?a=navigator.language:"undefined"!==typeof navigator.userLanguage&&(a=navigator.userLanguage);void(""+
a);EBG.log.endGroup();return a},appendChildElement:function(a,b){a&&b&&this.getElementById(a).appendChild(b)},getMaxZIndex:function(a){if(this.browser.isIE()&&8>this.browser.getVersion())return 10001;var b=0;if(a){var c=this.getStyleOfElem(a);c&&c.zIndex&&(b=c.zIndex);for(var d in a.childNodes)d&&a.childNodes[d]&&(c=this.getMaxZIndex(a.childNodes[d]),b=b>c?b:c)}return b},isSafeFrame:function(){return!(!window.$sf||!$sf.ext)},isInApp:function(){return!!window.mraid},isSkype:function(){try{return!!(window.$WLXRmAd||
!window.location.ancestorOrigins&&window.parent&&window.parent.$WLXRmAd)}catch(a){return!1}},isAMP:function(){var a=!1;doIfAccessible=function(){a=a||!(!this.context||!this.context.reportRenderedEntityIdentifier)};this.walkUpIframes(doIfAccessible);return a},isReady:function(){return!0},hasLayoutViewport:function(){return document.documentElement.clientWidth>window.innerWidth},getBoundingClientRect:function(a,b){if(!a||a.id&&!this.getElementById(a.id))return null;b=b||{};var c=a.getBoundingClientRect();
c={width:Math.round(c.width),height:Math.round(c.height),top:Math.round(c.top),left:Math.round(c.left),bottom:Math.round(c.bottom),right:Math.round(c.right)};c.width=EBG.isNumber(c.width)?c.width:c.right-c.left;c.height=EBG.isNumber(c.height)?c.height:c.bottom-c.top;this.browser.isAndroid()&&this.hasLayoutViewport()&&(c.top-=window.pageYOffset,c.left-=window.pageXOffset,c.bottom-=window.pageYOffset,c.right-=window.pageXOffset);if(b.clip)try{var d=this.getComputedStyle(a).getPropertyValue("clip"),
e=/rect\((.*?)px(.*?)px(.*?)px(.*?)px\)/g.exec(d);if(e){for(d=1;d<e.length;d++)e[d]=parseFloat(e[d].replace(",",""));if(0!=e[1]+e[2]+e[3]+e[4]){var f={top:c.top+e[1],left:c.left+e[4]};f.right=Math.min(f.left+(e[2]-e[4]),c.right);f.bottom=Math.min(f.top+(e[3]-e[1]),c.bottom);f.width=f.right-f.left;f.height=f.bottom-f.top;c=f}}}catch(m){}if(b.relativeToTop){var g=0,h=0;e=this.getElementWindow(a);var k=1,l=1;EBG.adaptor.walkUpIframes(function(){if(this.frameElement){var m=this.frameElement.getBoundingClientRect();
k*=m.width/this.innerWidth;l*=m.height/this.innerHeight;g+=m.top;h+=m.left}},null,e);c.top+=g;c.left+=h;c.bottom+=g;c.right+=h;c.width*=k;c.height*=l;c.left*=k;c.right*=k;c.top*=l;c.bottom*=l}b.relativeToWindow&&(e=this.getElementWindow(a),a=e.pageXOffset||e.document.documentElement.scrollLeft,b=e.pageYOffset||e.document.documentElement.scrollTop,c.top+=b,c.left+=a,c.bottom+=b,c.right+=a);return c},getElementWindow:function(a){if(!a)return null;a=a.ownerDocument;return a.defaultView||a.parentWindow||
window},getComputedStyle:function(){return window.getComputedStyle?function(a,b){return(this.getElementWindow(a)||window).getComputedStyle(a,b)}:function(a,b){b={};b.el=a;b.getPropertyValue=function(c){var d=/(\-([a-z]){1})/g;"float"==c&&(c="styleFloat");d.test(c)&&(c=c.replace(d,function(e,f,g){return g.toUpperCase()}));return a.currentStyle[c]?a.currentStyle[c]:a.style[c]?a.style[c]:null};return b}}(),createImageElement:function(a){var b=document.createElement("img");if(!a)return b;if(a=a.attributes){var c=
a.style;c&&EBG.mergeObj({border:"0px",padding:"0px",margin:"0px"},c,!0);for(var d in a)if(a.hasOwnProperty(d))if("style"==d){var e="",f;for(f in c)c.hasOwnProperty(f)&&(e+=EBG.format("{0}:{1}; ",f,c[f]));b.style.cssText+=e}else b.setAttribute(d,a[d])}return b},isPageVisible:function(a){if(this.isAMP())var b=EBG.AMPUtil&&EBG.AMPUtil._AMPObj;else{var c=this._getVisibilityEventHidden();b=c&&document[c]?!1:!0;!b||!this.browser.isIE()||c&&"msHidden"!=c||this.serving.detectServingMode(!0)==EBG.Adaptors.ServingMode.IFRAME||
(b=b&&(this.focused||a))}return b},_getVisibilityEventHidden:function(){var a=null;"undefined"!==typeof document.hidden?a="hidden":"undefined"!==typeof document.mozHidden?a="mozHidden":"undefined"!==typeof document.msHidden?a="msHidden":"undefined"!==typeof document.webkitHidden&&(a="webkitHidden");return a},getObjKeys:function(a){a=a||{};if(Object.keys)return Object.keys(a);var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b},hasParentElement:function(a,b){a=EBG.isElementOrNode(a)?a:this.getElementById(a);
for(b=EBG.isElementOrNode(b)?b:this.getElementById(b);a&&a.parentElement;){if(a.parentElement===b)return!0;a=a.parentElement}return!1},headlessTests:function(a,b){function c(){if(!document.createElement("canvas").getContext)return"undefined";var g=document.createElement("canvas").getContext("webgl");if(g){var h=g.getExtension("WEBGL_debug_renderer_info"),k=g.getParameter(h.UNMASKED_VENDOR_WEBGL);g=g.getParameter(h.UNMASKED_RENDERER_WEBGL);return k+"|"+g}return"undefined"}function d(g){e=0===g.movementX&&
0===g.movementY?1:0}var e,f;(function(){navigator.permissions&&window.Notification?navigator.permissions.query({name:"notifications"}).then(function(g){f=~~("denied"===Notification.permission&&"prompt"===g.state?1:0)}).catch(function(g){f="undefined"}):f="undefined"})();(function(){var g=EBG.adaptor.getDisplayWin().document.getElementsByTagName("body")[0];g&&g.addEventListener&&null!==b&&(b==EBG.Adaptors.ServingMode.SCRIPT||b==EBG.Adaptors.ServingMode.FRIENDLY_IFRAME||b==EBG.Adaptors.ServingMode.TOPMOST_FRIENDLY_IFRAME)?
(g.addEventListener("mousemove",d),e=1):e="undefined"})();setTimeout(function(){var g=EBG.adaptor.getDisplayWin().document.getElementsByTagName("body")[0];g&&g.removeEventListener&&g.removeEventListener("mousemove",d);g=~~/headless/i.test(window.navigator.userAgent);var h=~~navigator.webdriver,k=EBG.adaptor.browser.isChrome()?~~!window.chrome:"undefined",l=EBG.adaptor.browser.isMobile()?"undefined":~~(navigator.plugins&&0===navigator.plugins.length);if(window.PluginArray&&navigator.plugins){var m=
PluginArray.prototype===navigator.plugins.__proto__;0<navigator.plugins.length&&(m&=Plugin.prototype===navigator.plugins[0].__proto__);m=m?0:1}else m="undefined";var p=0===(navigator.mimeTypes&&navigator.mimeTypes.length)?1:0;if(window.MimeTypeArray&&navigator.mimeTypes){var n=MimeTypeArray.prototype===navigator.mimeTypes.__proto__;0<navigator.mimeTypes.length&&(n&=MimeType.prototype===navigator.mimeTypes[0].__proto__);n=n?0:1}else n="undefined";var t=~~!navigator.language||navigator.languages&&0===
navigator.languages.length?1:0,u=c(),q=f;var r=EBG.adaptor.getDisplayWin();r=0===r.outerHeight&&0===r.outerWidth?1:0;var v=navigator.connection?navigator.connection.rtt:void 0;g={h_ua:g,h_webdrv:h,h_ischrm:k,h_noplgin:l,h_plgpro:m,h_nomime:p,h_mimepro:n,h_nolang:t,h_wgl:u,h_pd:q,h_ow:r,h_crtt:void 0===v?"undefined":0===v?1:0,h_mm:e};EBG.DataPipeManager&&EBG.dataPipeMgr.getPipe(a).send(EBG.DataProfile.DEBUG,g)},1E3)}};EBG.declareClass(EBG.Adaptors.StdWebAdaptor,null);
EBG.Adaptors.WebAdaptor=function(){void("");void("");EBG.callSuperConstructor(EBG.Adaptors.WebAdaptor,this);EBG.log.endGroup()};
EBG.Adaptors.WebAdaptor.prototype={_previousWidth:-1,_previousHeight:-1,_screenOrientation:"",scrollBarWidth:0,_isReady:!1,focused:!1,_loadedModules:[],_init:function(){this._sendReady()},isReady:function(){return this._isReady},isSDKDefined:function(){return!1},_addEventListener:function(a,b,c){EBG.callSuperFunction(EBG.Adaptors.WebAdaptor,this,"_addEventListener",[a,b,c]);this.browser.isChrome()&&this.serving.detectServingMode(!0)===EBG.Adaptors.ServingMode.FRIENDLY_IFRAME&&("beforeunload"==b||
"unload"==b)&&top.addEventListener(b,c,!1)},_removeEventListener:function(a,b,c){EBG.callSuperFunction(EBG.Adaptors.WebAdaptor,this,"_removeEventListener",[a,b,c]);this.browser.isChrome()&&this.serving.detectServingMode(!0)===EBG.Adaptors.ServingMode.FRIENDLY_IFRAME&&("beforeunload"==b||"unload"==b)&&top.removeEventListener(b,c,!1)},updateScrollBarWidth:function(){this.scrollBarWidth=this.getScrollerWidth()},initInnerModules:function(a,b,c,d,e,f){EBG.callSuperFunction(EBG.Adaptors.WebAdaptor,this,
"initInnerModules",[a,b,c,d,e,f]);this.updateScrollBarWidth();this.serving||(this.serving=EBG.Adaptors.ServingMgr?new EBG.Adaptors.ServingMgr:null);this._addEventListener(this.getDisplayWin(),"resize",this.updateScrollBarWidth.bind(this))},_pageResizeHandler:function(a){this._handleOrientationEvent()},_handleOrientationEvent:function(){this._checkOrientationEvent();EBG.runTimed(this,this._checkOrientationEvent,[],300)},_checkOrientationEvent:function(){if(this.browser.isMobile()&&this._isOrientationChange()){this._setScreenOrientation();
var a=new EBG.Events.Event(EBG.Events.EventNames.SCREEN_ORIENTATION);a.dispatcher=this;a.eventData={screenOrientation:this._screenOrientation};EBG.eventMgr.dispatchEvent(a)}},_handleDeviceMotionEvent:function(a){function b(d){var e={},f;for(f in d)e[f]=d[f];return e}var c=new EBG.Events.Event(EBG.Events.EventNames.DEVICE_MOTION);c.dispatcher=this;c.eventData={acceleration:b(a.acceleration),accelerationIncludingGravity:b(a.accelerationIncludingGravity),rotationRate:b(a.rotationRate),timeStamp:a.timeStamp};
EBG.eventMgr.dispatchEvent(c)},_handleDeviceOrientationEvent:function(a){var b=new EBG.Events.Event(EBG.Events.EventNames.DEVICE_ORIENTATION);b.dispatcher=this;b.eventData={absolute:a.absolute,alpha:a.alpha,beta:a.beta,gamma:a.gamma};EBG.eventMgr.dispatchEvent(b)},registerSpecialBrowserEvents:function(){this.browser.isIE()&&(this._addEventListener(this.getPageWin(),"focus",this._updateFocused),10>this.browser.getVersion()&&(this._addEventListener(this.getPageWin().document,"focusout",this._updateFocusOut),
this._addEventListener(this.getPageWin().document,"focusin",this._updateFocused)),this.focused=this.focused||"undefined"!=typeof gEBMainWindow&&"undefined"!=typeof gEBMainWindow.EBP&&gEBMainWindow.EBP.focused);EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_RESIZE,this._pageResizeHandler,this));this._updateInitialOrientationValues()},_updateInitialOrientationValues:function(){if(this.browser.isMobile()){var a=this.serving._getTopFriendlyIframe(this.getDisplayWin());
this._setScreenOrientation(a)}},_updateFocusOut:function(){EBG.runTimed(EBG.adaptor,function(){if(!(EBG.adaptor.getPageWin().screenTop>-2*EBG.adaptor.getPageWin().screen.availHeight)){var a=new EBG.Events.Event(EBG.Events.EventNames.PAGE_HIDDEN);a.dispatcher=EBG.adaptor;EBG.eventMgr.dispatchEvent(a)}},[],50)},_updateFocused:function(){EBG.adaptor.focused=!0;var a=new EBG.Events.Event(EBG.Events.EventNames.PAGE_VISIBLE);a.dispatcher=EBG.adaptor;EBG.eventMgr.dispatchEvent(a);try{EBG.adaptor._removeEventListener(EBG.adaptor.getPageWin(),
"focus",EBG.adaptor._updateFocused),10>EBG.adaptor.browser.getVersion()&&EBG.adaptor._removeEventListener(EBG.adaptor.getPageWin().document,"focusin",EBG.adaptor._updateFocused)}catch(b){}},_setEvents:function(){EBG.callSuperFunction(EBG.Adaptors.WebAdaptor,this,"_setEvents",[]);this._setEvent(EBG.Events.EventNames.PAGE_SCROLL,"scroll");this._setEvent(EBG.Events.EventNames.PAGE_FOCUS,"focus");this._setEvent(EBG.Events.EventNames.PAGE_BLUR,"blur");var a=this._getVisibilityEventName();"undefined"===
typeof document.addEventListener||"undefined"===typeof a?void(""):(this._setEvent(EBG.Events.EventNames.PAGE_HIDDEN,a,!0),this._setEvent(EBG.Events.EventNames.PAGE_VISIBLE,a,!0));this._setEvent(EBG.Events.EventNames.DEVICE_MOTION,"devicemotion",!1,["acceleration","accelerationIncludingGravity","rotationRate","timeStamp"],!0);this._setEvent(EBG.Events.EventNames.DEVICE_ORIENTATION,
"deviceorientation",!1,["absolute","alpha","beta","gamma"],!0)},initServingMode:function(a,b,c){void("");b=b?b:!1;switch(a){case EBG.Adaptors.ServingMode.INNER_IFRAME:this.serving.setServingMode(EBG.Adaptors.ServingMode.INNER_IFRAME);break;case -1:this.serving.detectServingMode(!1);break;case 0:(!EBG.isPreview||EBG.isPreview&&EBG.isTestMode)&&c==EBG.Adaptors.ServingMode.FRIENDLY_IFRAME&&!b?this.serving.setServingMode(EBG.Adaptors.ServingMode.FRIENDLY_IFRAME):EBG.isPreview||
c!=EBG.Adaptors.ServingMode.IFRAME||b?b&&this.serving.setServingMode(EBG.Adaptors.ServingMode.SCRIPT):this.serving.setServingMode(EBG.Adaptors.ServingMode.TOPMOST_FRIENDLY_IFRAME);break;case 1:case 2:this.serving.setServingMode(EBG.Adaptors.ServingMode.IFRAME)}EBG.log.endGroup()},addPlaceHolder:function(a){this.inInnerIframe()&&(this.inject(a,EBG.Adaptors.InjectionMethod.INSERT_BEFORE,this.serving.placementIframe),this.serving.hidePlacementIframe())},getPageWin:function(){return this.serving&&this.serving.pageWin?
this.serving.pageWin:window},getDisplayWin:function(){return this.serving&&this.serving.displayWin?this.serving.displayWin:window},_getDocument:function(){return this.getDisplayWin().document},inInnerIframe:function(){return this.serving&&this.serving.placementIframe},inPlacementIframe:function(){return this.serving&&this.serving.servingMode===EBG.Adaptors.ServingMode.IFRAME},setElemAttribute:function(a,b,c){a[b]=c},getClipTag:function(a,b,c,d){return EBG.format("rect({0}px {1}px {2}px {3}px)",a,
b,c,d)},clipIframeParent:function(){return!(!EBG.adaptor.browser.isChrome()&&!EBG.adaptor.browser.isSafari())},clip:function(a,b,c,d,e){void("");void("");a.style.clip=this.getClipTag(b,c,d,e);EBG.log.endGroup()},unclip:function(a){void("");void("");a.style.clip="rect(auto auto auto auto)";EBG.log.endGroup()},expand:function(a,b){void("");
void("",a.id,JSON.stringify(b));this.setElemStyle(a,"left",EBG.px(-b.x));this.setElemStyle(a,"top",EBG.px(-b.y));this.setElemStyle(a,"width",EBG.px(b.width));this.setElemStyle(a,"height",EBG.px(b.height));this.unclip(a);EBG.log.endGroup()},collapse:function(a,b,c){void("");void("",a.id,JSON.stringify(b),JSON.stringify(c));b=this.getClipParams(b,c);this.clip(a,b.top,b.right,
b.bottom,b.left);EBG.log.endGroup()},resize:function(a,b,c){this.setElemStyle(a,"width",EBG.px(b));this.setElemStyle(a,"height",EBG.px(c))},getClipParams:function(a,b){return{top:a.y,right:a.x+b.width,bottom:a.y+b.height,left:a.x}},getCurrentStyleAttr:function(a,b){void("");var c=null;try{c=a.currentStyle?a.currentStyle[b]:a.ownerDocument.defaultView.getComputedStyle(a,null).getPropertyValue(b)}catch(d){}!c&&"embed"==a.tagName.toLowerCase()&&a.parentNode&&
"object"==a.parentNode.tagName.toLowerCase()&&(a=a.parentNode,c=a.currentStyle?a.currentStyle[b]:a.ownerDocument.defaultView.getComputedStyle(a,null).getPropertyValue(b));EBG.log.endGroup();return c},getViewPortMetrics:function(a,b,c){return this.getWindowViewPortMetrics()},getWindowViewPortMetrics:function(a){void("");try{a=a?a:this.getDisplayWin();var b=a.document,c={Height:0,Width:0},d=b.documentMode;this.serving.servingMode==EBG.Adaptors.ServingMode.INNER_IFRAME&&
this.updateScrollBarWidth();if(!this.browser.isIE()||5!=d&&this.browser.isStrictType(b))if(this.browser.isIE()||window.ebO&&ebO.ffs&&ebO.ffs.CFF_MobCSSPixels&&this.canHaveLayoutViewport())c.Width=b.documentElement.clientWidth,c.Height=b.documentElement.clientHeight;else{if(c.Width=a.innerWidth,c.Height=a.innerHeight,"hidden"!=b.body.style.overflow){if(b.body.offsetWidth>c.Width||b.body.scrollWidth>c.Width||0<a.scrollMaxX)c.Height-=this.scrollBarWidth;var e=b.body.scrollHeight||b.documentElement.scrollHeight;
if(b.body.offsetHeight>c.Height||e>c.Height||0<a.scrollMaxY)c.Width-=this.scrollBarWidth}}else c.Width=b.body.clientWidth,c.Height=b.body.clientHeight;EBG.log.endGroup()}catch(f){void(""),EBG.log.endGroup()}return c},getPageMetrics:function(a){void("");try{var b=a?a.document:this.getDisplayWin().document;a={Height:0,Width:0};a.Height=Math.max(b.body.scrollHeight,b.documentElement.scrollHeight,b.body.offsetHeight,b.documentElement.offsetHeight,
b.body.clientHeight,b.documentElement.clientHeight);a.Width=Math.max(b.body.scrollWidth,b.documentElement.scrollWidth,b.body.offsetWidth,b.documentElement.offsetWidth,b.body.clientWidth,b.documentElement.clientWidth);EBG.log.endGroup();return a}catch(c){void("")}EBG.log.endGroup()},saveInitialScrollBarState:function(a){a.EBG=a.EBG||{};var b=a.document;a.EBG._scrollBarsInitialState=null!=a.EBG._scrollBarsInitialState?a.EBG._scrollBarsInitialState:b.body.style.overflow},
showScrollBars:function(a){a=a?a:this.getDisplayWin();this.saveInitialScrollBarState(a);a.document.body.style.overflow="auto"},hideScrollBars:function(a){a=a?a:this.getDisplayWin();this.saveInitialScrollBarState(a);a.document.body.style.overflow="hidden"},restoreScrollBarsState:function(a){a=a?a:this.getDisplayWin();var b=a.document;null!=a.EBG._scrollBarsInitialState&&(b.body.style.overflow=a.EBG._scrollBarsInitialState)},_getCurrentWindow:function(a,b){void("");
try{this.serving.servingMode==EBG.Adaptors.ServingMode.INNER_IFRAME?a=!0:b==EBG.Adaptors.ServingMode.IFRAME&&this.browser.isFF()&&(a=!0);var c=a?this.getDisplayWin():top;EBG.log.endGroup();return c}catch(d){void(""),EBG.log.endGroup()}},getPositioningById:function(a,b,c,d){b=this.serving.servingMode==EBG.Adaptors.ServingMode.INNER_IFRAME?!0:b;a=this.getElementById(a);return this.getPositioningByElement(a,b,c,d)},getIframePosition:function(){var a={X:0,Y:0};
EBG.adaptor.serving.detectServingMode(!0)==EBG.Adaptors.ServingMode.IFRAME&&"undefined"!=typeof this.getDisplayWin().mozInnerScreenX&&(a.X=this.getDisplayWin().mozInnerScreenX,a.Y=this.getDisplayWin().mozInnerScreenY);return a},getPositioningByElement:function(a,b,c,d){if(!a)return null;b=this.serving.servingMode==EBG.Adaptors.ServingMode.INNER_IFRAME||EBG.isPreview?!0:b;var e=a.getBoundingClientRect?a.getBoundingClientRect():null;if(!e)return null;a=Math.round(e.left);e=Math.round(e.top);if(!EBG.isDefined(d)||
!d)if(b=this.getScrollLeftTop(b,c))a+=b.X,e+=b.Y;return{X:a,Y:e}},getScrollLeftTop:function(a,b){a=b==EBG.Adaptors.ServingMode.IFRAME?!0:a;return EBG.callSuperFunction(EBG.Adaptors.WebAdaptor,this,"getScrollLeftTop",[a,b])},getBodyPositioning:function(a){var b=this.getDisplayWin(),c=this.isCurrWin();(a=EBG.adaptor.getPositioningByElement(b.document.body,!c,a))||(a={X:0,Y:0});return a},isCurrWin:function(){return this.getDisplayWin()===this.getPageWin()},getScrollerWidth:function(){void("");
try{if(this.browser._platform==this.browser._platformTypes.IPAD||this.browser._platform==this.browser._platformTypes.IPHONE)return EBG.log.endGroup(),0;var a=this.getDisplayWin().document,b=null,c=null,d=0,e=0,f=0;b=a.createElement("div");b.style.position="absolute";b.style.top="-1000px";b.style.left="-1000px";b.style.width="100px";b.style.height="50px";b.style.overflow="auto";c=a.createElement("div");c.style.width="100%";c.style.height="200px";b.appendChild(c);a.body.appendChild(b);e=c.offsetWidth;
a.body.removeChild(a.body.lastChild);b.style.overflow="hidden";a.body.appendChild(b);d=c.offsetWidth;a.body.removeChild(a.body.lastChild);f=d-e?d-e:0;EBG.log.endGroup();return f}catch(g){void(""),EBG.log.endGroup()}},canHaveLayoutViewport:function(){var a=EBG.adaptor.getDisplayWin().document.head.getElementsByTagName("meta"),b,c=EBG.adaptor.browser.isMobile();if(c){for(var d=0;d<a.length;d++)"viewport"===a[d].name&&(b=a[d]);if(b)for(a=b.content.split(","),d=
0;d<a.length;d++){b=a[d].split("=")[0].trim&&a[d].split("=")[0].trim();var e=a[d].split("=")[1]&&a[d].split("=")[1].trim&&a[d].split("=")[1].trim();"user-scalable"==b&&"0"==e&&(c=!1)}}return c},_handleEvent:function(a){void("");var b=this._logicalEvents[a.type].name;switch(b){case EBG.Events.EventNames.PAGE_HIDDEN:case EBG.Events.EventNames.PAGE_VISIBLE:b=this.isPageVisible()?EBG.Events.EventNames.PAGE_VISIBLE:EBG.Events.EventNames.PAGE_HIDDEN;break;default:EBG.callSuperFunction(EBG.Adaptors.WebAdaptor,
this,"_handleEvent",[a]);EBG.log.endGroup();return}if(b){var c=new EBG.Events.Event(b);EBGInfra.isDefinedNotNull(this._logicalEvents[a.type].attr)&&this._prepareLogicalEventData(c,this._logicalEvents[a.type].eventData,this._logicalEvents[a.type].attr);EBG.isFunc(this._listener)&&(void(""),this._listener.call(this._listenerBinding,c))}b==EBG.Events.EventNames.PAGE_UNLOAD&&this.dispose();EBG.log.endGroup()},_isOrientationChange:function(){var a=EBG.adaptor.serving._getTopFriendlyIframe(EBG.adaptor.getDisplayWin());
return a.innerWidth!==this._previousWidth||a.innerHeight!=this._previousHeight?this._screenOrientation!==(a.innerHeight>=a.innerWidth?EBG.Events.EventNames.PORTRAIT:EBG.Events.EventNames.LANDSCAPE):!1},_setScreenOrientation:function(a){var b=window.innerWidth,c=window.innerHeight;try{var d=a?a:EBG.adaptor.serving._getTopFriendlyIframe(EBG.adaptor.getDisplayWin());b=d.innerWidth;c=d.innerHeight}catch(e){}this._screenOrientation=c>=b?EBG.Events.EventNames.PORTRAIT:EBG.Events.EventNames.LANDSCAPE;this._previousWidth=
b;this._previousHeight=c},getScreenOrientation:function(a){("boolean"==typeof a?a:1)&&this._setScreenOrientation();return this._screenOrientation},_sendReady:function(){this._isReady=!0;var a=new EBG.Events.Event(EBG.EBMessage.ADAPTOR_READY);a.dispatcher=this;a.timing=EBG.Events.EventTiming.BEFORE;EBG.eventMgr.dispatchEvent(a)||(a.timing=EBG.Events.EventTiming.ONTIME,EBG.eventMgr.dispatchEvent(a))},getMouseCoordinates:function(a){var b={mouseX:0,mouseY:0};a&&(EBG.adaptor.browser.isIE()?(b.mouseX=
a.clientX?a.clientX:0,b.mouseY=a.clientY?a.clientY:0):(b.mouseX=a.pageX?a.pageX:0,b.mouseY=a.pageY?a.pageY:0),b.view=a.view);return b},_getVisibilityEventName:function(){var a=null;this.isAMP()&&EBG.AMPUtil&&"undefined"!==typeof EBG.AMPUtil._AMPObj?a="amp:visibilitychange":"undefined"!==typeof document.hidden?a="visibilitychange":"undefined"!==typeof document.mozHidden?a="mozvisibilitychange":"undefined"!==typeof document.msHidden?a="msvisibilitychange":"undefined"!==typeof document.webkitHidden&&
(a="webkitvisibilitychange");return a}};EBG.declareClass(EBG.Adaptors.WebAdaptor,EBG.Adaptors.StdWebAdaptor);EBG.Adaptors=EBG.Adaptors||{};EBG.Adaptors.Browser=function(a,b,c,d,e,f){this.set(a,b,c,d,e,f)};
EBG.Adaptors.Browser.prototype={_platform:0,_browserType:0,_browserVer:0,_browserCode:0,_deviceType:0,_browserTypes:EBG.API.BrowserTypes,_platformTypes:EBG.API.PlatformTypes,_deviceTypes:EBG.API.DeviceTypes,_browserInApp:0,set:function(a,b,c,d,e,f){a=a?a:this._platformTypes.NON_SUPPORTED;b=b?b:this._browserTypes.NON_SUPPORTED;c=c?c:0;d=d?d:0;e=e?e:this._browserTypes.NON_SUPPORTED;f=f?f:0;void("",this._platformTypes);this._platform=a;void("",
this._browserTypes);this._browserType=b;void("");this._browserVer=c;void("");this._browserCode=e;void("");this._deviceType=d;void("");this._browserInApp=f},getVersion:function(){return this._browserVer},getDocumentMode:function(){return window.document.documentMode},isIE:function(){return this._browserType==this._browserTypes.IE||this._browserType==this._browserTypes.AOL},
isEdge:function(){return this._browserType==this._browserTypes.EDGE},isStrictType:function(a){var b=!1;this.isIE()&&(b=a?"CSS1Compat"==a.compatMode:"CSS1Compat"==document.compatMode);return b},isFF:function(){return this._browserType==this._browserTypes.FF},isSafari:function(){return this._browserType==this._browserTypes.SAFARI},isChrome:function(){return this._browserType==this._browserTypes.CHROME},isOpera:function(){return this._browserType==this._browserTypes.OPERA},isMac:function(){return this._platform==
this._platformTypes.MAC||this._platform==this._platformTypes.MAC_NEW||this._platform==this._platformTypes.MAC_YOSEMITE||this._platform==this._platformTypes.Mac_El_Capitan||this._platform==this._platformTypes.Mac_Sierra},isInApp:function(){var a=this.getEnvironment();return-1!=[2==this._browserInApp,1==this._browserInApp,a===EBG.WebEnvironment.ANDROID_WEB_VIEW,a===EBG.WebEnvironment.IOS_WEB_VIEW].indexOf(!0)},inAppEnv:function(){var a=this.getEnvironment();return[2==this._browserInApp,1==this._browserInApp,
a===EBG.WebEnvironment.ANDROID_WEB_VIEW,a===EBG.WebEnvironment.IOS_WEB_VIEW].indexOf(!0)},isMobile:function(){var a=!1;if(this._deviceType==this._deviceTypes.MOBILE||this._deviceType==this._deviceTypes.TABLET)a=!0;return a},isiOS:function(){for(var a in this._platformTypes)if(this._platformTypes[a]==this._platform&&a.match(/iphone|ipad|ipod/i))return!0;return!1},isiPad:function(){for(var a in this._platformTypes)if(this._platformTypes[a]==this._platform&&a.match(/ipad/i))return!0;return!1},isAndroid:function(){for(var a in this._platformTypes)if(this._platformTypes[a]==
this._platform&&0<=a.indexOf("ANDROID"))return!0;return!1},isAndroidNative:function(){return this.isAndroid()&&this.isSafari()},isThirdPartyAllowed:function(){return!this.isSafari()||this.isMobile()},isSpotify:function(){var a=navigator.userAgent||navigator.vendor||window.opera||"";return this.isChrome()&&a.match(/spotify/i)},getEnvironment:function(){var a=navigator.userAgent||navigator.vendor||window.opera;if(EBG.adaptor.browser.isiOS()){var b=window.navigator&&window.navigator.standalone;return a.match(/safari/i)||
b?EBG.WebEnvironment.IOS_MOBILE_BROWSER:EBG.WebEnvironment.IOS_WEB_VIEW}return EBG.adaptor.browser.isAndroid()?a.match(/wv/)||a.match(/version/i)?EBG.WebEnvironment.ANDROID_WEB_VIEW:EBG.adaptor.browser.isChrome()||EBG.adaptor.browser.isFF()?EBG.WebEnvironment.ANDROID_MOBILE_BROWESR:EBG.WebEnvironment.ANDROID_UNKNOWN:EBG.adaptor.browser.isMobile()?EBG.adaptor.browser.isIE()?EBG.WebEnvironment.OTHER_MOBILE_BROWSER:EBG.WebEnvironment.UNKNOWN:EBG.WebEnvironment.BROWSER}};
EBG.Adaptors.ServingMode={SCRIPT:"SCRIPT",IFRAME:"IFRAME",FRIENDLY_IFRAME:"FRIENDLY_IFRAME",INNER_IFRAME:"INNER_IFRAME",TOPMOST_FRIENDLY_IFRAME:"TOPMOST_FRIENDLY_IFRAME"};EBG.Adaptors.ServingMgr=function(){this.displayWin=window;this.servingMode=EBG.Adaptors.ServingMode.SCRIPT};
EBG.Adaptors.ServingMgr.prototype={displayWin:null,pageWin:null,placementIframe:null,_placementIframeAttr:null,servingMode:null,ebO:null,setDisplayWin:function(a){void("");this.displayWin=a},setPageWin:function(){var a=this.detectServingMode(!0);switch(this.servingMode){case EBG.Adaptors.ServingMode.SCRIPT:switch(a){case EBG.Adaptors.ServingMode.SCRIPT:this.pageWin=window;break;case EBG.Adaptors.ServingMode.FRIENDLY_IFRAME:this.pageWin=top;break;case EBG.Adaptors.ServingMode.IFRAME:case EBG.Adaptors.ServingMode.INNER_IFRAME:this.pageWin=
this.displayWin}break;case EBG.Adaptors.ServingMode.FRIENDLY_IFRAME:this.pageWin=top;break;case EBG.Adaptors.ServingMode.IFRAME:case EBG.Adaptors.ServingMode.TOPMOST_FRIENDLY_IFRAME:case EBG.Adaptors.ServingMode.INNER_IFRAME:this.pageWin=this.displayWin}},setServingMode:function(a){void("");void("");this.servingMode=a;var b=null;switch(a){case EBG.Adaptors.ServingMode.TOPMOST_FRIENDLY_IFRAME:b=this._getTopFriendlyIframe();
break;case EBG.Adaptors.ServingMode.INNER_IFRAME:case EBG.Adaptors.ServingMode.FRIENDLY_IFRAME:b=top;break;case EBG.Adaptors.ServingMode.SCRIPT:this.setDisplayWin(window);this.setPageWin();return}EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_UNLOAD,this._restorePlacementIframe,this));b&&(EBG.isGlobalDef("gstrEbDisplayPos")&&(a="parent."+gstrEbDisplayPos,void(""),b=eval(a)),this.setDisplayWin(b),
this.setPageWin(),b!==window&&this._findPlacementIframe());EBG.log.endGroup()},detectServingMode:function(a){void("");try{var b=EBG.Adaptors.ServingMode.SCRIPT,c=window;EBG.adaptor.walkUpIframes(function(){c!=this&&(b=EBG.Adaptors.ServingMode.FRIENDLY_IFRAME)},function(){b=EBG.Adaptors.ServingMode.IFRAME});if(a)return EBG.log.endGroup(),b;this.setServingMode(b)}catch(d){void("")}EBG.log.endGroup()},detectServingEnvironment:function(a){a=
EBG.isDefinedNotNull(a)?a:this.detectServingMode(!0);this.servingMode==EBG.Adaptors.ServingMode.INNER_IFRAME&&(a=EBG.Adaptors.ServingMode.INNER_IFRAME);var b=this._getTopFriendlyIframe(window);window!=b&&b!=top&&(a=EBG.Adaptors.ServingMode.TOPMOST_FRIENDLY_IFRAME);return a},_getTopFriendlyIframe:function(a){a=a?a:window;if(EBG.adaptor.isSafeFrame())return a;var b;EBG.adaptor.walkUpIframes(function(){b=this},null,a);return b},_restorePlacementIframe:function(){void("");
this._placementIframeAttr&&(EBGInfra.mergeObj(this._placementIframeAttr,this.placementIframe,!0),EBGInfra.mergeObj(this._placementIframeAttr.style,this.placementIframe.style,!0));EBG.log.endGroup()},hidePlacementIframe:function(){void("");var a=this.placementIframe;this._placementIframeAttr||(this._placementIframeAttr={width:a.width,height:a.height},this._placementIframeAttr.style={width:EBG.adaptor.getCurrentStyleAttr(a,"width"),height:EBG.adaptor.getCurrentStyleAttr(a,
"height"),visibility:EBG.adaptor.getCurrentStyleAttr(a,"visibility"),border:EBG.adaptor.getCurrentStyleAttr(a,"border")});a.style.visibility="hidden";a.width=a.height=0;a.style.width=a.style.height=a.style.border="0px";EBG.log.endGroup()},rehidePlacementIframe:function(){this._placementIframeAttr&&this.hidePlacementIframe()},_findPlacementIframe:function(){void("");var a=function(){if(this==b){c=!0;var f=b.document.getElementsByTagName(EBG.Adaptors.TagNames.IFRAME);
if("function"==typeof Array.from){f=Array.from(f);for(var g=EBG.adaptor.findAllShadowRoots(this),h,k=0;k<g.length;k++)h=Array.from(g[k].querySelectorAll(EBG.Adaptors.TagNames.IFRAME)),f=f.concat(h)}for(k=0;k<f.length;k++)f[k].contentWindow==d&&(e=f[k])}else c||(d=this)},b=this.displayWin,c=!1,d=window,e=null;EBG.Adaptors.StdWebAdaptor._walkUpIframes(a,a,d,!0);this.placementIframe=e;void("");EBG.log.endGroup()}};
EBG.Adaptors.Wallpaper=function(){void("");void("");this._currentBg=this._getCurrentBackground();EBG.log.endGroup()};
EBG.Adaptors.Wallpaper.prototype={SetBackgroundImage:function(a){void("");var b=EBG.adaptor.getPageWin().document;if(a.imgSrc){void("");a.color||(a.color=this._currentBg.color?this._currentBg.color:"transparent");var c=a.color;c+=" url('"+a.imgSrc+"') ";"repeat"==a.tiling.toLowerCase()||"repeat-x"==a.tiling.toLowerCase()||"repeat-y"==a.tiling.toLowerCase()||"no-repeat"==a.tiling.toLowerCase()?a.tiling=a.tiling.toLowerCase():
a.tiling=this._currentBg.tiling?this._currentBg.tiling:"no-repeat";c+=" "+a.tiling;c=a.scrolling?c+" scroll":c+" fixed";var d="";"center"==a.positionX.toLowerCase()||"right"==a.positionX.toLowerCase()||"left"==a.positionX.toLowerCase()?d=a.positionX.toLowerCase():a.positionX="";"center"==a.positionY.toLowerCase()||"top"==a.positionY.toLowerCase()||"bottom"==a.positionY.toLowerCase()?d+=" "+a.positionY.toLowerCase():a.positionY="";a.positionX&&a.positionY||(d=b.body.style.backgroundPosition?b.body.style.backgroundPosition:
"center top");c+=" "+d;void("");b.body.style.background=c}EBG.log.endGroup()},RemoveBackgroundImage:function(){this._currentBg.imgSrc?this.SetBackgroundImage(this._currentBg):EBG.adaptor.getPageWin().document.body.style.background=""},_getCurrentBackground:function(){var a=new EBG.Adaptors.Wallpaper.BgData,b=EBG.adaptor.getPageWin().document.body;""!=b.style.backgroundImage&&(a.imgSrc=b.style.backgroundImage.substr(4,b.style.backgroundImage.length-5));""!=b.style.backgroundColor&&
(a.color=b.style.backgroundColor);""!=b.style.backgroundRepeat&&(a.tiling=b.style.backgroundRepeat);""!=b.style.backgroundAttachment&&(a.scrolling="fixed"==b.style.backgroundAttachment?!1:!0);""!=b.style.backgroundPosition&&(posArr=b.style.backgroundPosition.split(" "),a.positionX=posArr[0],a.positionY=posArr[1]);return a}};EBG.Adaptors.Wallpaper.BgData=function(){};EBG.Adaptors.Wallpaper.BgData.prototype={color:"",imgSrc:"",tiling:"",positionX:"",positionY:"",scrolling:!1,contentWidth:null};EBG.declareNamespace("Events");
EBG.Events.EventTiming={BEFORE:"BEFORE",ONTIME:"ONTIME",AFTER:"AFTER",ONTIME_AND_AFTER:"ONTIME_AND_AFTER"};EBG.Events.EventNames=EBG.API.EventNames;EBG.Events.EbEventNames=EBG.API.EbEventNames;EBG.Events.EventSubscription=function(a,b,c){this.eventName=a;this.callback=b;this.callbackBinding=c?c:null};
EBG.Events.EventSubscription.prototype={dispatcherFilters:null,timing:EBG.Events.EventTiming.ONTIME,isElementEvent:!1,elementId:"",isDocumentEvent:!1,isValid:function(){return EBG.isFunc(this.callback)&&(!this.callbackBinding||EBG.isObj(this.callbackBinding))},toString:function(){return EBG.format("EventSubscription: eventName={0}, timing={1}, callback={2}, callbackBinding={3}, dispatcherFilters={4}",this.eventName,this.timing,EBG.typeOf(this.callback),EBG.typeOf(this.callbackBinding),EBG.typeOf(this.dispatcherFilters))}};
EBG.declareClass(EBG.Events.EventSubscription,null);EBG.Events.Event=function(a){this.name=a;this.creationTime=+new Date};EBG.Events.Event.prototype={dispatcher:null,eventData:null,timing:null,toString:function(){return EBG.format("Event: name={0}, creationTime={1}, dispatcher={2}, eventData={3}",this.name,this.creationTime,EBG.typeOf(this.dispatcher),EBG.typeOf(this.eventData))}};EBG.declareClass(EBG.Events.Event,null);
EBG.Events.EventManager=function(){if(EBG.Adaptors&&EBG.Adaptors.StdWebAdaptor)EBG.Adaptors.StdWebAdaptor._walkUpIframes(function(){this.EBG&&this.EBG.eventMgr&&this.EBG.eventMgr._scriptWin&&!this.EBG.eventMgr._scriptWin.closed&&(b=this.EBG.eventMgr)},null,window,!0);else try{var a=EBG.getTopAccessibleWindow(!1);if(a&&a.EBG&&a.EBG.eventMgr)var b=a.EBG.eventMgr}catch(c){}if(b)return b;this._subscriptions={};this._dispatchedEvents={};this._trackedEvents[EBG.Events.EventNames.ADD_CREATIVES]=!0};
EBG.Events.EventManager.prototype={_subscriptions:{},_dispatchedEvents:{},_trackedEvents:{},_scriptWin:window,subscribeToEvent:function(a){void("");void("");if(a.isValid())if(a.isElementEvent)EBG.adaptor&&(void(""),EBG.adaptor.subscribeToEventOnElement(a.eventName,a.elementId,a.callback));else{var b=this._subscriptions[a.eventName]=this._subscriptions[a.eventName]||
{},c;for(c in EBG.Events.EventTiming)EBG.Events.EventTiming.hasOwnProperty(c)&&(b[c]=b[c]||[]);-1==this._getSubscriptionId(a,b[a.timing])?(b[a.timing].push(a),void(""),EBG.adaptor&&EBG.adaptor.hasEvent(a.eventName)&&EBG.adaptor.subscribeToEvent(a.eventName,a.isDocumentEvent)):void("");EBG.log.endGroup()}else void(""),EBG.log.endGroup()},
unsubscribeFromEvent:function(a){void("");void("");if(a&&a.isValid())if(a.isElementEvent)EBG.adaptor&&(void(""),EBG.adaptor.unsubscribeFromEventOnElement(a.eventName,a.elementId,a.callback));else{if(this._subscriptions[a.eventName]&&this._subscriptions[a.eventName][a.timing]){var b=this._subscriptions[a.eventName][a.timing];a=this._getSubscriptionId(a,
b);-1!=a&&(void(""),b[a]=null)}EBG.log.endGroup()}else void(""),EBG.log.endGroup()},dispatchEvent:function(a){void("");void("");switch(a.timing){case EBG.Events.EventTiming.BEFORE:case EBG.Events.EventTiming.ONTIME:case EBG.Events.EventTiming.AFTER:void("",
a.name,a.timing);var b=this._dispatchEventByTiming(a,a.timing);break;case EBG.Events.EventTiming.ONTIME_AND_AFTER:b=(b=this._dispatchEventByTiming(a,EBG.Events.EventTiming.ONTIME))||this._dispatchEventByTiming(a,EBG.Events.EventTiming.AFTER);break;default:b=(b=(b=this._dispatchEventByTiming(a,EBG.Events.EventTiming.BEFORE))||this._dispatchEventByTiming(a,EBG.Events.EventTiming.ONTIME))||this._dispatchEventByTiming(a,EBG.Events.EventTiming.AFTER)}EBG.log.endGroup();return b},attachToAdaptor:function(){EBG.adaptor.setListener(this.dispatchEvent,
this)},_trackEvent:function(a){a&&this._trackedEvents[a.name]&&(this._dispatchedEvents[a.name]||(this._dispatchedEvents[a.name]={}),this._dispatchedEvents[a.name][a.timing]||(this._dispatchedEvents[a.name][a.timing]=[]),10>this._dispatchedEvents[a.name][a.timing].length&&this._dispatchedEvents[a.name][a.timing].push(a))},getDispatchedEvents:function(a){return this._dispatchedEvents[a.name]?this._dispatchedEvents[a.name][a.eventTiming]:null},_dispatchEventByTiming:function(a,b){void("");
void("",a,b.toString());this._trackEvent(a);var c=this._subscriptions[a.name];if(!c)return void(""),EBG.log.endGroup(),!1;b=c[b];c=!1;for(var d=0;d<b.length;d++){var e=b[d];if(e){var f=this._dispatchEventToSubscription(a,e);if(EBG.isBool(f)&&!f){void("");c=!0;break}}}EBG.log.endGroup();return c},_dispatchEventToSubscription:function(a,b){void("");
void("");try{var c=b.dispatcherFilters;if(EBG.isObj(c))for(var d in c)if(c.hasOwnProperty(d)){var e=c[d],f=!0,g=d.split("."),h=a.dispatcher;if(h)for(var k=0;k<g.length;k++){h=h[g[k]];var l=k==g.length-1;if(!h||l&&h!==e){f=!1;break}}if(!f)return void(""),EBG.log.endGroup(),null}}catch(m){}c=null;d=b.callback;if(EBG.isFunc(d)){e=[a];try{c=d.apply(b.callbackBinding,e),void("",
a.name,c)}catch(m){void("")}}else void("");EBG.log.endGroup();return c},_getSubscriptionId:function(a,b){for(var c=0;c<b.length;c++)if(b[c]&&b[c].callback===a.callback&&b[c].callbackBinding===a.callbackBinding&&b[c].isDocumentEvent===a.isDocumentEvent&&this._compareFilters(b[c].dispatcherFilters,a.dispatcherFilters))return void("",
c),c;return-1},_compareFilters:function(a,b){if(!EBG.isObj(a))return EBG.isObj(b)?!1:!0;if(!EBG.isObj(b))return!1;for(var c in a)if(a.hasOwnProperty(c))if(b.hasOwnProperty(c)){if(a[c]!==b[c])return!1}else return!1;for(c in b)if(b.hasOwnProperty(c)&&!a.hasOwnProperty(c))return!1;return!0}};EBG.declareClass(EBG.Events.EventManager,null);EBG.eventMgr=EBG.eventMgr||new EBG.Events.EventManager;EBG.declareNamespace("Interactions");
EBG.Interactions.SystemInts={CLICK:"_eyeblaster",AD_DURATION:"ebAdDuration",REPLAY:"ebReplay",CLOSE:"ebClose",CLOSE_REM:"ebRemClose",DEFAULT_CLICK:"ebDefaultClick",USER_INTERACTION:"ebUserInteraction",UNIQUE_VIDEO_STARTED:"ebUniqueVideoStarted",DWELL_TIME:"ebDwellTime",DWELL_UNIQUE:"ebUniqueDwell",RICH_FLASH_PLAYED:"ebRichFlashPlayed",INT_DURATION:"ebIntDuration",VISIBILITY_RECORDABLE:"VsR",VISIBILITY_AGENCY_RECORDABLE:"VsRAg",VISIBILITY_ADVERTISER_RECORDABLE:"VsRAd",VISIBILITY_ADVERTISER:"VsAd",
VISIBILITY_AGENCY:"VsAg",VISIBILITY_IAB:"VsIAB",VISIBILITY_ADVERTISER_DURATION:"VsAdDu",VISIBILITY_AGENCY_DURATION:"VsAgDu",VISIBILITY_AVG_AD_SURFACE:"VsAvSu",VISIBILITY_AVG_SCREEN_SHARE:"VsAvSc",REM_DURATION:"ebRemDuration",INTRO_FULL_PLAY:"ebFullPlay",REM_FULL_PLAY:"ebRemFullPlay",SWIPE:"ebSwipe",AD_START:"AdStart",AD_STACKING:"AdStacking",ACTUAL_SIZE:"ActualSize",MULTI_BURN:"MultiBurn",AD_COLLISION:"AdCollision",AD_CAROUSEL:"AdCarousel",AD_PARAMS:"AdParams",PLAYER_PARAMS:"plparams",VER_URL:"verURL",
END_OF_SESSION:"eos",HEAVY_AD_INTERVENTION:"hai"};EBG.Interactions.Categories={SYSTEM:2,VIDEO:1,CUSTOM:0};EBG.Interactions.InitiationTypes={AUTO:"auto",USER:"user"};EBG.Interactions.InteractionTypes={COUNTER:"Counter",TIMER:"Timer"};EBG.Interactions.sessions={};EBG.Interactions.checkURL=function(a){return 0<a.indexOf("://")||0===a.indexOf("//")?a:"https://"+EBG.adaptor.getHostName()+a};EBG.Interactions.RemoteServersData=function(){};EBG.Interactions.RemoteServersData.prototype={networkUrl:null,agencyUrl:null};
EBG.declareClass(EBG.Interactions.RemoteServersData,null);EBG.Interactions.InteractionData=function(a,b,c,d){void("");this.reportingName=a;this.adUId=b;this.category=c;this.assetID=d};EBG.Interactions.InteractionData.prototype={initiationType:EBG.Interactions.InitiationTypes.AUTO,category:EBG.Interactions.Categories.SYSTEM,isPanel:!1};EBG.declareClass(EBG.Interactions.InteractionData,null);
EBG.Interactions.CounterInteractionData=function(a,b,c,d){void("");EBG.callSuperConstructor(EBG.Interactions.CounterInteractionData,this,[a,c,b,d]);this.remoteServers=new EBG.Interactions.RemoteServersData};EBG.Interactions.CounterInteractionData.prototype={reportImmediately:!1,countAsClick:!1,remoteServers:null,clickURL:null,numLeftToReport:10,state:null};EBG.declareClass(EBG.Interactions.CounterInteractionData,EBG.Interactions.InteractionData);
EBG.Interactions.TimerInteractionData=function(a,b,c){void("");this.reportingName=a;EBG.callSuperConstructor(EBG.Interactions.TimerInteractionData,this,[a,c,b])};EBG.Interactions.TimerInteractionData.prototype={value:0,startTime:0,idleDuration:0};EBG.declareClass(EBG.Interactions.TimerInteractionData,EBG.Interactions.InteractionData);
EBG.Interactions.AggregationInteractionData=function(a,b,c){void("");this.reportingName=a;EBG.callSuperConstructor(EBG.Interactions.AggregationInteractionData,this,[a,c,b])};EBG.Interactions.AggregationInteractionData.prototype={value:0,isPlaying:!1};EBG.declareClass(EBG.Interactions.AggregationInteractionData,EBG.Interactions.InteractionData);EBG.AutolinaClass=function(){};
EBG.AutolinaClass.prototype={_hostname:"localhost:3000",reportType:{INTERACTION:"INTERACTION",THIRDPARTY:"THIRDPARTY",CLICK:"CLICK"},report:function(a,b){a=this._adapt(a,b);navigator.sendBeacon?EBG.adaptor.reportBeacon(a):EBG.adaptor.reportToRemoteServerUsingImage(a)},_adapt:function(a,b){switch(b){case EBG.Autolina.reportType.THIRDPARTY:return ebPtcl+this._hostname+"/3rdparty?url="+encodeURIComponent(a);case EBG.Autolina.reportType.INTERACTION:return ebPtcl+this._hostname+"/interaction?"+a.split("?")[1];
case EBG.Autolina.reportType.CLICK:return ebPtcl+this._hostname+"/click?url="+encodeURIComponent(a)}},_GET:function(){var a={x:function(){if("undefined"!==typeof XMLHttpRequest)return new XMLHttpRequest;for(var b=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],c,d=0;d<b.length;d++)try{c=new ActiveXObject(b[d]);break}catch(e){}return c},get:function(b,c,d){try{var e=a.x();e.open("GET",b,d);e.onreadystatechange=function(){4==e.readyState&&c&&
c(e.responseText)}}catch(f){}}};return a.get}()};EBG.declareNamespace("Utilities.InteractionUtil");EBG.dynamicTokens={tp_deviceadvid:"ebaddid",tp_deviceidfaraw:"ebidfar",tp_deviceidfasha1:"ebidfas1",tp_deviceidfasha2:"ebidfas2",tp_deviceidfamd5:"ebidfam",tp_devicegaid:"ebgaid",tp_devicewaid:"ebwaid",tp_appname:"ebappname",tp_appid:"ebappid",tp_mobilelat:"ebmblat",tp_mobilelong:"ebmblong"};EBG.Utilities.InteractionUtil=function(){};
EBG.Utilities.InteractionUtil.prototype={getBannerRedirectUrl:function(a,b){var c=EBGInfra.isDefinedNotNull.bind(EBGInfra);b=b||7850;if(!a||!a.adConfig)return"";var d=a.adConfig,e={},f=d.protocol+EBG.combinePaths(d.bsPath,EBG.format("{0}/adServer.bs?cn=brd&PluID={1}&Pos={2}&EyeblasterID={3}",d.interactionServer,d.pluId,d.rnd,d.adId));EBGInfra.isDefined(d.page)&&d.page.length&&(e.Page=d.page);c(a.clickVal)&&(e.clk=a.clickVal);d.isPreview||a.isClickTag||(e.sct=1);d.autolina&&(e.autolina=1);var g=d.massVersioning;
if(g){if(g.adVersions||g.defaultAdVersion)a.sClickedVersion?e.vid=a.sClickedVersion+"&vcl=1":a.versionToReport&&(e.vid=a.versionToReport);g.targetAudienceId&&(e.ta=g.targetAudienceId);if(g.logDeliveryGroupId||g.deliveryGroupId)e.dg=g.logDeliveryGroupId||g.deliveryGroupId;g.versionTargetAudienceId&&(e.tav=g.versionTargetAudienceId);g.dgTargetAudienceId&&(e.tadg=g.dgTargetAudienceId);g.originalDeliveryGroupId&&(e.dgo=g.originalDeliveryGroupId)}a.fIsDefClick=EBG.isBool(a.fIsDefClick)?a.fIsDefClick:!1;
a.fIsDefClick||(e.di=0);c(d.sPublisherPlacementId)&&(e.pc=d.sPublisherPlacementId);c(d.sID)&&(e.sessionid=d.sID);d.usercookie&&(e.usercookie=d.usercookie);c(d.optOut)&&(e.OptOut=d.optOut);c(d.lineId)&&(e.lineid=encodeURIComponent(d.lineId));c(d.diAppId)&&(e.diappid=d.diAppId);c(d.gdpr)&&(e.gdpr=d.gdpr);c(d.gdprconsent)&&(e.gdpr_consent=d.gdprconsent);var h=(g=d.ffs)&&g.CFF_SendUndefined;if(!h&&"undefined"!==typeof d.gdprpurposes||h)e.gdprpurposes=d.gdprpurposes;d.isNXT&&!a.isClickTag&&(e.ctick=EBGInfra.getCtick(d.startTimeD,
d.startTimeP,"cframe"===d.exscope));d.oURLTokens||(d.oURLTokens=EBGInfra.pairsToObj(d.sUrlTokens,"$$"));for(var k in d.oURLTokens)d.oURLTokens.hasOwnProperty(k)&&EBG.dynamicTokens[k.toLowerCase()]&&(e[EBG.dynamicTokens[k.toLowerCase()]]=d.oURLTokens[k]);if(g&&g.CFF_ClickFlags){k={};h=!1;for(var l in g)g.hasOwnProperty(l)&&"CFF_Clk_"==l.substring(0,8)&&(k[l.substring(8)]=1,h=!0);try{h&&(k=encodeURIComponent(JSON.stringify(k)),e.cff=k)}catch(p){}}for(var m in e)e.hasOwnProperty(m)&&(f+="&"+m+"="+e[m]);
l=b-f.length;a.cvurl&&(e.cvurl=encodeURIComponent('"'+a.cvurl.split("|").join('","')+'"'));a.sJumpUrl&&(e.rtu=encodeURIComponent(a.sJumpUrl));c(d.ncu)&&(e.ncu=encodeURIComponent(d.ncu));c(d.ebReferrer)&&(e.ebReferrer=encodeURIComponent(d.ebReferrer));f+=this._capUrls(l,["cvurl","ncu","ebReferrer","rtu"],e);return f.slice(0,b)},_capUrls:function(a,b,c){for(var d="",e=!0,f=0;e;){e=!1;var g=Math.floor(a/b.length);f=g;for(var h=b.length-1;0<=h;--h){var k=b[h];c[k]?(k="&"+k+"="+c[k],k.length<=g&&(d+=k,
a-=k.length,b.splice(h,1),e=!0)):(b.splice(h,1),e=!0)}}for(h=0;h<b.length;++h)d+=("&"+b[h]+"="+c[b[h]]).slice(0,f);return d}};EBG.declareClass(EBG.Utilities.InteractionUtil,null);EBG.InteractionUtil=EBG.InteractionUtil||new EBG.Utilities.InteractionUtil;EBG.Interactions.Interaction=function(){};
EBG.Interactions.Interaction.prototype={unique:1,_escapeInteractionName:function(a){a=a.toString();a=a.replace(/~|\^|\|/ig,"_");return encodeURIComponent(a)},_buildReportFormat:function(a,b,c,d){var e=this.interactionData,f=e.adConfig,g=EBG.Interactions.InteractionManager.charAdFieldsDelimeter;a=EBG.format("{0}{2}{1}{3}{1}{4}{1}{5}{6}{7}{8}{9}",EBG.Interactions.InteractionManager.charIntDelimeter,g,this._escapeInteractionName(e.reportingName),c,d||0,a,this.unique,b,e.category,e.isPanel?1:0);f&&f.isNXT&&
(a+=g+EBG.getCtick(f.startTimeD,f.startTimeP,"cframe"===f.exscope));return a}};EBG.Interactions.CounterInteraction=function(a){void("");EBG.callSuperConstructor(EBG.Interactions.CounterInteraction,this);this.interactionData=a?a:new EBG.Interactions.CounterInteractionData;EBG.log.endGroup()};
EBG.Interactions.CounterInteraction.prototype={type:EBG.Interactions.InteractionTypes.COUNTER,handle:function(a){void("");var b=this.interactionData,c=b.counterJumpUrlData,d=c&&c.tmpData?c.tmpData.isClick:!1,e=c&&c.tmpData?c.tmpData.isProductClick:!1,f=!1,g=!0,h="",k=(c&&c.tmpData?c.tmpData.clickUrl:null)||(c?c.jumpUrl:""),l=c&&c.tmpData&&c.tmpData.windowWasOpen?!0:!1;c=!l;this.interactionData.adConfig.ffs.CFF_openWindowParam&&(c=c&&this.interactionData.adConfig.openWindow);
this.shouldReportInteraction()?(this._handleRemoteServers(),b.counterJumpUrlData&&(g=k&&this._isEBClick()?!1:!0,f=k&&(d||this._isEBClick())?!0:!1,(b=d||this._isEBClick())?f?c&&this.handleBRDFlow():(d||e)&&this.reportThirdPartyUrls():c&&k&&(k=EBG.Interactions.checkURL(k),this._openOrRedirect(k))),h=g?this._getReportingData(a,f):""):(!l&&k&&(k=EBG.Interactions.checkURL(k),this._openOrRedirect(k)),EBG.isTestMode&&(d||e||this._isEBClick())&&this.reportThirdPartyUrls());EBG.log.endGroup();return h},reportThirdPartyUrls:function(){var a=
this.interactionData.reportingName.toLowerCase()==EBG.Interactions.SystemInts.DEFAULT_CLICK.toLowerCase(),b=this.interactionData.counterJumpUrlData,c=[];if(b&&b.tmpData&&b.tmpData.isClick&&(void(""),c=this.interactionData.adConfig.clickTrackingUrls,a||this.interactionData.adConfig.showOnlyImage))for(a=0;a<this.interactionData.adConfig.defaultClickTrackingUrls.length;a++)c[c.length]=this.interactionData.adConfig.defaultClickTrackingUrls[a];if(b&&b.tmpData&&b.tmpData.isProductClick&&
b.tmpData.clickedVerUrl)if(this.interactionData.adConfig.ffs.CFF_ReportVer3rdP)for(b=b.tmpData.clickedVerUrl.split("|"),void(""),a=0;a<b.length;a++)c[c.length]=b[a];else void(""),c[c.length]=b.tmpData.clickedVerUrl;for(a=0;a<c.length;a++)EBG.adaptor.reportToRemoteServerUsingImage(c[a])},shouldReportInteraction:function(){var a=!0;0==this.interactionData.numLeftToReport||EBG.isPreview||EBG.isTestMode||EBG.isInWorkshop?(void(""),
a=!1):this.interactionData.numLeftToReport--;return a},handleBRDFlow:function(){var a=this.interactionData,b=this.interactionData.counterJumpUrlData,c=EBGInfra.isDefinedNotNull(b)&&b.tmpData?b.tmpData.clickUrl:null,d=c||EBGInfra.isDefinedNotNull(b)&&b.jumpUrl;this._isEBClick()&&(c||(d=""));a=a.reportingName.toLowerCase()==EBG.Interactions.SystemInts.DEFAULT_CLICK.toLowerCase();c=0;b.tmpData.isClick?c=1:b.tmpData.isProductClick&&(c=2);d=""==d?"":EBG.Interactions.checkURL(d);d=this._getBannerRedirectUrl(d,
c,a,b.tmpData.clickedVersion);d=EBG.Interactions.checkURL(d);this._openOrRedirect(d)},_openOrRedirect:function(a){-1==this.interactionData.counterJumpUrlData.target.indexOf(EBG.WindowTarget.BLANK)?(this.interactionData.reportImmediately=!0,EBG.runTimed(this,this._openPage,[a,this.interactionData.counterJumpUrlData],1E3)):this._openPage(a,this.interactionData.counterJumpUrlData)},getClickTagUrl:function(a){var b=this.interactionData.adConfig;a=EBG.isDefined(a)&&""!=a?EBG.Interactions.checkURL(a):void 0;
EBG.isPreview?EBG.isInWorkshop?a=EBG.format("ReportPage_{0}.html",HTMLPageVer):(a=this.interactionData.counterJumpUrlData.jumpUrl,4<=a.length&&"http"!=a.substr(0,4)&&(a=EBG.format("{0}{1}",ebPtcl,a))):(a=this._getBannerRedirectUrl(a,null,null,null,!0,4E3),a=EBG.format("{0}/ReportPage{1}.html?ebReportURL={2}$$ebImpressionID={3}$$ctick={4}",ebBigS,EBG.reportPageVer,escape(a),EBG.Ads.Ad.Fn.getRandFromAdUId(b.uid),+new Date),b.Purposes.Cookies||(a+="$$noCookies=1"),b=7850,EBG.adaptor.browser.isIE()&&
(b=9<=EBG.adaptor.browser.getVersion()?4096:2048),b-=a.length,b=this._getReportPageTrackingUrls(b),a+=b);return a},_getReportPageTrackingUrls:function(a){var b="$$ebTURLs=[";if(-1!=a){if(b.length>=a)return"";a-=b.length}for(var c=this.interactionData.adConfig.clickTrackingUrls,d=0;d<c.length;d++){var e=EBG.format('{0}"{1}"',0!=d?",":"",c[d]);if(-1!=a){if(e.length>=a)break;a-=e.length}b+=e}return b+"]"},_openPage:function(a,b){var c=b.tmpData.clickedVerUrl?encodeURIComponent('"'+b.tmpData.clickedVerUrl.split("|").join('","')+
'"'):"",d=!b.tmpData.clickedVerUrl||EBG.isPreview||EBG.isInWorkshop?a:a+"&cvurl="+c;switch(EBG.adaptor.getRequestMethod(d)){case "POST":var e=b.target;EBG.adaptor.browser.isIE()&&9>=EBG.adaptor.browser.getVersion()||(b.target=b.target&&b.target!=EBG.WindowTarget.BLANK?b.target:"ebReportPage"+parseInt(1E8*Math.random()),EBG.adaptor.openPage("",b));EBG.runTimed(this,function(){var f=document.createElement("form");f.setAttribute("method","post");f.setAttribute("action",a.substring(0,d.indexOf("?"))+
"?cn=brd&ebReferrer="+encodeURIComponent(this.interactionData.adConfig.ebReferrer));f.setAttribute("target",b.target);b.target=e;var g=this._urlQueryStringToJSON(d),h;for(h in g){var k=f,l=k.appendChild,m=h,p=unescape(g[h]),n=document.createElement("input");n.setAttribute("type","hidden");n.setAttribute("name",m);n.setAttribute("value",p);l.call(k,n)}EBG.adaptor.getDisplayWin().document.body.appendChild(f);f.submit()},[],25);break;default:EBG.Autolina&&EBG.Autolina.report(d,EBG.Autolina.reportType.CLICK),
EBG.adaptor.openPage(d,b)}},_urlQueryStringToJSON:function(a){var b={},c=a.substring(a.indexOf("?")+1);if(!c)return b;a=[];for(var d=0,e=0;e<c.length;e++)switch(c.charAt(e)){case "&":a.push(c.substring(d,e));d=e+1;break;case "$":if("="==c.charAt(e-1)&&"$"==c.charAt(e+1))for(e+=2;"$"!=c.charAt(e)||"$"!=c.charAt(e-1);)e++}a.push(c.substring(d));for(e=0;e<a.length;e++)c=a[e],b[c.substring(0,c.indexOf("="))]=c.substring(c.indexOf("=")+1);return b},_getReportingData:function(a,b){var c=0,d=0;b||(c=this.interactionData.counterJumpUrlData&&
this.interactionData.counterJumpUrlData.tmpData.isClick?1:0,d=this.interactionData.initiationType==EBG.Interactions.InitiationTypes.USER?1:0);b=this.interactionData.value?this.interactionData.value:0;EBG.isObj(b)&&this.interactionData.useInteractionsStrPipe&&(this.interactionData.reportingName==EBG.Interactions.SystemInts.AD_PARAMS&&(b.idx=this.interactionData.numToReport-this.interactionData.numLeftToReport),b=EBG.serializeObject(b));a=this._buildReportFormat(c,d,b,a);this.unique=0;return a},_getBannerRedirectUrl:function(a,
b,c,d,e,f){var g=this.interactionData.adConfig,h;g.massVersioning&&(g.massVersioning.adVersions||g.massVersioning.defaultAdVersion)&&(h=d?d:EBG.Ads.Ad.Fn.getVersionToReport(g.massVersioning.adVersions));return EBG.InteractionUtil.getBannerRedirectUrl({adConfig:g,sJumpUrl:a,clickVal:b,fIsDefClick:c,sClickedVersion:d,isClickTag:e,versionToReport:h},f)},_handleRemoteServers:function(){if(EBG.isPreview)void("");else{void("");
if(this.interactionData.remoteServers){var a=this.interactionData.remoteServers,b=new EBG.Events.Event(EBG.Events.EventNames.INTERACTION_REPORT_REMOTE_SERVERS);b.dispatcher=this;b.timing=EBG.Events.EventTiming.BEFORE;b.eventData={remoteServers:a};if(EBG.eventMgr.dispatchEvent(b)){EBG.log.endGroup();return}a.networkUrl&&(b=this._replaceRSTokens(a.networkUrl),void(""),EBG.adaptor.reportToRemoteServerUsingImage(b));a.agencyUrl&&(a=this._replaceRSTokens(a.agencyUrl),
void(""),EBG.adaptor.reportToRemoteServerUsingImage(a))}EBG.log.endGroup()}},_replaceRSTokens:function(a){try{a=a.replace(/\[ebInteraction\]/ig,this.interactionData.reportingName),a=a.replace(/\[ebInteractionNum\]/ig,EBG.intMgr.adsData[this.interactionData.adConfig.uid].numOfInteractions),void("")}catch(b){void("")}return a},_isEBClick:function(){var a=
this.interactionData&&this.interactionData.reportingName?this.interactionData.reportingName.toLowerCase():"";return a==EBG.Interactions.SystemInts.CLICK.toLowerCase()||a==EBG.Interactions.SystemInts.DEFAULT_CLICK.toLowerCase()}};EBG.declareClass(EBG.Interactions.CounterInteraction,EBG.Interactions.Interaction);
EBG.Interactions.TimerInteraction=function(a){void("");EBG.callSuperConstructor(EBG.Interactions.TimerInteraction,this);this.interactionData=a?a:new EBG.Interactions.TimerInteractionData;EBG.log.endGroup()};
EBG.Interactions.TimerInteraction.prototype={type:EBG.Interactions.InteractionTypes.TIMER,handle:function(a,b){this.interactionData.adConfig||this.interactionData.reportingName!=EBG.VideoInteraction.VIDEO_ASSET_DURATION||(this.interactionData.adConfig=b);b=this.interactionData.value;this.isRunning()&&(this.stop(),this.start());b=this.interactionData.value-b;b=0<b?b:0;var c=this.interactionData.idleDuration/1E3;c=c<=b?c:b;void("");
this.interactionData.value-=c;this.interactionData.idleDuration=0;b=EBG.Interactions.InteractionManager.MAX_AD_DURATION_SEC;this.interactionData.value=this.interactionData.value>b?b:this.interactionData.value;this.interactionData.value=Math.floor(this.interactionData.value);if(0>=this.interactionData.value)return void(""),!1;void("",
this.interactionData.reportingName,this.interactionData.value);return this._buildReportFormat(0,0,this.interactionData.value,a,0)},start:function(){var a=new EBG.Events.Event(EBG.Events.EventNames.START_TIMER);a.dispatcher=this;a.timing=EBG.Events.EventTiming.BEFORE;a.eventData={interaction:this};if(!EBG.eventMgr.dispatchEvent(a)){if(this.isRunning())void("");else{var b=(new Date).getTime();this.interactionData.startTime=
b;void("");a.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER}EBG.eventMgr.dispatchEvent(a)}},stop:function(){if(this.isRunning()){var a=new EBG.Events.Event(EBG.Events.EventNames.STOP_TIMER);a.dispatcher=this;a.timing=EBG.Events.EventTiming.BEFORE;a.eventData={interaction:this};EBG.eventMgr.dispatchEvent(a)||(this.interactionData.value+=this.getElapsedTime()/1E3,this.interactionData.startTime=0,void("",
this.interactionData.reportingName,this.interactionData.value),a.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER,EBG.eventMgr.dispatchEvent(a))}else 0==this.interactionData.value?void(""):void("")},getElapsedTime:function(){return(new Date).getTime()-this.interactionData.startTime},update:function(a){var b=new EBG.Events.Event(EBG.Events.EventNames.UPDATE_TIMER);
b.dispatcher=this;b.timing=EBG.Events.EventTiming.BEFORE;b.eventData={interaction:this};EBG.eventMgr.dispatchEvent(b)||(this.interactionData.value+=a,void(""),b.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER,EBG.eventMgr.dispatchEvent(b))},clear:function(){this.interactionData.value=0;this.interactionData.startTime=0;void("")},increaseIdleDuration:function(a){void("",
this.interactionData.reportingName,this.interactionData.idleDuration);this.interactionData.idleDuration+=a;void("")},isRunning:function(){return 0<this.interactionData.startTime},isFinished:function(){return 0===this.interactionData.startTime&&0<this.interactionData.value},getValue:function(){return this.interactionData.value},getType:function(){return EBG.DurationInteraction.TIMER}};
EBG.declareClass(EBG.Interactions.TimerInteraction,EBG.Interactions.Interaction);EBG.Interactions.IdleManager=function(){void("");this.currentIdleDuration=0;this._startTime=(new Date).getTime();this.intervalId=EBG.setInterval(this,this._checkIfIdle,[],EBG.Interactions.IdleManager.IDLE_INTERVAL);void("",this._startTime);EBG.log.endGroup()};EBG.Interactions.IdleManager.IDLE_INTERVAL=5E3;
EBG.Interactions.IdleManager.prototype={_totalIdleDuration:0,_lastActiveTimeStamp:0,updateIdleDuration:function(){this.currentIdleDuration=0;var a=(new Date).getTime();0!==this._lastActiveTimeStamp&&(this.currentIdleDuration=a-this._lastActiveTimeStamp,this.currentIdleDuration>EBG.Interactions.IdleManager.IDLE_INTERVAL+2E3&&(this._totalIdleDuration+=this.currentIdleDuration,void(""),EBG.intMgr.handleAllTimers(EBG.Interactions.InteractionManager.HandleAllTimersOptions.HANDLE_IDLE)))},
_checkIfIdle:function(){this.updateIdleDuration();var a=(this._lastActiveTimeStamp=(new Date).getTime())-this._startTime-this._totalIdleDuration;a>1E3*EBG.Interactions.InteractionManager.MAX_AD_DURATION_SEC&&(void(""),EBG.intMgr.unLoadHandler(),EBG.eventMgr.dispatchEvent(new EBG.Events.Event(EBG.Events.EventNames.MAX_AD_DURATION)),EBG.clearInterval(this.intervalId))}};
EBG.declareClass(EBG.Interactions.IdleManager,null);EBG.Interactions.StdInteractionManager=function(){void("");this.adsData=EBG.intMgr?EBG.intMgr.adsData:{};this.adsIntQueues=EBG.intMgr?EBG.intMgr.adsIntQueues:{};this.adDataParamsQueue=EBG.intMgr?EBG.intMgr.adDataParamsQueue:{};EBG.log.endGroup()};
EBG.Interactions.StdInteractionManager.prototype={copy:function(a){this.adsIntQueues=a.adsIntQueues;this.adsData=a.adsData;this.adDataParamsQueue=a.adDataParamsQueue},initAdData:function(a,b){void("");var c=a.uid;void("");this.adsData[c]&&void("");this.adsIntQueues[c]=this.adsIntQueues[c]?this.adsIntQueues[c]:[];this.adDataParamsQueue[c]=this.adDataParamsQueue[c]?
this.adDataParamsQueue[c]:[];b=this.adsData[c]={adConfig:a,isUserInteractionOccur:!1,isClickOccur:!1,isProductClicked:{},numOfInteractions:0,delayIntReport:a.impressionSent?!1:b,videoState:{},assetsTimers:{}};b[EBG.Interactions.InteractionTypes.COUNTER]={};b[EBG.Interactions.InteractionTypes.TIMER]={};b.adConfig.isStdAd||this._addSystemInteractions(a);EBG.log.endGroup()},allowInteractionReport:function(a){this.adsData[a]&&(this.adsData[a].delayIntReport=!1)},addInteraction:function(a,b){void("");
b=EBG.isDefinedNotNull(b)?b.toLowerCase():a.interactionData.reportingName.toLowerCase();var c=a.interactionData.adUId,d=new EBG.Events.Event(EBG.Events.EventNames.ADD_INTERACTION);d.eventData=a;d.dispatcher={_adConfig:{rnd:this.adsData[c].adConfig.rnd}};d.timing=EBG.Events.EventTiming.BEFORE;var e=EBG.eventMgr.dispatchEvent(d),f=this.adsData[c];if(!e){if(!f){void("");return}void("",
a.interactionData.reportingName,c,a.type);f[a.type][b]=a;a.interactionData.adConfig=this.adsData[c].adConfig}d.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(d);EBG.log.endGroup()},getClickTag:function(a){return(a=this._getCounterInteraction(EBG.Interactions.SystemInts.CLICK,a))?a.getClickTagUrl():""},getClickTarget:function(a){var b="_blank";!EBG.isPreview&&EBG.isInWorkshop&&(a=this._getCounterInteraction(EBG.Interactions.SystemInts.CLICK,a))&&(b=a.interactionData.counterJumpUrlData.target);
return b},handleCloseAdParts:function(a,b){a&&1==a.fClose&&(a=new EBG.Events.Event(EBG.Events.EventNames.CLOSE_AD),a.dispatcher={_adConfig:{rnd:EBG.Ads.Ad.Fn.getRandFromAdUId(b)}},a.eventData={closeDueToClickthrough:!0},EBG.eventMgr.dispatchEvent(a))},handleCounterInteraction:function(a,b,c,d,e,f){void("");var g=this._getCounterInteraction(a,b),h=g?g.interactionData:null,k=h?h.counterJumpUrlData:null,l=this.adsData[b],m=l.adConfig.isStdAd;
f=EBGInfra.isDefined(f)?f:!0;c=c||h&&h.assetID||0;!m&&h&&(h.initiationType=d?EBG.Interactions.InitiationTypes.USER:h.initiationType,this._handleUserInteraction(b,h),this._handleSpecialInteractions(a,b,c));if(g){a=new EBG.Events.Event(EBG.Events.EventNames.HANDLE_COUNTER_INTERACTION);a.dispatcher={_adConfig:{rnd:EBG.Ads.Ad.Fn.getRandFromAdUId(b)}};a.timing=EBG.Events.EventTiming.BEFORE;a.eventData={interaction:g};if(EBG.eventMgr.dispatchEvent(a))return;k?(k.tmpData=e,k.tmpData.isClick=h.countAsClick&&
!l.isClickOccur,l.isClickOccur=k.tmpData.isClick?!0:l.isClickOccur,d=k.tmpData.clickedVersion,k.tmpData.isProductClick=h.countAsClick&&k.tmpData.clickedVersion&&d&&!l.isProductClicked["V_"+d],k.tmpData.isProductClick&&(l.isProductClicked["V_"+d]=!0)):e&&e.value&&(g.interactionData.value=e.value);f=f?g.handle(c):"";l.numOfInteractions++;h.reportingName===EBG.Interactions.SystemInts.ACTUAL_SIZE?this._handlePassThrough(b,h,f,c,0,0,2,e.isPanel,1):f&&(this._handleReportData(b,h,f),this._isReportDataInQueue(b,
f)||this.reportInteractionQueues());this.handleCloseAdParts(k,b);a.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(a)}else void(""+a+" with adUId:"+b);EBG.log.endGroup()},isInteractionExist:function(a,b,c){if(this.adsData[c]&&this.adsData[c][b])return this.adsData[c][b][a]?!0:!1},_getCounterInteraction:function(a,b){a=a.toLowerCase();if(this.adsData[b]&&this.adsData[b][EBG.Interactions.InteractionTypes.COUNTER]&&
this.adsData[b][EBG.Interactions.InteractionTypes.COUNTER][a])return void(""),this.adsData[b][EBG.Interactions.InteractionTypes.COUNTER][a]}};EBG.declareClass(EBG.Interactions.StdInteractionManager,null);
EBG.Interactions.InteractionManager=function(a){void("");EBG.callSuperConstructor(EBG.Interactions.InteractionManager,this);EBG.intMgr&&EBG.intMgr.copy(this);this.idleManager=new EBG.Interactions.IdleManager;this._timedReport=EBG.adaptor.browser.isMobile()?9E4:1E4;this._subscribeToEvents();EBG.log.endGroup()};EBG.Interactions.InteractionManager.charAdFieldsDelimeter="~";EBG.Interactions.InteractionManager.charIntDelimeter="^";
EBG.Interactions.InteractionManager.intStackLength=7;EBG.Interactions.InteractionManager.MAX_AD_DURATION_SEC=900;EBG.Interactions.InteractionManager.INTERACTION_THRESHOLD_SEC=86400;EBG.Interactions.InteractionManager.HandleAllTimersOptions={REPORT:0,PAUSE:1,HANDLE_IDLE:2};
EBG.Interactions.InteractionManager.prototype={_isUnloadHandled:!1,_pausedTimers:null,_masterOrdinalNumber:null,_seqTimersReportData:{index:-1,intervals:[5,10,20,40,60,120,240]},startAggregate:function(a,b,c){void("");null==this._masterOrdinalNumber&&(this._masterOrdinalNumber=c);this.startTimer(a,b,c);EBG.log.endGroup()},startTimer:function(a,b,c){void("");var d=this._getTimerInteraction(a,b);if(d){d.start();
if(EBGInfra.isDefined(c)&&EBGInfra.notNull(c))switch(d=this.adsData[b],d=d.assetsTimers[c]?d.assetsTimers[c]:d.assetsTimers[c]={},a){case EBG.VideoInteraction.VIDEO_PLAY_DURATION:this._startAssetTimer(d,EBG.VideoInteraction.VIDEO_ASSET_DURATION,b,c);break;case EBG.VideoInteraction.FULLSCREEN_DURATION:this._startAssetTimer(d,EBG.VideoInteraction.FULLSCREEN_ASSET_DURATION,b,c)}EBG.isGlobalDef("JSON")&&void("")}else void("",
a,b);EBG.log.endGroup()},_handleVideoStarted:function(a,b){var c=new EBG.Events.Event(EBG.Events.EventNames.DWELL_VIDEO_START);c.dispatcher={_adConfig:{rnd:EBG.Ads.Ad.Fn.getRandFromAdUId(a)}};c.eventData={assetId:b};EBG.eventMgr.dispatchEvent(c)},_startAssetTimer:function(a,b,c,d){if(!a[b])if(null!=this._masterOrdinalNumber){var e=new EBG.Interactions.AggregationInteractionData(b,EBG.Interactions.Categories.VIDEO,c);a[b]=new EBG.Interactions.AggregateInteraction(e)}else e=new EBG.Interactions.TimerInteractionData(b,
EBG.Interactions.Categories.VIDEO,c),a[b]=new EBG.Interactions.TimerInteraction(e);a[b].start();this._handleVideoStarted(c,d)},updateAggregation:function(a,b,c,d){void("");null==this._masterOrdinalNumber&&(this._masterOrdinalNumber=d);var e=this._getTimerInteraction(a,b);if(e){this._masterOrdinalNumber==d&&e.update(c);if(EBGInfra.isDefined(d)&&EBGInfra.notNull(d))switch(e=this.adsData[b],e=e.assetsTimers[d]?e.assetsTimers[d]:e.assetsTimers[d]={},a){case EBG.VideoInteraction.VIDEO_PLAY_DURATION:this._updateAssetAggregation(e,
EBG.VideoInteraction.VIDEO_ASSET_DURATION,b,c,d);break;case EBG.VideoInteraction.FULLSCREEN_DURATION:this._updateAssetAggregation(e,EBG.VideoInteraction.FULLSCREEN_ASSET_DURATION,b,c,d)}void(""+a+" with adUId:"+b)}else void(""+a+" with adUId:"+b);EBG.log.endGroup()},_updateAssetAggregation:function(a,b,c,d,e){a[b]||(c=new EBG.Interactions.AggregationInteractionData(b,EBG.Interactions.Categories.VIDEO,c),a[b]=new EBG.Interactions.AggregateInteraction(c));
a[b].update(d)},stopAggregate:function(a,b,c){void("");this._masterOrdinalNumber=null;this.stopTimer(a,b,c);EBG.log.endGroup()},stopTimer:function(a,b,c){var d=this._getTimerInteraction(a,b),e=this.adsData[b].assetsTimers,f=!0;if(d){if(EBGInfra.isDefined(c)&&EBGInfra.notNull(c)&&e[c])switch(a){case EBG.VideoInteraction.VIDEO_PLAY_DURATION:e[c][EBG.VideoInteraction.VIDEO_ASSET_DURATION].stop();f=!this._isRunningVideoAsset(b,!1);break;case EBG.VideoInteraction.FULLSCREEN_DURATION:e[c][EBG.VideoInteraction.FULLSCREEN_ASSET_DURATION].stop()}f&&
d.stop();void(""+a+" with adUId:"+b);EBGInfra.isDefined(c)&&EBGInfra.notNull(c)&&(a=new EBG.Events.Event(EBG.Events.EventNames.DWELL_VIDEO_STOP),a.dispatcher={_adConfig:{rnd:EBG.Ads.Ad.Fn.getRandFromAdUId(b)}},a.eventData={assetId:c},EBG.eventMgr.dispatchEvent(a))}else void(""+a+" with adUId:"+b)},clearTimer:function(a,b,c){(c=this._getTimerInteraction(a,b))?(c.clear(),void(""+a+" with adUId:"+
b)):void(""+a+" with adUId:"+b)},_isRunningVideoAsset:function(a,b){a=this.adsData[a].assetsTimers;for(var c in a)if(a.hasOwnProperty(c)){var d=b?"ebFSVideoAssetDuration":"ebVideoAssetDuration";if(a[c][d]&&a[c][d].isRunning())return!0}return!1},updateTimer:function(a,b,c,d){var e=this._getTimerInteraction(a,b);e?(e.update(c),EBGInfra.isDefined(d)&&EBGInfra.notNull(d)&&this.adsData[b].assetsTimers[d].update(c),void(""+
a+" with adUId:"+b)):void(""+a+" with adUId:"+b)},getTimerValue:function(a,b){return(a=this._getTimerInteraction(a,b))?a.getValue():0},isTimerRunning:function(a,b){return(a=this._getTimerInteraction(a,b))?a.isRunning():!1},_handleUserInteraction:function(a,b){b.initiationType!=EBG.Interactions.InitiationTypes.USER||this.adsData[a].isUserInteractionOccur||(this.adsData[a].isUserInteractionOccur=!0,b=new EBG.Events.Event(EBG.Events.EventNames.USER_INTERACTION),
b.dispatcher={_adConfig:{rnd:EBG.Ads.Ad.Fn.getRandFromAdUId(a)}},EBG.eventMgr.dispatchEvent(b),void(""),this._reportUserInteraction(a))},_handlePanelsViewed:function(a,b){b.isPanel&&b.initiationType==EBG.Interactions.InitiationTypes.USER&&this.handleCounterInteraction(EBG.ExpBaseInteractions.PANELS_VIEWED,a)},_handleReportData:function(a,b,c){if(b.useInteractionsStrPipe)this._handleDataParams(a,b,c);else if(this.adsIntQueues[a].push(c),a=
this.adsIntQueues[a].length>=EBG.Interactions.InteractionManager.intStackLength?!0:!1,b&&(b.reportImmediately||b.counterJumpUrlData&&b.counterJumpUrlData.tmpData.isClick)||a)b=!b.sync,window.navigator&&navigator.sendBeacon&&!EBG.isMRAID()?this.reportInteractionQueues(b,!1,!0):this.reportInteractionQueues()},_handlePassThrough:function(a,b,c,d,e,f,g,h,k){k=this.adsData[a].adConfig;e=[e||0,c?1:0,f||0,g||2,h?1:0].join("");c=encodeURIComponent(c||["^",b.reportingName,"~",b.value,"~",d,"~",e,"~",EBG.getCtick(k.startTimeD,
k.startTimeP,"cframe"===k.exscope)].join(""));b=this._getAdReportData(a);a=this._getPipeParams(a,!1);c=[k._interactionsStrPipe,"$$",b,c,"$$",a].join("");this._reportServer(c,!0)},_handleDataParams:function(a,b,c){if(!this.adsData[a].adConfig.Purposes.Measurements){if(b.reportingName==EBG.Interactions.SystemInts.VER_URL)return!1;b.reportingName==EBG.Interactions.SystemInts.PLAYER_PARAMS&&(c=c.replace(/&(bsc|ivp|fs)=-?\d+(\.\d+)?/g,""))}b=this._getAdReportData(a);c=encodeURIComponent(c);var d=this._getPipeParams(a,
!1);c=this.adsData[a].adConfig._interactionsStrPipe+"$$"+b+c+"$$"+d;this.adsData[a].delayIntReport?this.adDataParamsQueue[a].push(c):this._reportServer(c,!0)},_handleSpecialInteractions:function(a,b,c){var d=this._getCounterInteraction(a,b);a=d.interactionData;this._handleUserInteraction(b,a);switch(a.reportingName){case EBG.VideoInteraction.STARTED:d.unique&&(void(""),this._reportUniqueVideoStarted(b));
this.adsData[b].isUserInteractionOccur&&(void(""),this._reportUserInitatedVideo(b,c));break;case EBG.VideoInteraction.FULLSCREEN_START:if(this._isRunningVideoAsset(b,!1))switch(d=this._getTimerInteraction(EBG.VideoInteraction.VIDEO_PLAY_DURATION,b),d=d.getType(),d){case EBG.DurationInteraction.TIMER:this.startTimer(EBG.VideoInteraction.FULLSCREEN_DURATION,b,c);this.stopTimer(EBG.VideoInteraction.VIDEO_PLAY_DURATION,
b,c);break;case EBG.DurationInteraction.AGGREGATE:this.startAggregate(EBG.VideoInteraction.FULLSCREEN_DURATION,b,c),this.stopAggregate(EBG.VideoInteraction.VIDEO_PLAY_DURATION,b,c)}break;case EBG.VideoInteraction.FULLSCREEN_END:if(this._isRunningVideoAsset(b,!0))switch(d=this._getTimerInteraction(EBG.VideoInteraction.VIDEO_PLAY_DURATION,b),d=d.getType(),d){case EBG.DurationInteraction.TIMER:this.startTimer(EBG.VideoInteraction.VIDEO_PLAY_DURATION,b,c);this.stopTimer(EBG.VideoInteraction.FULLSCREEN_DURATION,
b,c);break;case EBG.DurationInteraction.AGGREGATE:this.startAggregate(EBG.VideoInteraction.VIDEO_PLAY_DURATION,b,c),this.stopAggregate(EBG.VideoInteraction.FULLSCREEN_DURATION,b,c)}break;case EBG.VideoInteraction.FULLPLAY:this.stopTimer(EBG.VideoInteraction.VIDEO_PLAY_DURATION,b,c)}this._handlePanelsViewed(b,a)},handleVideoInteraction:function(a,b,c,d,e){if(EBGInfra.isDefined(c)&&EBGInfra.notNull(c)){var f=this.adsData[b].videoState;f[c]||(f[c]=0);var g=!0,h=EBG.indexOfArray(EBG.VideoQuartiles,a);
-1!=h&&(h==f[c]?(EBG.log.debug(EBG.format("Got VideoInteraction:{0} in the right order ",a)),f[c]++):(EBG.log.warn(EBG.format("Got VideoInteraction:{0} not in the right order - ignored",a)),g=!1));g&&this.handleCounterInteraction(a,b,c,d,e)}else void("")},handleAllTimers:function(a,b,c){void("");a==EBG.Interactions.InteractionManager.HandleAllTimersOptions.PAUSE&&(this._pausedTimers=[]);var d=
new EBG.Events.Event(EBG.Events.EventNames.COLLECT_TIMERS);d.dispatcher=this;d.timing=EBG.Events.EventTiming.BEFORE;c&&this.adsData.hasOwnProperty(c)&&(d.eventData={adUId:c});EBG.eventMgr.dispatchEvent(d);for(var e in this.adsData)if(this.adsData.hasOwnProperty(e)&&!(c&&c!=e||this.adsData[e].isUnloadHandled)){d=this.adsData[e];var f=d[EBG.Interactions.InteractionTypes.TIMER];f&&this._handleTimers(f,a,e);if(d.assetsTimers)for(var g in d.assetsTimers)d.assetsTimers.hasOwnProperty(g)&&this._handleTimers(d.assetsTimers[g],
a,e,g);d=new EBG.Events.Event(EBG.Events.EventNames.COLLECT_TIMERS);d.dispatcher=this;d.timing=EBG.Events.EventTiming.ONTIME;c&&(d.eventData={adUId:c});EBG.eventMgr.dispatchEvent(d);a===EBG.Interactions.InteractionManager.HandleAllTimersOptions.REPORT&&(d=0<=this._seqTimersReportData.index,b=EBG.isBool(b)?b:!0,void(""),!b&&this.adsData[e].adConfig&&navigator&&navigator.sendBeacon&&!EBG.isMRAID()?this.reportInteractionQueues(b,d,!0):this.reportInteractionQueues(b,d))}EBG.log.endGroup()},
_handleTimers:function(a,b,c,d){for(var e in a)if(a.hasOwnProperty(e)){var f=a[e];if(f.isRunning()||f.isFinished())switch(b){case EBG.Interactions.InteractionManager.HandleAllTimersOptions.REPORT:var g=new EBG.Events.Event(EBG.Events.EventNames.HANDLE_TIMER_INTERACTION);g.dispatcher={_adConfig:{rnd:EBG.Ads.Ad.Fn.getRandFromAdUId(c)}};g.timing=EBG.Events.EventTiming.BEFORE;g.eventData={interaction:f};if(EBG.eventMgr.dispatchEvent(g))return;var h=this.adsData[c].adConfig;(f=f.interactionData.isPanel&&
f.interactionData.assetID?f.handle(f.interactionData.assetID,h):f.handle(d,h))&&this.adsIntQueues[c].push(f);g.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(g);break;case EBG.Interactions.InteractionManager.HandleAllTimersOptions.PAUSE:f.stop();this._pausedTimers.push(f);break;case EBG.Interactions.InteractionManager.HandleAllTimersOptions.HANDLE_IDLE:f.increaseIdleDuration(this.idleManager.currentIdleDuration)}}},pauseAllTimers:function(){void("");
var a=this.handleAllTimers(EBG.Interactions.InteractionManager.HandleAllTimersOptions.PAUSE,!0);EBG.log.endGroup();return a},resumeAllTimers:function(){void("");if(null==this._pausedTimers)void("");else{for(var a=0;a<this._pausedTimers.length;a++)this._pausedTimers[a].start();this._pausedTimers=null}EBG.log.endGroup()},reportInteractionQueues:function(a,b,c){void("");
if(!(EBG.getTime()>EBG.Interactions.InteractionManager.INTERACTION_THRESHOLD_SEC)){a=EBG.isBool(a)?a:!0;b=EBG.isBool(b)?b:!1;void("");var d={},e={},f;for(f in this.adsData)if(this.adsData.hasOwnProperty(f)){var g=this.adsIntQueues[f];if(!this.adsData[f].delayIntReport&&this.adsData[f].adConfig.Purposes.Measurements){for(var h=this.adDataParamsQueue[f];h.length;)this._reportServer(h[0],!0),h.shift();for(;g.length;){h=this._getAdReportData(f);for(var k=this.adsData[f].adConfig._interactionPipe,
l=0,m=this._isUnloadHandled||b?g.length:EBG.Interactions.InteractionManager.intStackLength,p=0;p<g.length&&p<m;p++)h+=g[p],l++;for(p=0;p<l;p++)g.shift();this._isUnloadHandled?(l=d[k]?d[k]:"",""!=l&&(l+="|"),e[k]||(e[k]=this._getPipeParams(f,b)),l+=h,d[k]=l):(h=k+h+this._getPipeParams(f,b),this._reportServer(h,a,c))}}}for(var n in d)this._reportServer(n+d[n]+(e[n]?e[n]:""),a,c)}},_reportServer:function(a,b,c){if(2!=EBG.isTestMode)if(!EBG.isPreview||EBG.isGlobalDef("gfEbForceReportInt")){void(""+
a);if(!window.navigator||!EBG.isFunc(navigator.sendBeacon)||EBG.isMRAID()||EBG.adaptor.browser.isiOS()&&!EBG.adaptor.browser.isMac())c=!1;c?EBG.adaptor.reportBeacon(a):EBG.adaptor.reportToRemoteServer(a,b);EBG.Autolina&&EBG.Autolina.report(a,EBG.Autolina.reportType.INTERACTION)}else void("")},_isReportDataInQueue:function(a,b){var c=!1;a=this.adsIntQueues[a];for(var d=0;d<a.length;d++)if(a[d]===b){c=!0;break}return c},_getPipeParams:function(a,
b){var c="";a=this.adsData[a].adConfig;var d=a.usercookie;d&&(c+=EBG.format("&usercookie={0}",d));(d=a.optOut)&&(c+=EBG.format("&OptOut={0}",d));b&&(c+=EBG.format("&iseq={0}",this._seqTimersReportData.index));EBG.isGlobalDef("gfEbForceReportInt")&&(c+="&pr=1");c+=EBG.format("&rnd={0}",Math.random());EBG.adaptor.flash&&(c+=EBG.format("&flv={0}",EBG.adaptor.flash.version));EBG.isDefined(EBG.adaptor.getResolution)&&(c+=EBG.format("&res={0}",EBG.adaptor.getResolution()));EBGInfra.isDefinedNotNull(a.diAppId)&&
(c+="&diappid="+a.diAppId);a.ffs.CFF_SendGDPRForAll&&(EBGInfra.isDefinedNotNull(a.gdpr)&&(c+="&gdpr="+a.gdpr),EBGInfra.isDefinedNotNull(a.gdprconsent)&&(c+="&gdpr_consent="+a.gdprconsent),b=a.ffs&&a.ffs.CFF_SendUndefined,!b&&"undefined"!==typeof a.gdprpurposes||b)&&(c+="&gdprpurposes="+a.gdprpurposes);return c},_getAdReportData:function(a){void("");var b=this.adsData[a].adConfig,c=EBG.Interactions.InteractionManager.charAdFieldsDelimeter;a=EBG.format("{0}{1}{2}{3}{4}{5}{6}{7}{8}{9}{10}{11}{12}",
EBG.Ads.Ad.Fn.getAdIdFromAdUId(a),c,b.page,c,b.pluId,c,b.massVersioning.targetAudienceId,c,b.massVersioning.logDeliveryGroupId,c,EBG.Ads.Ad.Fn.getVersionToReport(b.massVersioning.adVersions),c,this.adsData[a].adConfig.sID);void("");EBG.log.endGroup();return a},_addSystemInteractions:function(a){a=a.uid;var b=new EBG.Interactions.CounterInteractionData(EBG.Interactions.SystemInts.USER_INTERACTION,EBG.Interactions.Categories.SYSTEM,a);b.numLeftToReport=1;b=new EBG.Interactions.CounterInteraction(b);
this.addInteraction(b);b=new EBG.Interactions.CounterInteractionData(EBG.Interactions.SystemInts.UNIQUE_VIDEO_STARTED,EBG.Interactions.Categories.VIDEO,a);b.numLeftToReport=1;b=new EBG.Interactions.CounterInteraction(b);this.addInteraction(b);b=new EBG.Interactions.CounterInteractionData(EBG.Interactions.SystemInts.DWELL_UNIQUE,EBG.Interactions.Categories.SYSTEM,a);b.reportImmediately=!0;b.numLeftToReport=1;b=new EBG.Interactions.CounterInteraction(b);this.addInteraction(b);b=new EBG.Interactions.CounterInteractionData(EBG.Interactions.SystemInts.REPLAY,
EBG.Interactions.Categories.SYSTEM,a);b=new EBG.Interactions.CounterInteraction(b);this.addInteraction(b);a=new EBG.Interactions.CounterInteractionData(EBG.Interactions.SystemInts.RICH_FLASH_PLAYED,EBG.Interactions.Categories.SYSTEM,a);a.numLeftToReport=1;a=new EBG.Interactions.CounterInteraction(a);this.addInteraction(a)},_reportUserInitatedVideo:function(a,b){this.handleVideoInteraction(EBG.VideoInteraction.USER_INITIATED_VIDEO,a,b)},_reportUserInteraction:function(a){this.handleCounterInteraction(EBG.Interactions.SystemInts.USER_INTERACTION,
a)},_reportUniqueVideoStarted:function(a){this.handleCounterInteraction(EBG.Interactions.SystemInts.UNIQUE_VIDEO_STARTED,a)},reportDwellUnique:function(a,b){b&&this.handleCounterInteraction(EBG.Interactions.SystemInts.DWELL_UNIQUE,a,null,!1)},reportRichFlashPlayed:function(a){this.handleCounterInteraction(EBG.Interactions.SystemInts.RICH_FLASH_PLAYED,a)},reportReplay:function(a){this.handleCounterInteraction(EBG.Interactions.SystemInts.REPLAY,a,0,EBG.ActionType.USER)},_getTimerInteraction:function(a,
b){a=a.toLowerCase();if(this.adsData[b]&&this.adsData[b][EBG.Interactions.InteractionTypes.TIMER]&&this.adsData[b][EBG.Interactions.InteractionTypes.TIMER][a])return void(""),this.adsData[b][EBG.Interactions.InteractionTypes.TIMER][a]},_subscribeToEvents:function(){var a=EBG.adaptor.supportsPageLoadEvents();if(a){void("");EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_BEFORE_UNLOAD,
this.unLoadHandler,this));EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_UNLOAD,this.unLoadHandler,this));EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_HIDE,this.unLoadHandler,this));EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.AD_UNLOAD,this.unLoadHandler,this));var b=function(c){"hidden"===document.visibilityState&&this.reportInteractionQueues()}.bind(this);window.addEventListener("visibilitychange",
b);EBG.setInterval(this,this.reportInteractionQueues,[],this._timedReport)}a&&!EBG.adaptor.browser.isMobile()||EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.IMPRESSION_SENT,this._startSequence,this))},_startSequence:function(){void("");this._setNextTimerSeq(!0)},_handleAllTimersSeq:function(){void("");var a=EBG.adaptor.browser.isMobile();EBG.adaptor.supportsPageLoadEvents();
this.reportInteractionQueues(!a);this._pausedTimers||(this.handleAllTimers(EBG.Interactions.InteractionManager.HandleAllTimersOptions.REPORT,!a),this.resumeAllTimers());this._setNextTimerSeq(!1);EBG.log.endGroup()},_setNextTimerSeq:function(a){a="undefined"!=typeof a&&a?this._seqTimersReportData.index=0:++this._seqTimersReportData.index;a<this._seqTimersReportData.intervals.length?(a=1E3*this._seqTimersReportData.intervals[a],void(""),
EBG.runTimed(this,this._handleAllTimersSeq,[],a)):void("")},unLoadHandler:function(a){if(!EBG.intMgr._isUnloadHandled){if(a&&a.name==EBG.Events.EventNames.AD_UNLOAD){var b=a.dispatcher._adConfig.uid;this.adsData[b].isUnloadHandled||(this.handleCounterInteraction(EBG.Interactions.SystemInts.END_OF_SESSION,b,null,null,null),this.handleAllTimers(EBG.Interactions.InteractionManager.HandleAllTimersOptions.REPORT,!1,b))}else{EBG.intMgr._isUnloadHandled=
!0;for(b in this.adsData)this.adsData.hasOwnProperty(b)&&!this.adsData[b].isUnloadHandled&&this.handleCounterInteraction(EBG.Interactions.SystemInts.END_OF_SESSION,b,null,null,a?null:{value:1});this.handleAllTimers(EBG.Interactions.InteractionManager.HandleAllTimersOptions.REPORT,!1)}this.adsData[b].isUnloadHandled=!0}},getAdDuration:function(a){var b=0;(a=this._getTimerInteraction(EBG.Interactions.SystemInts.AD_DURATION,a))&&(b=a.getElapsedTime());return b}};
EBG.declareClass(EBG.Interactions.InteractionManager,EBG.Interactions.StdInteractionManager);EBG.DataProfile={GENERAL:"general",SERVING:"serving",URLS:"urls",USERINFO:"userInfo",PLATFORM:"platform",VISIBILITY:"visibility",FRAUD:"fraud",ERROR:"error",INTERACTION:"interaction",DEBUG:"debug"};
EBG.DataPipe=function(a,b,c){this._profile=this._completeProfile;this._firstTickDelay=5E3;this._buckets={};this.dTime=a||0;this.pTime=b||0;this.exscope=c;this._data={general:{}};this._subscribeToUnloadEvents();EBG.runTimed(this,this._tick,[],this._firstTickDelay)};
EBG.DataPipe.prototype={_tickCount:0,_tickDelay:1,_maxTicks:1,_unloadHandled:!1,_completeProfile:{general:{sid:!0,srcv:!0,dpv:!0,ctick:!0,ctime:!0,tzoff:!0,adid:!0,pid:!0,cid:!0,advid:!0,siteid:!0,AgencyID:!0,src:!0},serving:{frmt:!1,sdi:!1,imgad:!1,prtcl:!1,srvmd:!1,inapp:!1,env:!1,dt:!1,rdi:!1,cimp:!1,cb:!1,aie:!1,size:!1,loc:!1,afma:!1,mraid:!1,fmraid:!1,dmraid:!1,mraidv:!1,bi:!1,wvsb:!1,wvrf:!1,adkit:!1,sf:!1,sfv:!1,instream:!1,isplu:!1,cs:!1,csdi:!1,dlm:!1,preimg:!1,cltovl:!1},urls:{dmn:!1,turl:!1,
rurl:!1,pburl:!1,aorg:!1},userInfo:{geo:!1,ip:!1},platform:{os:!1,osv:!1,brsrc:!1,brsrv:!1,brsrt:!1,skype:!1},fraud:{bot:!1,injct:!1,stack:!1},visibility:{vsbp:!1,pct:!1,scrsr:!1,vsr:!1,vsri:!1,uvsr:!1,vsiab:!1,uvsiab:!1},error:{errnum:!1,errmsg:!1,errfunc:!1,errpos:!1,errstack:!1,srcv:!0,formatid:!0,templatename:!0,dtime:!0,srvmd:!1,adid:!0,pid:!0,cid:!0,advid:!0,siteid:!0,AgencyID:!0},interaction:{IntrN:!1,IntrT:!1,Usr:!1,ua:!1},debug:{}},createBucket:function(a,b,c){this._buckets[a]={profile:b,
url:c}},isBucketExists:function(a){return!!this._buckets[a]},_clear:function(){for(var a in this._profile){var b=void 0,c=this._profile[a];for(b in c)!this._profile[a][b]&&this._data[a]&&(this._data[a][b]=null,delete this._data[a][b])}},_post:function(){var a={x:function(){if("undefined"!==typeof XMLHttpRequest)return new XMLHttpRequest;for(var b=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],c,d=0;d<b.length;d++)try{c=new ActiveXObject(b[d]);
break}catch(e){}return c},get:function(b,c,d){try{if(c&&c.sid){b=b+"?json="+JSON.stringify(c);var e=a.x();e.open("GET",b,d);e.send(null)}}catch(f){}},post:function(b,c,d){try{if(c&&c.sid){var e=a.x();e.open("POST",b,d);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");e.send(JSON.stringify(c))}}catch(f){}}};return window.mraid?a.get:a.post}(),_tick:function(){this._unloadHandled||(++this._tickCount,this.flush(),this._tickCount<this._maxTicks&&(EBG.runTimed(this,this._tick,[],
1E3*Math.pow(2,this._tickDelay)),this._tickDelay++))},send:function(a,b,c){if(2!==EBG.isTestMode&&!EBG.isPreview&&(c=c||{},this._profile[a])){this._data[a]=this._data[a]||{};for(var d in b)if(("debug"==a||d in this._profile[a])&&EBG.isDefinedNotNull(b[d])){if(EBG.isArray(b[d])){var e=[];for(var f=0;f<b[d].length;++f)e.push(encodeURIComponent(b[d][f]))}else e=encodeURIComponent(b[d]);this._data[a][d]=e}if(c.constant)for(d in this._data[a])this._profile[a][d]=!0;c.flush&&this.flush()}},flush:function(){for(var a in this._buckets)if(this._buckets.hasOwnProperty(a)){var b=
this._buckets[a],c=b.profile;if((b=b.url)&&c){this._data.general.ctick=EBG.getCtick(this.dTime,this.pTime,this.exscope);for(var d={},e=0;e<c.length;++e){var f=c[e],g;for(g in this._data[f])d[g]=this._data[f][g]}this._post(b,d,!this._unloadHandled)}}this._clear()},sendNow:function(a,b){if(2!==EBG.isTestMode&&!EBG.isPreview){for(var c in this._data.general)this._data.general.hasOwnProperty(c)&&(b[c]=this._data.general[c]);b.ctick=EBG.getCtick(this.dTime,this.pTime,this.exscope);this._post(a,b,!this._unloadHandled)}},
_subscribeToUnloadEvents:function(){var a=this._unloadHandler.bind(this),b=EBG.Events,c=b.EventNames;b=b.EventSubscription;EBG.eventMgr.subscribeToEvent(new b(c.PAGE_BEFORE_UNLOAD,a,this));EBG.eventMgr.subscribeToEvent(new b(c.PAGE_UNLOAD,a,this));EBG.eventMgr.subscribeToEvent(new b(c.PAGE_HIDE,a,this))},_unloadHandler:function(){this._unloadHandled||(this._unloadHandled=!0,this._tickCount<this._maxTicks&&(this._tickCount=this._maxTicks,this.flush()))}};
EBG.DataPipeManager=function(a,b,c){this.dTime=a||0;this.pTime=b||0;this.exscope=c};EBG.DataPipeManager.prototype={_pipes:{},createPipe:function(a){var b=new EBG.DataPipe(this.dTime,this.pTime,this.exscope);this._pipes[a]=b;b.send(EBG.DataProfile.GENERAL,{sid:a,dpv:2,src:"v2"})},getPipe:function(a){this._pipes[a]||this.createPipe(a);return this._pipes[a]},send:function(a,b,c,d){(a=this._pipes[a])&&a.send(b,c,d)}};EBG.declareNamespace("Positioning");EBG.Positioning.PositionManager=function(){};
EBG.Positioning.PositionManager.prototype={isVisibile:function(a,b,c){try{void("");var d=0<this.calculateVisibilityPercentage(a,b,c)?!0:!1;EBG.log.endGroup();return d}catch(e){void("")}},calculateVisibilityPercentage:function(a,b,c,d,e,f,g){try{void("");var h=0,k=0,l=0,m=!(EBG.adaptor.getDisplayWin()!=top&&g==EBG.Adaptors.ServingMode.FRIENDLY_IFRAME),
p=EBG.adaptor.getScrollLeftTop(m,g),n=EBG.adaptor.getViewPortMetrics(m,f,g),t=this.calculateRightBottowCoordinate(p,n.Width,n.Height),u=EBG.adaptor.getPositioningById(a,!m,g);if(null!=u){a={X:0,Y:0};try{!m&&window.frameElement&&(a=EBG.adaptor.getPositioningByElement(window.frameElement,!1,g))}catch(r){a={X:0,Y:0},void("")}u.X+=a.X;u.Y+=a.Y;"undefined"!=typeof d&&(u.X+=d);"undefined"!=typeof e&&(u.Y+=e);var q=this.calculateRightBottowCoordinate(u,
b,c);l=b*c;k=this.calculateVisibleArea(p,t,u,q);h=l?k/l:0}EBG.log.endGroup();return h}catch(r){void("")}},calculateRightBottowCoordinate:function(a,b,c){var d={X:0,Y:0};d.X=a.X+b;d.Y=a.Y+c;return d},calculateVisibleArea:function(a,b,c,d){try{void("");var e=0,f=0;if(c.Y==d.Y&&c.X==d.X||b.X<=a.X||b.Y<=a.Y)return 0;c.X<=a.X&&a.X<=d.X?e=b.X<=d.X?b.X-a.X:d.X-a.X:a.X<=c.X&&
c.X<=b.X&&(e=d.X>=b.X?b.X-c.X:d.X-c.X);c.Y<=a.Y&&a.Y<=d.Y?f=b.Y<=d.Y?b.Y-a.Y:d.Y-a.Y:a.Y<=c.Y&&c.Y<=b.Y&&(f=d.Y>=b.Y?b.Y-c.Y:d.Y-c.Y);EBG.log.endGroup();return e*f}catch(g){void("")}},getFullRectWithClip:function(a,b){var c=EBG.adaptor.getDisplayWin()===EBG.adaptor.getPageWin(),d=null;if(a){b=EBG.adaptor.getPositioningByElement(a,!c,b);d={width:a.offsetWidth,height:a.offsetHeight};a=a.style.clip;var e=c=0,f=d.height,g=d.width;""!=a&&(a=
a.substring(a.indexOf("(")+1).replace(/,/g,"").replace(/ /g,""),a=a.split("px"),e=parseInt(a[0]),g=parseInt(a[1]),f=parseInt(a[2]),c=parseInt(a[3]));d.left=b.X+c;d.top=b.Y+e;d.width-=d.width-g;d.width-=c;d.height-=d.height-f;d.height-=e;d.right=d.left+d.width;d.bottom=d.top+d.height}return d},isOverlapping:function(a,b,c){if(!a||0==a.offsetWidth&&0==a.offsetHeight||!b||0==b.offsetWidth&&0==b.offsetHeight)return!1;a=EBG.posHelper.getFullRectWithClip(a,c);b=EBG.posHelper.getFullRectWithClip(b,c);return!a||
!b||a.bottom<b.top||a.top>b.bottom||a.right<b.left||a.left>b.right?!1:!0}};EBG.declareClass(EBG.Positioning.PositionManager,null);EBG.declareNamespace("RichModules");EBG.RichModules.BasicVisibilityProvider=function(a,b,c){this._resObjId=a;this._res=EBG.adaptor.getElementById(a);this._adConfig=this.adConfig=b;this._options=c||{};this._subscribeToEvents();this._trackElementLocation()};EBG.RichModules.BasicVisibilityProvider._isAvailable=function(a){return!1};
EBG.RichModules.BasicVisibilityProvider.prototype={name:"Basic",_isStarted:!1,_calculateVisibilityPercentage:function(a){return 0},_getViewPortMetrics:function(){return null},_dispatchCheckVisibility:function(a){if(this._isStarted){var b=new EBG.Events.Event(EBG.Events.EventNames.VISIBILITY_CHECK);b.dispatcher=this;b.eventData=a;EBG.isObj(this._options.customData)&&(b.eventData.customData=this._options.customData);b.timing=EBG.Events.EventTiming.ONTIME;EBG.eventMgr.dispatchEvent(b)}},_dispatchVisibilityHidden:function(){var a=
new EBG.Events.Event(EBG.Events.EventNames.VISIBILITY_HIDDEN);a.dispatcher=this;a.timing=EBG.Events.EventTiming.ONTIME;EBG.eventMgr.dispatchEvent(a)},_subscribeToEvents:function(){var a=new EBG.Events.EventSubscription(EBG.Events.EventNames.EXPAND,function(b){b.eventData.props&&b.eventData.props.asset.id==this._resObjId&&this._trackElementLocation()},this);a.timing=EBG.Events.EventTiming.ONTIME;a.dispatcherFilters={"_adConfig.rnd":this.adConfig.rnd};EBG.eventMgr.subscribeToEvent(a)},updateResourceObjId:function(a){EBG.elementWatcher&&
EBG.elementWatcher.unwatch(null,this._res,this);this._resObjId=a;this._res=EBG.adaptor.getElementById(a);this._trackElementLocation()},_isVisible:function(){return!1},_calculateVisibilityResult:function(){var a={};try{a.assetId=this._resObjId,a.percentage=this._calculateVisibilityPercentage(),a.viewPort=this._getViewPortMetrics()}catch(b){void("")}return a},start:function(){this._isStarted=!0;this._triggerVisibilityCheck();var a=10;(function(){a--&&
(this._triggerVisibilityCheck(),EBG.runTimed(this,arguments.callee,[],1E3))}).apply(this)},_trackElementLocation:function(){if(this._res=EBG.adaptor.getElementById(this._resObjId)){var a={clip:!0,relativeToWindow:!1};EBG.elementWatcher&&EBG.elementWatcher.watch(this._res,this._elemWatcherCallback,this,null,a)}else EBG.runTimed(this,this._trackElementLocation,[],500)},_elemWatcherCallback:function(a){this.onElementMoved();null==a&&this._trackElementLocation()},_triggerVisibilityCheck:function(){var a=
this._calculateVisibilityResult();this._dispatchCheckVisibility(a)},onElementMoved:function(){}};EBG.declareClass(EBG.RichModules.BasicVisibilityProvider,null);EBG.declareNamespace("RichModules");EBG.RichModules.GeometricVisibilityProvider=function(a,b,c){EBG.callSuperConstructor(EBG.RichModules.GeometricVisibilityProvider,this,[a,b,c])};
EBG.RichModules.GeometricVisibilityProvider.prototype={name:"Geometric",_focusOnResourceElem:null,_justReceivedFocusOnPage:null,_reachedMaxAdDuration:!1,_calculateVisibilityPercentage:function(a){try{if(!EBG.adaptor.isPageVisible(this.adConfig.isInstream))return 0;a=a||{};var b=this._getAssetRect(a.resourceObjId||this._resObjId),c=this._getViewPortRect();b.top+=~~a.offsetY;b.bottom+=~~a.offsetY;b.left+=~~a.offsetX;b.right+=~~a.offsetX;EBG.isDefined(a.width)&&(b.width=a.width,b.right=b.left+a.width);
EBG.isDefined(a.height)&&(b.height=a.height,b.bottom=b.top+a.height);if(this._intersect(b,c)){var d=this._overlap(c,b);this._visibleRect=d;return~~(d.width*d.height/(b.width*b.height)*100)}return 0}catch(e){return 0}},_getAssetRect:function(a){a=EBG.isElementOrNode(a)?a:EBG.adaptor.getElementById(a);(a=EBG.adaptor.getBoundingClientRect(a,{clip:!0,relativeToTop:!0}))||(a={top:0,bottom:0,left:0,right:0,width:0,height:0});return a},_getViewPortMetrics:function(){var a=EBG.adaptor._getCurrentWindow(void 0,
this.adConfig.actualServingMode),b=EBG.adaptor.getWindowViewPortMetrics(a);!EBG.adaptor.browser.isFF()||"undefined"==typeof a.outerWidth||EBG.adaptor.serving.detectServingMode(!0)!=EBG.Adaptors.ServingMode.IFRAME||"undefined"!=typeof this.adConfig&&EBG.isDefined(this.adConfig.UiVz)&&this.adConfig.UiVz||EBG.iframeLocation||"undefined"==typeof this.adConfig||!this.adConfig.aiE||this.adConfig.aiE.iflExists||(b.Width=a.outerWidth,b.Height=a.outerHeight,EBG.isDefined(a.scrollMaxX)&&0<a.scrollMaxX&&EBG.isDefined(EBG.adaptor.scrollBarWidth)&&
0<EBG.adaptor.scrollBarWidth&&(b.Height-=EBG.adaptor.scrollBarWidth),EBG.isDefined(a.scrollMaxY)&&0<a.scrollMaxY&&EBG.isDefined(EBG.adaptor.scrollBarHeight)&&0<EBG.adaptor.scrollBarHeight&&(b.Width-=EBG.adaptor.scrollBarHeight));return b},_getViewPortRect:function(){var a=this._getViewPortMetrics();return{top:0,left:0,right:a.Width,bottom:a.Height}},_overlap:function(a,b){var c={top:-1,right:-1,bottom:-1,left:-1};if(!this._intersect(a,b))return c;c.top=Math.max(a.top,b.top);c.left=Math.max(a.left,
b.left);c.right=Math.min(a.right,b.right);c.bottom=Math.min(a.bottom,b.bottom);c.width=c.right-c.left;c.height=c.bottom-c.top;return c},_intersect:function(a,b){return!(b.left>a.right||b.right<a.left||b.top>a.bottom||b.bottom<a.top)},_isVisible:function(a){a=a||{};var b=EBG.adaptor.getBoundingClientRect(this._res,{clip:!0});return!!this._calculateVisibilityPercentage({resourceObjId:a.resourceObjId||this._resObjId,width:a.width||b.width,height:a.height||b.height,offsetX:a.offsetX||this.adConfig.offsetX,
offsetY:a.offsetY||this.adConfig.offsetY,isUIVZ:a.isUIVZ||this.adConfig.UiVz,actualServingMode:a.actualServingMode||this.adConfig.actualServingMode})},_subscribeToEvents:function(){try{void("");EBG.callSuperFunction(EBG.RichModules.GeometricVisibilityProvider,this,"_subscribeToEvents");EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_RESIZE,this._pageResizeHandler,this));EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_SCROLL,
this._pageScrollHandler,this));if(!EBG.adaptor._getVisibilityEventName()||EBG.adaptor.browser.isAndroidNative()&&4.4>EBG.adaptor.browser.getVersion())EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_FOCUS,this._pageFocusHandler,this)),EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_BLUR,this._pageBlurHandler,this)),this._subscribeToElementEvents();var a=new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_HIDDEN,
this._pageHiddenHandler,this);a.isDocumentEvent=!0;EBG.eventMgr.subscribeToEvent(a);a=new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_VISIBLE,this._pageVisibleHandler,this);a.isDocumentEvent=!0;EBG.eventMgr.subscribeToEvent(a);EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.RICH_FLASH_PLAYED,this.onChange,this))}catch(b){void("")}},_subscribeToElementEvents:function(){var a=this,b=function(){a._resourceBlurHandler()},
c=new EBG.Events.EventSubscription("focus",function(){a._resourceFocusHandler()},this);c.isElementEvent=!0;c.elementId=this._resObjId;EBG.eventMgr.subscribeToEvent(c);EBG.adaptor.browser.isIE()&&this.actualServingMode!=EBG.Adaptors.ServingMode.SCRIPT&&(c=new EBG.Events.EventSubscription("blur",b,this),c.isElementEvent=!0,c.elementId=this._resObjId,EBG.eventMgr.subscribeToEvent(c))},updateResourceObjId:function(a){EBG.callSuperFunction(EBG.RichModules.GeometricVisibilityProvider,this,"updateResourceObjId",
[a]);EBG.adaptor._getVisibilityEventName()||this._subscribeToElementEvents()},_pageVisibleHandler:function(){void("");this._triggerVisibilityCheck()},_pageHiddenHandler:function(){this._dispatchVisibilityHidden();if(this.adConfig.visibility.mode==EBG.VisibilityMode.ENHANCED_MODE){var a=this._getViewPortMetrics();this._dispatchCheckVisibility({percentage:0,viewPort:a})}},_resourceFocusHandler:function(){this._focusOnResourceElem=
!0;EBG.runTimed(this,function(){this._focusOnResourceElem=!1},[],60);void("");this._pageFocusHandler()},_resourceBlurHandler:function(){void("");EBG.runTimed(this,function(){this._justReceivedFocusOnPage||this._focusOnResourceElem||(void(""),this._pageBlurHandler())},[],30)},_pageFocusHandler:function(){void("");
this._justReceivedFocusOnPage=!0;EBG.runTimed(this,function(){this._justReceivedFocusOnPage=!1},[],60);this._triggerVisibilityCheck()},_pageBlurHandler:function(){EBG.runTimed(this,function(){this._justReceivedFocusOnPage||this._getAdHasFocus()?void(""):(void(""),this._pageHiddenHandler())},[],30)},
_getAdHasFocus:function(){for(var a=this._getAllAdVisibilityProviders(),b=0;b<a.length;b++)if(a[b]._focusOnResourceElem)return void(""),!0;void("");return!1},_getAllAdVisibilityProviders:function(){var a=[],b=EBG.ads[this._adConfig.uid],c;for(c in b)b.hasOwnProperty(c)&&b[c]instanceof EBG.RichModules.VisibilityManager&&b[c]._visibilityProvider&&
a.push(b[c]._visibilityProvider);return a},_pageScrollHandler:function(){this._triggerVisibilityCheck()},_pageResizeHandler:function(){if(!this._resizeTimeOut){var a=this;this._resizeTimeOut=setTimeout(function(){a._resizeTimeOut=null;a._triggerVisibilityCheck()},100)}},_maxAdDurationHandler:function(){this._reachedMaxAdDuration=!0;void("")},start:function(){EBG.callSuperFunction(EBG.RichModules.GeometricVisibilityProvider,this,"start")},onElementMoved:function(){EBG.callSuperFunction(EBG.RichModules.GeometricVisibilityProvider,
this,"onElementMoved");this._triggerVisibilityCheck()},onChange:function(){this._triggerVisibilityCheck()},_calculateVisibilityResult:function(){var a=EBG.callSuperFunction(EBG.RichModules.GeometricVisibilityProvider,this,"_calculateVisibilityResult");a.visibleRect=this._visibleRect;return a}};EBG.declareClass(EBG.RichModules.GeometricVisibilityProvider,EBG.RichModules.BasicVisibilityProvider);
EBG.RichModules.MouseVisibilityProvider=function(a,b,c){EBG.callSuperConstructor(EBG.RichModules.MouseVisibilityProvider,this,[a,b,c]);try{this._subscribeToEvents();this._scrollWidth=EBG.adaptor.getScrollerWidth();var d=this.adConfig.displayWin||EBG.adaptor.getDisplayWin();this._screenResolution={width:d.screen.availWidth,height:d.screen.availHeight};this._screenOriginalResolution={width:d.screen.availWidth,height:d.screen.availHeight};this._browserStateSupported()||(this._resolutionBaseScreenSize=
this._resolutionToScreenSize(this._screenResolution),this._resourceInitialPosition={top:d.screenTop,left:d.screenLeft});var e=this._getDimensions();this._resourceFullSize=e.width*e.height;this._mouseMoveEventInvoker()}catch(f){void(""+f.description)}};
EBG.RichModules.MouseVisibilityProvider.prototype={name:"Mouse",isTimedBaseVisibility:!0,_isStarted:!1,_resObj:null,_lastViewPort:null,_resourceRect:null,_resourceFullSize:null,_screenResolution:null,_screenOriginalResolution:null,_screenInitialPosition:{top:0,left:0},_resolutionBaseScreenSize:null,_intervalId:null,_calculateVisibilityPercentage:function(){if(!this._isReady)return-1;var a=this._getViewPortRect(),b=this._resourceRect;if(!a||!b)return-1;var c=0;EBG.adaptor.isPageVisible()&&(c=this._getDimensions(),
this._resourceFullSize=c.width*c.height,c=EBG.posHelper.calculateVisibleArea({X:a.left,Y:a.top},{X:a.right,Y:a.bottom},{X:b.left,Y:b.top},{X:b.right,Y:b.bottom})/this._resourceFullSize*100);return c},_calcResourceRect:function(a){var b;if(8==EBG.adaptor.browser._browserVer&&8==EBG.adaptor.browser.getDocumentMode()){var c=(b=EBG.adaptor.getElementById(this._resObjId))&&b.getBoundingClientRect?b.getBoundingClientRect():{top:0,left:0};b=a.screenY-(a.clientY-c.top);a=a.screenX-(a.clientX-c.left)}else b=
a.screenY-a.offsetY,a=a.screenX-a.offsetX;c=this._getDimensions();return{top:b,left:a,bottom:b+c.height,right:a+c.width}},_getViewPortRect:function(){var a=null,b=this._getWindowRect();b&&(a={top:0>b.top?0:b.top,left:0>b.left?0:b.left,bottom:b.bottom>this._screenResolution.height?this._screenResolution.height:b.bottom,right:b.right>this._screenResolution.width?this._screenResolution.width:b.right});return a},_getWindowRect:function(){var a=null,b=this.adConfig.displayWin||EBG.adaptor.getDisplayWin();
if(this._browserStateSupported()){var c=(a=this._isFullScreen(b))?0:6,d=b.screenX+c,e=b.screenY+70;a={top:e,left:d,bottom:e+b.outerHeight-this._scrollWidth-(a?0:70),right:d+b.outerWidth-this._scrollWidth+c}}else this._resolutionBaseScreenSize&&(b=this._getUnsupportedWindowTopLeft(b),a={top:b.top,left:b.left,bottom:b.top+this._resolutionBaseScreenSize.height,right:b.left+this._resolutionBaseScreenSize.width});return a},_getUnsupportedWindowTopLeft:function(a){var b={top:this._screenInitialPosition.top,
left:this._screenInitialPosition.left},c=0<a.screenLeft?a.screenLeft:0,d=c-this._resourceInitialPosition.left,e=(0<d?this._screenOriginalResolution.width-this._resourceInitialPosition.left%this._screenOriginalResolution.width:this._resourceInitialPosition.left%this._screenOriginalResolution.width)+1;Math.abs(d)>e&&0<=c&&c<this._screenResolution.width&&(e=(1+Math.floor(Math.abs(Math.abs(d)-e)/this._screenOriginalResolution.width))*this._screenOriginalResolution.width,b.left=0>d?b.left-e:b.left+e);
a=0<a.screenTop?a.screenTop:0;d=a-this._resourceInitialPosition.top;e=(0<d?this._screenOriginalResolution.height-this._resourceInitialPosition.top%this._screenOriginalResolution.height:this._resourceInitialPosition.top%this._screenOriginalResolution.height)+1;Math.abs(d)>e&&0<=a&&a<this._screenResolution.height&&(e=(1+Math.floor(Math.abs(Math.abs(d)-e)/this._screenOriginalResolution.height))*this._screenOriginalResolution.height,b.top=0>d?b.top-e:b.top+e);return b},_isFullScreen:function(a){return this._browserStateSupported()?
a.screenX+a.outerWidth==this._screenOriginalResolution.width:!0},_getViewPortMetrics:function(){var a=this._getViewPortRect();return a?{Width:a.right-a.left,Height:a.bottom-a.top}:null},_isVisible:function(){return!!this._calculateVisibilityPercentage()},_mouseMoveEventInvoker:function(){if((this._resObj=this._resObj?this._resObj:EBG.adaptor.getElementById(this._resObjId))&&this._resObj.parentNode&&this._resObj.parentNode.fireEvent){var a=this;this._resObj.parentNode.attachEvent("onmousemove",function(b){var c=
a._calcResourceRect(b),d=a._getViewPortRect();a._resourceRect||(a._screenInitialPosition.left=Math.floor(b.screenX/a._screenOriginalResolution.width)*a._screenOriginalResolution.width,a._screenInitialPosition.top=Math.floor((50<b.screenY?b.screenY-50:0)/a._screenOriginalResolution.height)*a._screenOriginalResolution.height);a._handleMultipleScreen(b);a._handleRecievedData(c,d)});this._intervalId=EBG.setInterval(this._resObj.parentNode,function(){this.fireEvent("onmousemove")},[],EBG.RichModules.VisibilityManager.VisibilityCheckInterval)}else EBG.runTimed(this,
this._mouseMoveEventInvoker,[],EBG.RichModules.VisibilityManager.VisibilityCheckInterval)},_handleMultipleScreen:function(a){var b=this._getWindowRect();if(b){if(a.screenY>this._screenOriginalResolution.height){var c=b.bottom>a.screenY?b.bottom:a.screenY;this._screenResolution.height<c&&(this._screenResolution.height=c)}a.screenX>this._screenOriginalResolution.width&&(a=b.right>a.screenX?b.right:a.screenX,this._screenResolution.width<a&&(this._screenResolution.width=a))}},_handleRecievedData:function(a,
b){if(!this._resourceRect||this._checkRectanglesDifferent(this._resourceRect,a,1)||this._checkRectanglesDifferent(this._lastViewPort,b,1))this._resourceRect=a,this._lastViewPort=b,this._triggerCalculation()},_checkRectanglesDifferent:function(a,b,c){for(var d in a)if(a.hasOwnProperty(d)&&Math.abs(a[d]-b[d])>c)return!0;return!1},_subscribeToEvents:function(){EBG.callSuperFunction(EBG.RichModules.BasicVisibilityProvider,this,"_subscribeToEvents");var a=new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_HIDDEN,
this._pageHiddenHandler,this);a.isDocumentEvent=!0;EBG.eventMgr.subscribeToEvent(a);a=new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_VISIBLE,this._pageVisibleHandler,this);a.isDocumentEvent=!0;EBG.eventMgr.subscribeToEvent(a)},_pageVisibleHandler:function(){void("");this._triggerVisibilityCheck()},_pageHiddenHandler:function(){void("");this._dispatchVisibilityHidden();
if(this.adConfig.visibility.mode==EBG.VisibilityMode.ENHANCED_MODE){var a=this._getViewPortMetrics();this._dispatchCheckVisibility({percentage:0,viewPort:a})}},_resolutionToScreenSize:function(a){var b={width:a.width,height:a.height};1680==a.width&&1050==a.height?b={width:1444,height:806}:1366==a.width&&768==a.height?b={width:1173,height:562}:1360==a.width&&768==a.height?b={width:1167,height:562}:1280==a.width&&1024==a.height?b={width:1097,height:785}:1280==a.width&&960==a.height?b={width:1097,height:730}:
1152==a.width&&864==a.height?b={width:985,height:645}:1024==a.width&&768==a.height?b={width:875,height:562}:800==a.width&&600==a.height&&(b={width:680,height:416});return b},_triggerCalculation:function(){if(this._isReady||this._isStarted&&this._resourceRect){this._isReady=!0;var a=this._calculateVisibilityResult();this._dispatchCheckVisibility(a)}},_getDimensions:function(){if(!this.adConfig.width||!this.adConfig.height||"100%"==this.adConfig.width||"100%"==this.adConfig.height){var a=EBG.adaptor.getElementById(this.adConfig.placeHolderId);
a=EBG.adaptor.getBoundingClientRect(a)||{width:0,height:0};return{width:a.width,height:a.height}}return{width:this.adConfig.width,height:this.adConfig.height}},_browserStateSupported:function(){return 9<=EBG.adaptor.browser._browserVer&&9<=EBG.adaptor.browser.getDocumentMode()},updateResourceObjId:function(a){this._resObj=null;this._intervalId&&EBG.clearInterval(this._intervalId);EBG.callSuperFunction(EBG.RichModules.MouseVisibilityProvider,this,"updateResourceObjId",[a]);this._mouseMoveEventInvoker()},
start:function(){EBG.callSuperFunction(EBG.RichModules.MouseVisibilityProvider,this,"start");this._isStarted=!0;this._triggerCalculation()}};EBG.declareClass(EBG.RichModules.MouseVisibilityProvider,EBG.RichModules.BasicVisibilityProvider);EBG.declareNamespace("RichModules");
EBG.RichModules.VisibilityManager=function(a,b,c){void("");this._adConfig=this.adConfig=a;this._resObjId=b;this._res=EBG.adaptor.getElementById(b);this.actualServingMode=this.adConfig.actualServingMode;this._averageLastCalcTime=(new Date).getTime();this._options=c||{};this._isPanel=this._options.isPanel;this._createIntMgrWrapper();this._dpm=EBG.dataPipeMgr.getPipe(this.adConfig.sID);this.checkVisibilityCounter=0;this._shouldInitialize()&&this._tryInitProvider();
EBG.log.endGroup()};EBG.RichModules.VisibilityManager.ThreholdType={IAB:0,Agency:1,Advertiser:2};EBG.RichModules.VisibilityManager.VisibilityCheckInterval=100;
EBG.RichModules.VisibilityManager.prototype={adConfig:null,_resObjId:null,_visibilityData:null,_visRecordable:!1,_lastVisPercentage:0,_lastVisViewPort:null,_lastVisRect:null,_averageVisibility:0,_averageScreenShare:0,_averageAdDuration:0,_averageLastCalcTime:null,_adCoveragePercentage:0,actualServingMode:EBG.Adaptors.ServingMode.SCRIPT,_visibilityProvider:null,_availableVisibilityProviders:"GeometricVisibilityProvider SafeFrameVisibilityProvider IntersectionObserverVisibilityProvider MouseVisibilityProvider GridVisibilityProvider FFVisibilityProvider MraidVisibilityProvider".split(" "),
_visibilityProviderName:null,_providersAvailability:{GeometricVisibilityProvider:function(a){var b=!0,c=a.actualServingMode==EBG.Adaptors.ServingMode.IFRAME,d=EBG.Initializer._getAdClass({tn:a.templateName}),e=!d.requiresIframeBust&&!a.UiVz;a=d.requiresIframeBust&&!EBG.iframeLocation&&a.aiE&&!a.aiE.iflExists;if(c&&(e||a)||EBG.adaptor.isInApp())b=!1;return b},IntersectionObserverVisibilityProvider:function(a){return window.IntersectionObserver&&!EBG.adaptor.isInApp()||a.actualServingMode==EBG.Adaptors.ServingMode.IFRAME&&
window.context&&context.observeIntersection&&EBG.isFunc(context.observeIntersection)&&"Html5ExpBanner"!=a.templateName},FFVisibilityProvider:function(a){return a.actualServingMode==EBG.Adaptors.ServingMode.IFRAME&&EBG.isDefined(window.mozInnerScreenY)&&EBG.isDefined(window.mozInnerScreenX)},GridVisibilityProvider:function(a){a=!1;var b=EBG.adaptor.browser.getDocumentMode()||5;EBG.adaptor.browser.isIE()&&10<b&&(a=!0);return a},MouseVisibilityProvider:function(a){a=!1;var b=EBG.adaptor.browser.getDocumentMode()||
5;EBG.adaptor.browser.isIE()&&11>b&&11>EBG.adaptor.browser._browserVer&&(a=!0);return a},SafeFrameVisibilityProvider:function(a){return!!EBG.adaptor.isSafeFrame()},MraidVisibilityProvider:function(a){var b=a.actualServingMode==EBG.Adaptors.ServingMode.IFRAME;return EBG.adaptor.isInApp()&&!b?(a.UiVz=!1,!0):!1}},_init:function(a){this._visibilityProvider=new (a||window).EBG.RichModules[this._visibilityProviderName](this._resObjId,this._adConfig,this._options);this._dpm.send(EBG.DataProfile.VISIBILITY,
{vsbp:this.getVisibilityProviderNum()});this.adConfig.impressionSent||EBG.isPreview?this._start():(a=new EBG.Events.EventSubscription(EBG.Events.EventNames.IMPRESSION_SENT,this._start,this),a.dispatcherFilters={"_adConfig.rnd":this._adConfig.rnd},a.timing=EBG.Events.EventTiming.ONTIME,EBG.eventMgr.subscribeToEvent(a))},_start:function(){this._initializeVisibilityData();this._subscribeToEvents();this._visRecordable=!0;this._reportVisibilityRecordable();var a=function(){this._visibilityProvider.start()};
this.adConfig.adStarted?a.apply(this):(a=new EBG.Events.EventSubscription(EBG.Events.EventNames.AD_START,a,this),a.timing=EBG.Events.EventTiming.ONTIME,EBG.eventMgr.subscribeToEvent(a))},_createIntMgrWrapper:function(){var a=function(){};this._intMgrWrapper={};for(var b=["handleCounterInteraction","updateTimer","startTimer","stopTimer","clearTimer"],c=0;c<b.length;c++)this._intMgrWrapper[b[c]]=this._options.muteInteractions?a:function(d){return function(){return EBG.intMgr[d].apply(EBG.intMgr,arguments)}}(b[c])},
checkVisibility:function(a){a=a?EBG.cloneObj(a):{};EBG.isDefined(a.percentage)&&EBG.isNumber(a.percentage)||(a.percentage=this.calculateVisibilityPercentage());if(EBG.isDefinedNotNull(a.percentage)&&0<=a.percentage){"viewPort"in a||(a.viewPort=this.getViewPortMetrics());this._adCoveragePercentage&&(a.percentage=Math.max(a.percentage-this._adCoveragePercentage,0));this._res=EBG.adaptor.getElementById(this._resObjId);try{"visible"!=window.getComputedStyle(this._res).getPropertyValue("visibility")?(a.percentage=
0,3>=++this.checkVisibilityCounter&&(EBG.runTimed(this,this.checkVisibility,[],500),1==this.checkVisibilityCounter&&EBG.runTimed(this,function(){this.checkVisibilityCounter=0},[],3E3))):this.checkVisibilityCounter=0}catch(c){}void(""+this._resObjId);this.adConfig.visibility.mode==EBG.VisibilityMode.ENHANCED_MODE&&this._calculateAverages(a);for(var b in EBG.RichModules.VisibilityManager.ThreholdType)EBG.RichModules.VisibilityManager.ThreholdType.hasOwnProperty(b)&&
this._visibilityData[EBG.RichModules.VisibilityManager.ThreholdType[b]]&&this._visibilityData[EBG.RichModules.VisibilityManager.ThreholdType[b]].isActive&&this._execCheckVisibility(a.percentage,EBG.RichModules.VisibilityManager.ThreholdType[b])}},updateResourceObjId:function(a){this._visibilityProvider&&a?(this._collectTimersHandler(),this._resObjId=a,this._res=EBG.adaptor.getElementById(a),this._visibilityProvider.updateResourceObjId(a)):a&&(this._resObjId=a,this._res=EBG.adaptor.getElementById(a))},
_shouldInitialize:function(){var a=EBG.Initializer._getAdClass({tn:this.adConfig.templateName});return this.adConfig.actualServingMode!=EBG.Adaptors.ServingMode.IFRAME||a.requiresIframeBust||!this.adConfig.UiVz||EBG.adaptor.isInApp()?this.adConfig.ffs.CFF_DisableVisInit?this.adConfig.visibility.mode!=EBG.VisibilityMode.DEFAULT_MODE:!0:!1},_tryInitProvider:function(){(this._visibilityProviderName=this._getVisibilityProvider(this._resObjId,this.adConfig))?(this._adConfig.visibility.isAvailable=!0,EBG.RichModules[this._visibilityProviderName]?
this._init():EBG.adaptor.loadModule(this._visibilityProviderName,this._adConfig,this._init,this)):(this._adConfig.visibility.isAvailable=!1,void(""))},_getVisibilityProvider:function(a,b){for(a=0;a<this._availableVisibilityProviders.length;a++){var c=this._availableVisibilityProviders[a];if(this._providersAvailability[c]&&this._providersAvailability[c](b,this))return c}return null},calculateVisibilityPercentage:function(a,b,c,d,e,f,g){var h=0;EBG.adaptor.isPageVisible(this.adConfig.isInstream)?
this._visibilityProvider&&(h=this._visibilityProvider._calculateVisibilityPercentage({resourceObjId:a,width:b,height:c,offsetX:d,offsetY:e,isUIVZ:f,actualServingMode:g})):h=0;return h},isVisibile:function(a,b,c){var d=!1;if(EBG.adaptor.isPageVisible(this.adConfig.isInstream)&&this._visibilityProvider)try{void("");var e=!!this._visibilityProvider._isVisible({resourceObjId:a,width:b,height:c});EBG.log.endGroup();d=e}catch(f){void("",
f)}return d},isIABVisibile:function(){return this.calculateVisibilityPercentage()>=this.adConfig.visibility.iabMinSurface},getViewPortMetrics:function(){var a=null;this._visibilityProvider&&(a=this._visibilityProvider._getViewPortMetrics());return a},_subscribeToEvents:function(){void("");try{void("");var a=new EBG.Events.EventSubscription(EBG.Events.EventNames.VISIBILITY_CHECK,this._visibilityCheckHandler,
this);a.dispatcherFilters={"adConfig.rnd":this.adConfig.rnd};a.timing=EBG.Events.EventTiming.ONTIME;EBG.eventMgr.subscribeToEvent(a);this.adConfig.visibility.mode==EBG.VisibilityMode.ENHANCED_MODE&&(a=new EBG.Events.EventSubscription(EBG.Events.EventNames.COLLECT_TIMERS,this._collectTimersHandler,this),a.timing=EBG.Events.EventTiming.BEFORE,EBG.eventMgr.subscribeToEvent(a));var b=new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_HIDDEN,this._stopTimersHandler,this);b.isDocumentEvent=!this._adConfig.isAMP;
EBG.eventMgr.subscribeToEvent(b);b=new EBG.Events.EventSubscription(EBG.Events.EventNames.VISIBILITY_HIDDEN,this._stopTimersHandler,this);EBG.eventMgr.subscribeToEvent(b);b=new EBG.Events.EventSubscription(this._isPanel?"P":""+EBG.Events.EventNames.AD_STACKING,this._adStackingHandler,this);b.dispatcherFilters={"_adConfig.rnd":this.adConfig.rnd};EBG.eventMgr.subscribeToEvent(b);b=new EBG.Events.EventSubscription(EBG.Events.EventNames.EXPAND,function(c){(c.eventData==this.adConfig.panelName||c.eventData.props&&
c.eventData.props.asset.id==this._resObjId||c.eventData.props&&c.eventData.props.panel.id==this._resObjId)&&this.checkVisibility()},this);b.dispatcherFilters={"_adConfig.rnd":this.adConfig.rnd};b.timing=EBG.Events.EventTiming.AFTER;EBG.eventMgr.subscribeToEvent(b);b.timing=EBG.Events.EventTiming.BEFORE;EBG.eventMgr.subscribeToEvent(b);b=new EBG.Events.EventSubscription(EBG.Events.EventNames.ELEMENT_SHOWN,function(){this.checkVisibility()},this);b.dispatcherFilters={"_adConfig.rnd":this.adConfig.rnd};
b.timing=EBG.Events.EventTiming.AFTER;EBG.eventMgr.subscribeToEvent(b);b=new EBG.Events.EventSubscription(EBG.Events.EventNames.ELEMENT_HIDDEN,function(){this.checkVisibility()},this);b.dispatcherFilters={"_adConfig.rnd":this.adConfig.rnd};b.timing=EBG.Events.EventTiming.AFTER;EBG.eventMgr.subscribeToEvent(b);b=new EBG.Events.EventSubscription(EBG.Events.EventNames.COLLAPSE,function(c){(c.eventData==this.adConfig.panelName||c.eventData.props&&c.eventData.props.asset.id==this._resObjId||c.eventData.props&&
c.eventData.props.panel.id==this._resObjId)&&this.stopMeasureVisibility()},this);b.timing=EBG.Events.EventTiming.BEFORE;b.dispatcherFilters={"_adConfig.rnd":this.adConfig.rnd};EBG.eventMgr.subscribeToEvent(b)}catch(c){void("")}},_adStackingHandler:function(a){this._adCoveragePercentage=a.eventData.percentage;this.checkVisibility()},_visibilityCheckHandler:function(a){EBG.isDefined(a)&&EBG.isDefined(a.eventData)&&a.dispatcher===this._visibilityProvider&&
this.checkVisibility(a.eventData)},_initializeVisibilityData:function(){this._visibilityData=[];this._visibilityData[EBG.RichModules.VisibilityManager.ThreholdType.IAB]={minSurface:this.adConfig.visibility.iabMinSurface,minDuration:this.adConfig.visibility.iabMinDuration,minLargeSurface:this.adConfig.visibility.iabMinLargeSurface,minLargeDuration:this.adConfig.visibility.iabMinLargeDuration,visibilityInteraction:this._adjustPanelIntName(EBG.Interactions.SystemInts.VISIBILITY_IAB),durationInteraction:null,
isActive:this.adConfig.visibility.mode!=EBG.VisibilityMode.DEFAULT_MODE,durationNeeded:!1,timeOutFlag:null,reported:!1};this._visibilityData[EBG.RichModules.VisibilityManager.ThreholdType.Agency]={minSurface:this.adConfig.visibility.agencyMinSurface,minDuration:this.adConfig.visibility.agencyMinDuration,visibilityInteraction:this._adjustPanelIntName(EBG.Interactions.SystemInts.VISIBILITY_AGENCY),durationInteraction:this._adjustPanelIntName(EBG.Interactions.SystemInts.VISIBILITY_AGENCY_DURATION),isActive:this.adConfig.visibility.mode!=
EBG.VisibilityMode.DEFAULT_MODE&&!!this.adConfig.visibility.agencyMinDuration,durationNeeded:this.adConfig.visibility.mode==EBG.VisibilityMode.ENHANCED_MODE&&!!this.adConfig.visibility.agencyMinDuration,timeOutFlag:null,reported:!1};this._visibilityData[EBG.RichModules.VisibilityManager.ThreholdType.Advertiser]={minSurface:this.adConfig.visibility.advertiserMinSurface,minDuration:this.adConfig.visibility.advertiserMinDuration,visibilityInteraction:this._adjustPanelIntName(EBG.Interactions.SystemInts.VISIBILITY_ADVERTISER),
durationInteraction:this._adjustPanelIntName(EBG.Interactions.SystemInts.VISIBILITY_ADVERTISER_DURATION),isActive:this.adConfig.visibility.mode==EBG.VisibilityMode.ENHANCED_MODE&&!this._isPanel&&!!this.adConfig.visibility.advertiserMinDuration,durationNeeded:this.adConfig.visibility.mode==EBG.VisibilityMode.ENHANCED_MODE&&!!this.adConfig.visibility.advertiserMinDuration,timeOutFlag:null,reported:!1}},_adjustPanelIntName:function(a){return this._isPanel?"P"+a:a},_isLargeBanner:function(){var a=EBG.adaptor.getBoundingClientRect(this._res,
{clip:!0});return!!a&&242500<=a.width*a.height},_execCheckVisibility:function(a,b){try{var c=this._visibilityData[b],d=c.visibilityInteraction==EBG.Interactions.SystemInts.VISIBILITY_IAB;if(!EBG.adaptor.browser.isMobile()&&c.minLargeSurface&&this._isLargeBanner()){var e=c.minLargeSurface;var f=c.minLargeDuration}else e=c.minSurface,f=c.minDuration;a>=e?(!d||c.reported||this._visibilityProvider.isTimedBaseVisibility||EBG.runTimed(this,this.checkVisibility,[],EBG.RichModules.VisibilityManager.VisibilityCheckInterval),
c.reported||c.timeOutFlag)?c.reported&&c.durationNeeded&&c.durationInteraction&&(void(""+b.toString()+". Starting visibility duration timer"),this._intMgrWrapper.startTimer(c.durationInteraction,this.adConfig.uid)):c.timeOutFlag=EBG.runTimed(this,function(){c.timeOutFlag=null;this._intMgrWrapper.handleCounterInteraction(c.visibilityInteraction,this.adConfig.uid);c.durationNeeded&&c.durationInteraction&&(this._intMgrWrapper.updateTimer(c.durationInteraction,
this.adConfig.uid,f),this._intMgrWrapper.startTimer(c.durationInteraction,this.adConfig.uid));d&&!c.reported&&this._handleIABVisibility();c.reported=!0},[],1E3*f):(this._stopDurationTimeout(b),c.durationInteraction&&this._stopDurationCounting(b))}catch(g){void("")}},_stopDurationTimeout:function(a){this._visibilityData[a].timeOutFlag&&(clearTimeout(this._visibilityData[a].timeOutFlag),this._visibilityData[a].timeOutFlag=null)},_stopDurationCounting:function(a){this._visibilityData[a].durationNeeded&&
this._visibilityData[a].durationInteraction&&(void(""+a.toString()+" threshold. Stopping visibility duration timer"),this._intMgrWrapper.stopTimer(this._visibilityData[a].durationInteraction,this.adConfig.uid))},_reportVisibilityRecordable:function(){var a=this.adConfig.visibility.mode==EBG.VisibilityMode.BASIC_MODE||this.adConfig.visibility.mode==EBG.VisibilityMode.ENHANCED_MODE;a&&this.adConfig.visibility.iabMinDuration&&this._intMgrWrapper.handleCounterInteraction(this._adjustPanelIntName(EBG.Interactions.SystemInts.VISIBILITY_RECORDABLE),
this.adConfig.uid);a&&this.adConfig.visibility.agencyMinDuration&&this._intMgrWrapper.handleCounterInteraction(this._adjustPanelIntName(EBG.Interactions.SystemInts.VISIBILITY_AGENCY_RECORDABLE),this.adConfig.uid);this.adConfig.visibility.mode==EBG.VisibilityMode.ENHANCED_MODE&&!this._isPanel&&this.adConfig.visibility.advertiserMinDuration&&this._intMgrWrapper.handleCounterInteraction(this._adjustPanelIntName(EBG.Interactions.SystemInts.VISIBILITY_ADVERTISER_RECORDABLE),this.adConfig.uid)},_collectTimersHandler:function(a){a&&
(a.eventData&&a.eventData.adUId!=this.adConfig.uid||a.dispatcher.adsData&&a.dispatcher.adsData[this.adConfig.uid]&&a.dispatcher.adsData[this.adConfig.uid].isUnloadHandled)||(this._intMgrWrapper.clearTimer(this._adjustPanelIntName(EBG.Interactions.SystemInts.VISIBILITY_AVG_AD_SURFACE),this.adConfig.uid),this._intMgrWrapper.clearTimer(this._adjustPanelIntName(EBG.Interactions.SystemInts.VISIBILITY_AVG_SCREEN_SHARE),this.adConfig.uid),this._calculateAverages({percentage:this._lastVisPercentage,viewPort:this._visibilityProvider._getViewPortMetrics()}),
this._intMgrWrapper.updateTimer(this._adjustPanelIntName(EBG.Interactions.SystemInts.VISIBILITY_AVG_AD_SURFACE),this.adConfig.uid,this._averageVisibility),this._intMgrWrapper.updateTimer(this._adjustPanelIntName(EBG.Interactions.SystemInts.VISIBILITY_AVG_SCREEN_SHARE),this.adConfig.uid,this._averageScreenShare))},_stopTimersHandler:function(){void("");for(var a in EBG.RichModules.VisibilityManager.ThreholdType)EBG.RichModules.VisibilityManager.ThreholdType.hasOwnProperty(a)&&
this._visibilityData[EBG.RichModules.VisibilityManager.ThreholdType[a]]&&this._visibilityData[EBG.RichModules.VisibilityManager.ThreholdType[a]].isActive&&(this._stopDurationTimeout(EBG.RichModules.VisibilityManager.ThreholdType[a]),this._stopDurationCounting(EBG.RichModules.VisibilityManager.ThreholdType[a]))},stopMeasureVisibility:function(){this._collectTimersHandler();this._lastVisPercentage=0;this._stopTimersHandler()},getVisibilityProviderNum:function(){var a={None:0,Geometric:1,SafeFrame:2,
Mouse:3,Grid:4,Flash:5,FF:6,Mraid:7,AddingEye:8,Basic:9,IntersectionObserver:10};return this._visibilityProvider?a[this._visibilityProvider.name]||-1:a.None},_calculateAverages:function(a){void("");var b=(new Date).getTime()-this._averageLastCalcTime;if(1E3<b&&0<this._lastVisPercentage){this._averageVisibility=(this._averageVisibility*this._averageAdDuration+this._lastVisPercentage*b)/(this._averageAdDuration+b);if(this._lastVisViewPort&&this._lastVisViewPort.Width&&
this._lastVisViewPort.Height){var c=this._lastVisViewPort.Width*this._lastVisViewPort.Height,d=this._lastVisRect||EBG.adaptor.getBoundingClientRect(this._res,{clip:!0,relativeToTop:!0})||{width:0,height:0};this._averageScreenShare=(this._averageScreenShare*this._averageAdDuration+this._lastVisPercentage*(d?d.width*d.height:0)/100/c*100*b)/(this._averageAdDuration+b)}this._averageAdDuration+=b;void(""+this._averageVisibility+" ,averageScreenShare = "+
this._averageScreenShare+" ,averageAdDuration = "+this._averageAdDuration)}else void(""+this._lastVisPercentage+" duration = "+b/1E3);this._lastVisPercentage=a.percentage;this._lastVisViewPort=a.viewPort;this._lastVisRect=EBG.adaptor.getBoundingClientRect(this._res,{clip:!0,relativeToTop:!0})||{width:0,height:0};this._averageLastCalcTime=(new Date).getTime()},_handleIABVisibility:function(){EBG.RichModules.VisibilityManager.VisibilityCheckInterval=
500}};EBG.declareClass(EBG.RichModules.VisibilityManager,null);EBG.declareNamespace("RichModules");EBG.RichModules.Geometry=function(a){void("");EBG.log.endGroup()};
EBG.RichModules.Geometry.prototype={_clipRegex:/rect\((.*?)px(.*?)px(.*?)px(.*?)px\)/g,_clipPercentRegex:/rect\(([0-9]+%?)(?:px)?[ ,]?([0-9]+%?)(?:px)?[ ,]?([0-9]+%?)(?:px)?[ ,]?([0-9]+%?)(?:px)?[ ,]?\)/g,getViewport:function(){var a=EBG.adaptor.getWindowViewPortMetrics();a&&(a.width=a.Width,a.height=a.Height);return a},getPercentOfViewportWidth:function(a){EBG.isNumber(a)||(a=1*a.replace(/[^\d\.\-]/g,""));return this.getViewport().Width*a/100},getPercentOfViewportHeight:function(a){EBG.isNumber(a)||
(a=1*a.replace(/[^\d\.\-]/g,""));return this.getViewport().Height*a/100},getPercentOfViewport:function(a){EBG.isNumber(a)||(a=1*a.replace(/[^\d\.\-]/g,""));var b=EBG.cloneObj(this.getViewport());b.width=b.Width=b.Width*a/100;b.height=b.Height=b.Height*a/100;return b},calculateMaxHeight:function(a,b,c){var d=parseInt(a,10);EBG.isPercentage(a)&&(d=this.getPercentOfViewportHeight(d));return Math.min(c/b,d)},calculateMaxWidth:function(a,b,c){var d=parseInt(a,10);EBG.isPercentage(a)&&(d=this.getPercentOfViewportWidth(d));
return Math.min(b*c,d)},translateCoords:function(a,b,c){var d={},e=["left","top","right","bottom"],f=["width","height","width","height"],g=["X","Y","X","Y"],h;for(h in a){var k=EBG.indexOfArray(e,h);if(-1<k){var l=f[k],m=a[h];k=g[k];if(b.from==EBG.PanelPositionType.VIEWPORT_RELATIVE_PERCENTAGE||b.from==EBG.PanelPositionType.VIEWPORT_RELATIVE_PIXELS||b.to==EBG.PanelPositionType.VIEWPORT_RELATIVE_PERCENTAGE||b.to==EBG.PanelPositionType.VIEWPORT_RELATIVE_PIXELS){c=c||EBG.adaptor.serving.detectServingMode(!0);
var p=EBG.adaptor.getScrollLeftTop(!1,c)}switch(b.from){case EBG.PanelPositionType.PAGE_RELATIVE_PERCENTAGE:if(a[l]){var n=this.getViewport()[l]-a[l];m=0<n?Math.round(n*m/100):0}else m=this.getViewport()[l]*m/100;break;case EBG.PanelPositionType.BANNER_RELATIVE_PIXELS:var t;a.refElem&&(t=EBG.isElementOrNode(a.refElem)?EBG.adaptor.getBoundingClientRect(a.refElem,{relativeToWindow:!0}):a.refElem);EBG.isDefined(t[h])&&(m+=t[h]);break;case EBG.PanelPositionType.VIEWPORT_RELATIVE_PERCENTAGE:a[l]?(n=this.getViewport()[l]-
a[l],m=0<n?Math.round(n*m/100):0):m=this.getViewport()[l]*m/100;if("top"==h||"bottom"==h)m+=p.Y;else if("left"==h||"right"==h)m+=p.X;break;case EBG.PanelPositionType.VIEWPORT_RELATIVE_PIXELS:if("top"==h||"bottom"==h)m+=p.Y;else if("left"==h||"right"==h)m+=p.X}switch(b.to){case EBG.PanelPositionType.VIEWPORT_RELATIVE_PERCENTAGE:a[l]&&(n=this.getViewport()[l]-a[l],m=0!=n?Math.round((m-p[k])/n*100):0);break;case EBG.PanelPositionType.BANNER_RELATIVE_PIXELS:a.refElem&&(t=EBG.isElementOrNode(a.refElem)?
EBG.adaptor.getBoundingClientRect(a.refElem,{relativeToWindow:!0}):a.refElem);EBG.isDefined(t[h])&&(m-=t[h]);break;case EBG.PanelPositionType.PAGE_RELATIVE_PERCENTAGE:a[l]&&(n=this.getViewport()[l]-a[l],m=0!=n?Math.round(m/n*100):0);break;case EBG.PanelPositionType.VIEWPORT_RELATIVE_PIXELS:"top"==h?m-=p.Y:"left"==h&&(m-=p.X)}d[h]=m}}return d},resolveClipPercentages:function(a,b){if(this._isRectCSS(a)){a=this._getRectCSSValues(a);for(var c=[null,"top","right","bottom","left"],d="rect(",e=1;4>=e;e++){var f=
a[e];switch(c[e]){case "top":case "bottom":EBG.isPercentage(f)&&(b&&EBG.isNumber(b.height)?(f=1*f.replace(/[^\d\.\-]/g,""),f=b.height*f/100):f=this.getPercentOfViewportHeight(f));break;case "left":case "right":EBG.isPercentage(f)&&(b&&EBG.isNumber(b.width)?(f=1*f.replace(/[^\d\.\-]/g,""),f=b.width*f/100):f=this.getPercentOfViewportWidth(f))}f=Math.round(f);d=d+f+"px";d=4>e?d+",":d+")"}return d}return null},_isRectCSS:function(a){this._clipPercentRegex.lastIndex=0;return this._clipPercentRegex.test(a)},
_getRectCSSValues:function(a){this._clipPercentRegex.lastIndex=0;return this._clipPercentRegex.exec(a)}};EBG.declareNamespace("RichModules");
EBG.RichModules.AdStackingDetector=function(a,b){this._adConfig=a;this._isFriendlyIframe=this._adConfig.actualServingMode==EBG.Adaptors.ServingMode.FRIENDLY_IFRAME||this._adConfig.actualServingMode==EBG.Adaptors.ServingMode.TOPMOST_FRIENDLY_IFRAME&&window.frameElement;this._isPanel=b;this._elementsIds=[];this._validElementParents=[];this._visibilityEvent={};this._placeholderDiv=EBG.adaptor.getElementById(this._adConfig.placeHolderId);this._shouldInitialize()&&(this._validElementParents.push(a.placeHolderId),
EBG.Const.OUTER_DIV&&this._validElementParents.push(EBG.Const.OUTER_DIV),a=new EBG.Events.EventSubscription(EBG.Events.EventNames.VISIBILITY_CHECK,this._handleVisibilityEvent,this),a.dispatcherFilters={"adConfig.rnd":this._adConfig.rnd},a.timing=EBG.Events.EventTiming.ONTIME,EBG.eventMgr.subscribeToEvent(a),this._adConfig.adStarted?this._start():(a=new EBG.Events.EventSubscription(EBG.Events.EventNames.AD_START,function(){this._start()},this),a.timing=EBG.Events.EventTiming.ONTIME,EBG.eventMgr.subscribeToEvent(a)))};
EBG.RichModules.AdStackingDetector.prototype={_densityFactor:5,_prevPercentage:0,_minThresholdForAdStacking:50,_interactionThreshold:100,_generatePointsGrid:function(a){for(var b=[],c=(a.height-2)/this._densityFactor,d=(a.width-2)/this._densityFactor,e=0;e<=this._densityFactor;e++)for(var f=0;f<=this._densityFactor;f++){var g=d*e,h=c*f;g=Math.max(g,2);h=Math.max(h,2);g=Math.min(g,a.width-2);h=Math.min(h,a.height-2);b.push({x:Math.round(g),y:Math.round(h)})}return b},_handleVisibilityEvent:function(a){~EBGInfra.indexOfArray(this._elementsIds,
a.dispatcher._resObjId)&&(this._visibilityEvent=EBG.cloneObj(a.eventData))},_shouldInitialize:function(){if(this._adConfig.visibility.mode==EBG.VisibilityMode.ENHANCED_MODE&&this._adConfig.actualServingMode!=EBG.Adaptors.ServingMode.IFRAME)return this._adConfig.actualServingMode==EBG.Adaptors.ServingMode.FRIENDLY_IFRAME&&window.parent!==top?!1:!0},_start:function(){EBG.runTimed(this,this._analyze,[],5);EBG.runTimed(this,this._analyze,[],EBG.RichModules.VisibilityManager.VisibilityCheckInterval/2);
EBG.runTimed(this,this._analyze,[],EBG.RichModules.VisibilityManager.VisibilityCheckInterval)},_analyze:function(){if("hidden"!=this._placeholderDiv.style.visibility){var a=this._calculateConcealmentPercentage();!this._adStackingReported&&a.adStacked>=this._interactionThreshold&&this._visibilityEvent.percentage>=this._minThresholdForAdStacking&&(EBG.intMgr.handleCounterInteraction((this._isPanel?"P":"")+EBG.Interactions.SystemInts.AD_STACKING,this._adConfig.uid),this._adStackingReported=!0);if(a.blocked!=
this._prevPercentage){this._prevPercentage=a.blocked;var b=new EBG.Events.Event(this._isPanel?"P":""+EBG.Events.EventNames.AD_STACKING);b.eventData={intName:(this._isPanel?"P":"")+EBG.Interactions.SystemInts.AD_STACKING,percentage:a.blocked};b.dispatcher=this;b.timing=EBG.Events.EventTiming.BEFORE;if(EBG.eventMgr.dispatchEvent(b))return;b.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(b)}EBG.runTimed(this,this._analyze,[],EBG.RichModules.VisibilityManager.VisibilityCheckInterval)}},
_calculateConcealmentPercentage:function(){var a={blocked:0,adStacked:0};try{if(!this._elementsIds.length)return a;var b=EBG.adaptor.serving._getTopFriendlyIframe(this._adConfig.displayWin||EBG.adaptor.getDisplayWin()),c=EBG.adaptor.getElementById(this._assetId),d=EBG.adaptor.getBoundingClientRect(c,{clip:!0,relativeToTop:!0});if(!c||!c.offsetWidth||!c.offsetHeight||EBG.isDefined(this._visibilityEvent.assetId)&&this._visibilityEvent.assetId!=this._assetId)return a;var e=this._visibilityEvent.visibleRect;
c=e||d;if(!c||0==c.width||0==c.height)return a;this._grid=this._generatePointsGrid(c);for(var f=0,g=0,h=0;h<this._grid.length;h++){var k=this._grid[h];k.x+=Math.floor(c.left)+1;k.y+=Math.floor(c.top)+1;var l=b.document.elementFromPoint(k.x,k.y);!l||l.id&&-1!=EBG.indexOfArray(this._elementsIds,l.id)||this._isFriendlyIframe&&l==window.frameElement||this._hasValidParent(l)||this._isElementTransparent(l)||(f++,l.tagName&&"iframe"==l.tagName.toLowerCase()&&g++)}return{blocked:Math.ceil(Math.round(f/this._grid.length*
100)*(e?e.width*e.height/(d.width*d.height):1)),adStacked:Math.round(g/this._grid.length*100)}}catch(m){return a}},addElementId:function(a,b){-1==EBGInfra.indexOfArray(this._elementsIds,a)&&this._elementsIds.push(a);b&&(this._assetId=a,this._visibilityEvent={})},_invisibleProperties:{visibility:"hidden",display:"none",opacity:function(a){return 0==1*a},"-moz-opacity":function(a){return EBG.adaptor.browser.isFF()&&0==1*a},"-khtml-opacity":function(a){return EBG.adaptor.browser.isSafari()&&0==1*a},
filter:function(a){return EBG.adaptor.browser.isIE()&&10>EBG.adaptor.browser.getVersion()&&-1!=EBG.indexOfArray(["alpha(opacity=0)","progid:DXImageTransform.Microsoft.Alpha(Opacity=0)"],a)},"background-color":function(a,b,c){var d=function(g){var h=g.replace(/^\s+|\s+$/g,"").match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);return h&&0==1*h[4]||"transparent"==g},e=b.innerText||b.textContent,f=EBG.adaptor.browser.isIE()&&9>EBG.adaptor.browser.getVersion();c=c.getPropertyValue("color");
return d(a)&&-1==EBG.indexOfArray("object canvas video source track iframe embed img".split(" "),b.tagName.toLowerCase())&&(!e||!f&&d(c))}},_isElementTransparent:function(a){var b=EBG.adaptor.getComputedStyle(a),c=this._invisibleProperties,d,e;for(e in c){var f=b.getPropertyValue(e);if(f)for(var g=EBG.isArray(c[e])?c[e]:[c[e]],h=0;h<g.length;h++)if(d=EBG.isFunc(g[h])?g[h](f,a,b):f==g[h])return!0}return!1},_hasValidParent:function(a){if(!a)return!1;for(var b=a.id;a.parentElement;){if(a.parentElement.id&&
-1!=EBG.indexOfArray(this._validElementParents,a.parentElement.id))return this.addElementId(b,!1),!0;a=a.parentElement}return!1}};EBG.declareClass(EBG.RichModules.AdStackingDetector,null);EBG.declareNamespace("RichModules");
EBG.RichModules.ActualSizeDetector=function(a,b){this.exec=!1;this.isPanel=b.eventData.isPanel;this.config=a;this.tracker=a.interactionTracker.ActualSize;this.wev=["resize","beforeunload","pagehide","visibilitychange"];this._detectCallback=this._detect.bind(this);this._mo;this._io;this._th=1;this.obst=[0,0,0,0];this.ioval=[-1,-1];this._start()};
EBG.RichModules.ActualSizeDetector.prototype={_start:function(){var a=this;if(!a.exec){a.exec=!0;var b=EBG.Events,c=b.EventNames,d=EBG.eventMgr.subscribeToEvent.bind(EBG.eventMgr),e=b.EventSubscription;b=b.EventTiming.ONTIME;var f=a.config,g=function(){f.impressionSent&&f.adStarted&&EBG.adaptor.isPageLoaded()&&a._bootstrap()};g();var h=new e(c.IMPRESSION_SENT,g,a);h.timing=b;d(h);h=new e(c.PAGE_LOAD,g,a);h.dispatcherFilters={"_adConfig.rnd":f.rnd};h.timing=b;d(h);h=new e(c.AD_START,g,a);h.timing=
b;d(h)}},_bootstrap:function(){var a=this._detectCallback,b=EBG.adaptor,c=b.generateElementId("BannerDiv",this.config.uid);b=b.getElementById(c)||b.getElementById(this.config.placeHolderId);"DIV"==b.tagName.toUpperCase()&&(b=b&&(b.getElementsByTagName("img")[0]||b.getElementsByTagName("iframe")[0]));this.ad=b;this.wev.forEach(function(e){window.addEventListener(e,a)});try{var d=this._io=new IntersectionObserver(this._ioCallback.bind(this),{rootMargin:"0px",threshold:[0,.001]});this.ioval=[0,0];d.observe(b);
d.takeRecords()}catch(e){}try{this._mo=new MutationObserver(a)}catch(e){}a()},_ioCallback:function(a){a=a[0];this.ioval=[a.isIntersecting?1:0,Math.round(1E4*a.intersectionRatio)/1E4];(a.isIntersecting||0<a.intersectionRatio)&&this._send(a.boundingClientRect)},_detect:function(){var a=this,b=a.obst=[0,0,0,0],c=a.tracker,d=a.ad,e=a._send.bind(a);if(2!==c.reported){var f=function(h,k,l,m){return{width:Math.round(h||0),height:Math.round(k||0),left:Math.round(l||0),top:Math.round(m||0)}},g=function(h){return h.width>
a._th&&h.height>a._th};(function(h){try{window.getComputedStyle(h);h.getBoundingClientRect();var k=f(+window.innerWidth,+window.innerHeight);a.obst[0]=+!g(k);if(g(k)){k=h=d;var l=h.getBoundingClientRect();for(b[1]=+!g(l);h;)if(h=h.parentNode,h instanceof Element){var m=h.style;if("none"===m.display)b[2]=1,l=f(),k=h;else if("hidden"===m.overflow){b[3]=1;var p,n=l,t=h.getBoundingClientRect(),u=Math.max(n.left,t.left),q=Math.max(n.top,t.top),r=Math.min(n.left+n.width,t.left+t.width)-u,v=Math.min(n.top+
n.height,t.top+t.height)-q;if(0>r||0>v)r=v=0;l=p=f(r,v,u,q);k=h}}a._mo&&(g(l)||a._mo.observe(k,{subtree:!1,childList:!1,attributes:!0}));e(l)}else e(k)}catch(x){e(f(-1,-1))}})(d)}},_send:function(a){var b=this,c=b.tracker,d=b.config,e=!1;if(2!==c.reported){var f=function(){var g=[];g[0]=a.width;g[1]=a.height;g[2]=d.inAppSettings.sdkSupport?1:0;g[3]=++c.seq;g[4]=b.obst.join("");g[5]=b.ioval.join("x");g[6]=d.width||-1;g[7]=d.height||-1;return g.join("x")};a.width>b._th&&a.height>b._th?(c.reported=2,
e=!0):-1===a.width||-1===a.height?(c.reported=2,e=!0):0===c.reported&&(c.reported=1,e=!0);e&&EBG.intMgr.handleCounterInteraction(EBG.Interactions.SystemInts.ACTUAL_SIZE,d.uid,0,!1,{value:f(),isPanel:b.isPanel});2===c.reported&&(b.wev.forEach(function(g){window.removeEventListener(g,b._detectCallback)}),b._mo&&b._mo.disconnect(),b._io&&b._io.disconnect())}}};EBG.declareClass(EBG.RichModules.ActualSizeDetector,null);
EBG.Interactions.DwellTimeManager=function(a){void("");this._adConfig=a;this._defaultPanelName=this._adConfig.panelName;EBG.log.endGroup()};
EBG.Interactions.DwellTimeManager.prototype={_state:{idle:0,start:1,stop:2,panelOpenMouseOver:3,videoPlay:4,videoPlayMouseOut:5,panelOpenMouseOut:6,idlePanelOpen:7,idleVideoPlay:8},_idleTimeLimit:700,_curState:0,_numOfOpenPanels:0,_isMouseOverAd:!1,_wasMouseOverAd:!1,_isUserInteractionOccur:!1,_isVideoPlay:!1,_isVideoAutoReplay:!1,_mouseTimeoutId:0,_autoShownPanels:[],_videosToTrack:[],_defaultMovieNum:1,_dwellUniqueNeedsToBeReported:!0,init:function(){this._subscribeToEvents()},_subscribeToAdEvent:function(a,
b,c){a=new EBG.Events.EventSubscription(a,b,this);c&&(a.dispatcherFilters={"_adConfig.rnd":this._adConfig.rnd});EBG.eventMgr.subscribeToEvent(a)},_subscribeToEvents:function(){void("");this._subscribeToAdEvent(EBG.Events.EventNames.MOUSE_OVER,this._handleMouseOverAd,!0);this._subscribeToAdEvent(EBG.Events.EventNames.MOUSE_OUT,this._handleMouseOutOfAd,!0);this._subscribeToAdEvent(EBG.Events.EventNames.PAGE_HIDDEN,this._handlePageHidden,!0);
this._subscribeToAdEvent(EBG.Events.EventNames.DWELL_VIDEO_START,this._handleVideoPlay,!0);this._subscribeToAdEvent(EBG.Events.EventNames.DWELL_VIDEO_STOP,this._handleVideoStop,!0);this._subscribeToAdEvent(EBG.Events.EventNames.USER_INTERACTION,this._handleUserInteraction,!0);this._subscribeToAdEvent(EBG.Events.EventNames.EXPAND,this._handlePanelOpen,!0);this._subscribeToAdEvent(EBG.Events.EventNames.COLLAPSE,this._handlePanelClose,!0);this._subscribeToAdEvent(EBG.Events.EventNames.FULL_SCREEN_START,
this._handlePanelOpen,!0);this._subscribeToAdEvent(EBG.Events.EventNames.FULL_SCREEN_END,this._handlePanelClose,!0);EBG.log.endGroup()},_handleMouseThreshold:function(){this._mouseTimeoutId=null;void("");EBG.intMgr.updateTimer(EBG.Interactions.SystemInts.DWELL_TIME,this._adConfig.uid,this._idleTimeLimit/1E3);switch(this._curState){case this._state.idle:this._isMouseOverAd?this._start():this._stop();break;case this._state.idleVideoPlay:this._isMouseOverAd?
this._videoPlay():this._videoPlayMouseOut();break;case this._state.idlePanelOpen:this._isMouseOverAd?this._panelOpenMouseOver():this._panelOpenMouseOut()}void("",this._curState);EBG.log.endGroup()},_handleUserInteraction:function(a){void("");if(this._wasMouseOverAd){this._isUserInteractionOccur=!0;switch(this._curState){case this._state.idle:this._start();
break;case this._state.idleVideoPlay:this._videoPlay();break;case this._state.idlePanelOpen:this._panelOpenMouseOver()}void("",this._curState);EBG.log.endGroup()}else void("",this._curState)},_handleVideoPlay:function(a){a=a.eventData.assetId||this._defaultMovieNum;void("");
if(this._isMouseOverAd){this._videosToTrack.push(a);this._isVideoPlay=!0;this._reportUserInitatedVideo(a);switch(this._curState){case this._state.idle:this._idleVideoPlay();break;case this._state.idlePanelOpen:break;case this._state.idleVideoPlay:break;case this._state.start:this._videoPlay();this._reportUserInitatedVideo(a);break;case this._state.stop:this._isVideoAutoReplay||(this._videoPlayMouseOut(),this._reportUserInitatedVideo(a));break;case this._state.videoPlayMouseOut:this._stop();this._isVideoAutoReplay=
!0;break;default:this._isVideoAutoReplay||this._reportUserInitatedVideo(a)}void("",this._curState,this._isVideoAutoReplay);EBG.log.endGroup()}else void("",this._curState)},_handleVideoStop:function(a){void("");var b=EBGInfra.indexOfArray(this._videosToTrack,
a.eventData.assetId);if(-1===b)void("");else if(this._videosToTrack.splice(b,1),!(0<this._videosToTrack.length)){this._isVideoPlay=this._isVideoAutoReplay=!1;switch(this._curState){case this._state.videoPlay:this._isMouseOverAd?0<this._numOfOpenPanels?this._panelOpenMouseOver():this._start():0<this._numOfOpenPanels?this._panelOpenMouseOut():this._stop();break;case this._state.videoPlayMouseOut:0<
this._numOfOpenPanels?this._panelOpenMouseOut():this._stop();break;case this._state.idleVideoPlay:this._idle()}void("",this._curState);EBG.log.endGroup()}},_handlePageHidden:function(a){this._stop()},_handleMouseOverAd:function(a){void("");this._wasMouseOverAd=this._isMouseOverAd=!0;this._isVideoAutoReplay=!1;this._checkRecentAutoPanelOpen();switch(this._curState){case this._state.idle:case this._state.idlePanelOpen:case this._state.idleVideoPlay:this._startMouseTimer();
break;case this._state.stop:this._isVideoPlay?this._videoPlay():this._start();break;case this._state.panelOpenMouseOut:this._panelOpenMouseOver();break;case this._state.videoPlayMouseOut:this._videoPlay()}void("",this._curState);EBG.log.endGroup()},_checkRecentAutoPanelOpen:function(){if(this._curState==this._state.idle)for(var a=(new Date).getTime(),b=this._autoShownPanels.length-1;0<=b;b--){var c=this._autoShownPanels[b];300>=
a-c.showtime&&(void(""),this._autoShownPanels.splice(b,1),this.handlePanelOpen(c.name))}},_handleMouseOutOfAd:function(a){void("");this._isMouseOverAd=!1;switch(this._curState){case this._state.idle:case this._state.idleVideoPlay:case this._state.idlePanelOpen:this._clearMouseTimer();break;case this._state.start:this._stop();break;case this._state.videoPlay:this._videoPlayMouseOut();
break;case this._state.panelOpenMouseOver:this._panelOpenMouseOut()}void("",this._curState)},_handlePanelOpen:function(a){void("");var b=a.eventData.props&&a.eventData.props.panel.name||this._defaultPanelName;if(this._wasMouseOverAd&&a.dispatcher.expandedBy!=EBG.ActionType.AUTO){this._numOfOpenPanels++;switch(this._curState){case this._state.start:this._panelOpenMouseOver();break;
case this._state.stop:this._panelOpenMouseOut();break;case this._state.idle:this._idlePanelOpen();break;case this._state.videoPlay:this._panelOpenMouseOver()}void("",this._curState,this._numOfOpenPanels)}else this._onAutoShowPanel(b)},_onAutoShowPanel:function(a){this._addAutoShownPanel({name:a||this._defaultPanelName,showtime:(new Date).getTime()})},_addAutoShownPanel:function(a){0<=this._getAutoShownPanelIdx(a.name)?
void(""):(this._autoShownPanels[this._autoShownPanels.length]=a,void(""))},_getAutoShownPanelIdx:function(a){a=a||this._defaultPanelName;for(var b=-1,c=0;c<this._autoShownPanels.length;c++)if(this._autoShownPanels[c].name==a){b=c;break}return b},_handlePanelClose:function(a){a="FullScreen"==a.eventData?a.eventData:a.eventData.props&&
a.eventData.props.panel?a.eventData.props.panel.name:this._defaultPanelName;void("");var b=this._getAutoShownPanelIdx(a);if(0<=b)void(""),this._autoShownPanels.splice(b,1);else{this._numOfOpenPanels--;0>this._numOfOpenPanels&&(this._numOfOpenPanels=0);if(0==this._numOfOpenPanels)switch(this._curState){case this._state.panelOpenMouseOver:this._isVideoPlay?
this._videoPlay():this._start();break;case this._state.panelOpenMouseOut:this._isVideoPlay?this._videoPlayMouseOut():this._stop();break;case this._state.idlePanelOpen:this._idle()}void("",this._curState,this._numOfOpenPanels)}},_startMouseTimer:function(){if(this._mouseTimeoutId)void("");else{var a=this;this._mouseTimeoutId=setTimeout(function(){a._handleMouseThreshold()},
this._idleTimeLimit);void("",this._mouseTimeoutId)}},_clearMouseTimer:function(){clearTimeout(this._mouseTimeoutId);this._mouseTimeoutId=null;void("",this._mouseTimeoutId)},_isIdleMode:function(){return this._curState==this._state.idle||this._curState==this._state.idlePanelOpen||this._curState==this._state.idleVideoPlay},_idle:function(){this._isIdleMode()&&(void(""),this._curState=
this._state.idle)},_start:function(){void("");this._curState=this._state.start;this._startTimer()},_stop:function(){void("");this._curState=this._state.stop;this._endTimer()},_idlePanelOpen:function(){this._isIdleMode()&&(void(""),this._curState=this._state.idlePanelOpen)},_panelOpenMouseOver:function(){void("");
this._curState=this._state.panelOpenMouseOver;this._startTimer()},_videoPlay:function(){void("");this._curState=this._state.videoPlay;this._startTimer()},_videoPlayMouseOut:function(){void("");this._curState=this._state.videoPlayMouseOut;this._startTimer()},_panelOpenMouseOut:function(){void("");this._curState=this._state.panelOpenMouseOut;
this._startTimer()},_idleVideoPlay:function(){this._isIdleMode()&&(void(""),this._curState=this._state.idleVideoPlay)},_reportUserInitatedVideo:function(a){var b=new EBG.Events.Event(EBG.Events.EventNames.USER_INITIATED_VIDEO);b.dispatcher=this;b.eventData={assetId:a};EBG.eventMgr.dispatchEvent(b)},_isTimeOverLimit:function(){return this._isTimerStarted()?(this._endTimer(),EBG.intMgr.getTimerValue(EBG.Interactions.SystemInts.DWELL_TIME,this._adConfig.uid)>
this._idleTimeLimit/1E3):!1},_isTimerStarted:function(){return EBG.intMgr.isTimerRunning(EBG.Interactions.SystemInts.DWELL_TIME,this._adConfig.uid)},_resetTimer:function(){EBG.intMgr.updateTimer(EBG.Interactions.SystemInts.DWELL_TIME,this._adConfig.uid,0)},_startTimer:function(){void("");var a=new EBG.Events.Event(EBG.Events.EventNames.DWELL_UNIQUE);a.dispatcher=this;a.eventData={firstTime:this._dwellUniqueNeedsToBeReported,adUId:this._adConfig.uid};EBG.eventMgr.dispatchEvent(a);
this._dwellUniqueNeedsToBeReported=!1;EBG.intMgr.startTimer(EBG.Interactions.SystemInts.DWELL_TIME,this._adConfig.uid);EBG.log.endGroup()},_endTimer:function(){EBG.intMgr.stopTimer(EBG.Interactions.SystemInts.DWELL_TIME,this._adConfig.uid)}};EBG.declareNamespace("Ads");
EBG.Ads.Ad=function(a){void("");void("");this._adConfig=a;this.timeline={};try{var b=EBGUUID();a.config_sid=a.config_sid||b;a.config_sids=a.config_sids||[];a.config_sids.push(b);this.timeline=new EBGTimeline(a,"adinstance");this.adsid=a.adsid=this.timeline.adsid}catch(c){}this._dpm=EBG.dataPipeMgr.getPipe(this._adConfig.sID);this._adConfig.isStdAd=this._isStdAd();this.startTime=(new Date).getTime()/1E3;this.advertiserCounter=0;this._initReportImpression();this.impressionWaitingStatus=
{adRender:!1};this._updateURLs();this._subscribeEventTriggeringURLs();this.userEvents=[EBG.EBMessage.CLICKTHROUGH,EBG.EBMessage.USER_ACTION_COUNTER,EBG.Events.EventNames.DEFAULT_CLICK];EBG.ads[a.uid]=this;this._show();this.placeHolderElement?this._handleMultiBurn():this._subscribeToAdEvent(EBG.Events.EventNames.SHOW_AD,this._handleMultiBurn,EBG.Events.EventTiming.ONTIME);this._sendInitAdInformation();this._sendCustomFormatInformation();EBG.log.endGroup()};
EBG.Ads.Ad.prototype={resizePlaceHolder:!0,checkingThrottle:!1,_throttleState:null,_throttleTimeoutDuration:1E3,_adConfig:null,_adChoice:null,_cdiReason:0,_showOnlyDefaultImg:!1,_banner:{divId:"",resId:"",width:0,height:0},_hasDefaultImageInteraction:!1,_isStdAd:function(){return!0},_initReportImpression:function(){var a=this,b=a._adConfig,c=EBG.eventMgr,d=EBG.Events,e=d.EventSubscription,f=d.EventTiming.ONTIME;d=d.EventNames;var g=b.rnd;if(b.reportImpressionType==EBG.ReportImpressionType.DELAYED)EBG.adaptor.loadModule("DelayedImpression",
b,function(l){a.delayedImpressionModule=new (l||window).EBG.Modules.DelayedImpression(b);a._handleDelayedImpressionReport()},a);else if(b.reportImpressionType==EBG.ReportImpressionType.CLIENT){var h=b.inAppSettings&&b.inAppSettings.sdkBridgeEnabled&&!b.isInstream?a._handleClientImpressionWaiting:a._handleClientImpression,k=new e(d.INAPP_IMPRESSION,h,a);k.dispatcherFilters={ebRand:g};k.timing=f;c.subscribeToEvent(k);k=new e(d.ELEMENT_LOADED,h,a);k.dispatcherFilters={ebRand:g};k.timing=f;c.subscribeToEvent(k);
k=new e(EBG.EBMessage.DOCUMENT_LOADED,h,a);k.dispatcherFilters={"_adConfig.rnd":g};k.timing=f;c.subscribeToEvent(k);k=new e(d.CREATIVE_CONTAINER_READY,h,a);k.dispatcherFilters={"_adConfig.rnd":g};k.timing=f;c.subscribeToEvent(k)}},_handleClientImpressionWaiting:function(a){var b=this._adConfig,c=b.inAppSettings||{sdkPurpose:2},d=c.sdkPurpose,e=this.impressionWaitingStatus,f=a.eventData;if(a.name!==EBG.Events.EventNames.INAPP_IMPRESSION){if(this.ImpressionEvent&&a.name!==this.ImpressionEvent.name)return;
this.ImpressionEvent=a;e.adRender||(this.impressionWaitingStatus.adRender=!0,!this.adRenderReported&&c.onRender&&(this.adRenderReported=1,this.sendDebug({ad_onRender:2,sdk_purpose:d,v_state:document.visibilityState})),c.allowInappReporting||this._handleClientImpression(a))}else f.hasOwnProperty("sdkTrigger")&&(e.sdkTrigger=f.sdkTrigger),f.hasOwnProperty("supportsSDK")&&(e.supportsSDK=f.supportsSDK),f.hasOwnProperty("isViewable")&&(e.isViewable=f.isViewable),f.hasOwnProperty("width")&&(e.width=f.width),
f.hasOwnProperty("height")&&(e.height=f.height),f.hasOwnProperty("percentageInView")&&(e.percentageInView=f.percentageInView);c.hasOwnProperty("sdkBridgeLoaded")&&e.hasOwnProperty("supportsSDK")&&e.adRender&&(c.allowLogging&&e.supportsSDK&&!this.sdk_appSupported&&(this.sdk_appSupported=1,a={sdk_appSupported:1,sdk_siteSupported:c.reportSiteSupported,sdk_advertiserSupported:c.reportSupportedAdvertiser,sdk_purpose:d},a.mraidSupport=c.mraidSupport||0,a.omidSupport=c.omidSupport||0,this.sendDebug(a)),
c.sdkBridgeLoaded&&e.supportsSDK&&!e.isViewable||(c.allowInappReporting&&!this.vwImpSent&&(this.vwImpSent=1,this._handleClientImpression(this.ImpressionEvent)),c.allowLogging&&!this.adViewReported&&e.isViewable&&b.dpUrlEvents&&(this.adViewReported=!0,b={ad_onview:1,sdk_purpose:d},e.sdkTrigger&&(b.sdk_trigger=e.sdkTrigger),e.width&&(b.sdk_width=e.width),e.height&&(b.sdk_height=e.height),e.percentageInView&&(b.percentageInView=e.percentageInView),this.sendDebug(b))))},_handleClientImpression:function(a){var b=
this._adConfig,c=a.eventData||{},d=a.dispatcher||{};!b.impressionSent&&(this.timeline&&this.timeline.update(a.name),a=b.inAppSettings,!this.adRenderReported&&a&&a.allowBridge&&a.onRender&&(this.adRenderReported=1,this.sendDebug({ad_onRender:1,sdk_purpose:a.sdkPurpose,v_state:document.visibilityState})),(c.adUId?c.adUId:d._adConfig?d._adConfig.uid:null)==b.uid&&(c=c.DOMEvent&&c.DOMEvent.target?c.DOMEvent.target:d._iframe?d._iframe:d._res?d._res:null,this._dispatchClientImpression(),b.impressionTrackingURLs&&
this._reportImpressionTrackingURLs(b.impressionTrackingURLs),EBG.intMgr.allowInteractionReport(b.uid),b.ffs.CFF_ReportVPI&&b.Purposes.Measurements&&b.Purposes.Debug&&(d=b.impData={inapp:0,ioexists:0,target:0,vpicheck:0},window.IntersectionObserver&&(d.ioexists=1),c&&(d.target=1),EBG.adaptor.browser.isInApp()&&(d.inapp=1),EBG.adaptor.browser.isInApp()||b.ffs.CFF_ReportVPIAll)))&&(d.vpicheck=1,window.IntersectionObserver&&c?this._waitForViewportImpression(c):this._dispatchViewportImpression())},_waitForViewportImpression:function(a){this.observer=
new IntersectionObserver(this._handleViewportImpression.bind(this),{threshold:[0]});this.observer.observe(a)},_handleViewportImpression:function(a){a=a[0];a.isIntersecting&&(this.observer.unobserve(a.target),this._dispatchViewportImpression())},_dispatchViewportImpression:function(){onsole.log("Ad._dispatchViewportImpression");var a=this._adConfig;if(a.ViewportImpressionSent)return!1;a.ViewportImpressionSent=!0;a.impData.vpimp=1;a.dpUrlEvents&&this.sendDebug(a.impData)},_dispatchClientImpression:function(a){var b=
this._adConfig;if(b.impressionSent||EBG.isPreview||2===EBG.isTestMode)return!1;this.sendTLDebug("impression");b.impressionSent=!0;var c=EBG.getCtick(b.startTimeD,b.startTimeP,"cframe"===b.exscope),d=b.massVersioning;this._dpm.send(EBG.DataProfile.DEBUG,{timeImp:c,v_state:document.visibilityState,adsid:this.adsid});var e=EBG.format("{0}{1}/Serving?cn=display&c=40&sessionid={2}&ai={3}&usercookie={4}&oo={5}",EBG.protocol,b.bsPath,b.sID,b.adId,b.usercookie,b.optOut);e+=[a?"&isBlank=1":"","&clsrc=",EBG.BuildVersions.v2,
"&clbv=",b.scv].join("");b.ffs.CFF_SendGDPRForAll&&(EBGInfra.isDefinedNotNull(b.gdpr)&&(e+="&gdpr="+b.gdpr),EBGInfra.isDefinedNotNull(b.gdprconsent)&&(e+="&gdpr_consent="+b.gdprconsent));a=b.ffs&&b.ffs.CFF_SendUndefined;if(!a&&"undefined"!==typeof b.gdprpurposes||a)e+="&gdprpurposes="+b.gdprpurposes;b.defaultImageDisplayed&&this._cdiReason&&(e+="&di=1&dir="+this._cdiReason);if(d.originalDeliveryGroupId||d.deliveryGroupId)e+="&dg="+(d.originalDeliveryGroupId||d.deliveryGroupId);d.subDeliveryGroupId&&
(e+="&sdg="+d.subDeliveryGroupId);b.diAppId&&(e+="&diappid="+b.diAppId);b.isNXT&&(e+="&ctick="+c);e+="&ord="+Math.random();EBG.adaptor.reportToRemoteServer(e,!0);this._dpm.send(EBG.DataProfile.SERVING,{cimp:1,adsid:this.adsid});b=EBG.Events;c=new b.Event(b.EventNames.IMPRESSION_SENT);c.timing=b.EventTiming.ONTIME;EBG.eventMgr.dispatchEvent(c)},_subscribeEventTriggeringURLs:function(){var a=this._adConfig;if(a.eventTrackingURLs){a.eventTrackingURLs=this._eventTrackingURLsAdapter(a.eventTrackingURLs);
for(var b in a.eventTrackingURLs)this._subscribeToAdEvent(b,this._handleEventTrackingURLs,EBG.Events.EventTiming.ONTIME)}},_eventTrackingURLsAdapter:function(a){function b(f){c.ebVideoInteraction=c.ebVideoInteraction||[];c.ebVideoInteraction.push({filter:{"eventData.intName":f},urls:a[d]})}var c={},d,e=EBG.VideoInteraction;for(d in a)switch(d){case "vidStart":b(e.STARTED);break;case "vid25Played":b(e.PERCENT_25_PLAYED);break;case "vid50Played":b(e.PERCENT_50_PLAYED);break;case "vid75Played":b(e.PERCENT_75_PLAYED);
break;case "vidFullyPlayed":b(e.FULLPLAY)}return c},_handleEventTrackingURLs:function(a){for(var b=this._adConfig.eventTrackingURLs[a.name],c=0;c<b.length;c++){var d=b[c];if(d.filter)for(var e in d.filter)EBG.valueFromPath(a,e)==d.filter[e]&&this._reportImpressionTrackingURLs(d.urls);else this._reportImpressionTrackingURLs(d.urls)}},_counterInteractionHandler:function(a){void("");var b=this._adConfig;try{!b.ffs.CFF_DisableOnClickImp&&!b.impressionSent&&-1<
this.userEvents.indexOf(a.name)&&(this.sendDebug({click_impression:1}),this._handleClientImpression(a));var c=a.eventData,d=c.intName||BG.Interactions.SystemInts.CLICK;a.name!=EBG.EBMessage.AUTOMATIC_EVENT_COUNTER&&this.sendTLDebug(a.name,{eb_ebsid:c.ebsid,eb_adsid:c.adsid});c.clickUrl=EBGInfra.replaceURLTokens(c.clickUrl,b);c.clickedVerUrl=EBGInfra.replaceURLTokens(c.clickedVerUrl,b);EBG.intMgr.handleCounterInteraction(d,this._adConfig.uid,0,null,c,"undefined"!=typeof c.handleClickInt?c.handleClickInt:
!0)}catch(e){void("")}EBG.log.endGroup()},_versionTrackingImpressionHandler:function(a){void("");try{a.eventData.impTrackingUrls&&this._reportImpressionTrackingURLs(a.eventData.impTrackingUrls)}catch(b){void("")}EBG.log.endGroup()},_reportImpressionTrackingURLs:function(a){var b=this._adConfig;if(!EBG.isPreview||EBG.isTestMode)for(var c=0;c<a.length;c++){var d=
a[c];d&&(d=EBGInfra.replaceURLTokens(d,b),EBG.Autolina&&EBG.Autolina.report(d,EBG.Autolina.reportType.THIRDPARTY),EBG.adaptor.reportToRemoteServerUsingImage(d),b.ffs.CFF_ReportTPUrl&&this.sendDebug({tpurl:encodeURIComponent(d)}))}},_show:function(){var a=this,b=a._adConfig;void("");var c=!a._canShow()||b.showOnlyImage;b.defaultImageDisplayed=!(!c||!b.defaultImagePath);var d=b.showOnlyImage;a._verifyPlaceHolder();b.imageOnly&&a._dpm.send(EBG.DataProfile.DEBUG,{imgad:1,adsid:a.adsid});
var e=EBG.Events,f=e.EventNames,g=e.EventTiming,h=new e.Event(f.SHOW_AD);h.dispatcher=a;h.timing=g.BEFORE;h.eventData={isDefaultImage:b.defaultImageDisplayed};EBG.eventMgr.dispatchEvent(h);d!==b.showOnlyImage&&(c=!a._canShow()||b.showOnlyImage||b.showAieDefaultImage);a._calculateTimePageLoaded();a._subscribeToEvents();EBG.intMgr.initAdData(b,b.shouldReportImpression||b.isInstream?!0:!1);a._addSystemInteractions();d=EBG.adaptor;EBG.AdChoice&&EBG.AdChoice.AdChoiceManager?(a._adChoice=new EBG.AdChoice.AdChoiceManager(b),
a._adChoice.init()):b.AcIncludeMarker&&d.loadModule("AdChoice",b,function(k){a._adChoice=new (k||window).EBG.AdChoice.AdChoiceManager(b);a._adChoice.init()},a);(h=d.getElementById(b.placeHolderId))&&a.resizePlaceHolder&&"undefined"!=typeof b.display&&d.setElemStyle(h,"display",b.display);c?(b.imageOnly||a._dpm.send(EBG.DataProfile.SERVING,{csdi:1,adsid:a.adsid}),b.defaultImagePath?(void(""),b.imageOnly||(c=new e.Event(f.DEFAULT_IMPRESSION),c.eventData={impTrackingUrls:b.defaultImpTrackingUrls},
c.dispatcher=a,c.timing=g.ONTIME,EBG.eventMgr.dispatchEvent(c)),a._subscribeToAdEvent(f.ADD_BANNER_DEFAULT_IMAGE_CREATIVE,a._terminateShow,g.AFTER),a._showOnlyDefaultImg=!0,a.checkAndShowDefaultImage(a.showDefaultImage)):(void(""),b.reportImpressionType==EBG.ReportImpressionType.CLIENT?a._dispatchClientImpression(!0):b.reportImpressionType==EBG.ReportImpressionType.DELAYED&&
this._reportImpression&&a._reportImpression(!0))):(a._showOnlyDefaultImg=!1,a._addVideoInteractions(),a._addCustomInteractions(),b.useHtmlConvertor&&a._subscribeToAdEvent(f.ADD_CREATIVES,a._terminateShow,g.AFTER),a._addCreatives(),b.useHtmlConvertor||a._terminateShow());EBG.log.endGroup()},_getAdSize:function(){return{adWidth:EBG.px(this._adConfig.width),adHeight:EBG.px(this._adConfig.height)}},_terminateShow:function(a){var b=EBG.adaptor,c=this.placeHolderElement=b.getElementById(this._adConfig.placeHolderId);
if(c&&this.resizePlaceHolder){var d=this._getAdSize();b.setElemStyle(c,"width",d.adWidth);b.setElemStyle(c,"height",d.adHeight);b.setElemStyle(c,"margin","0px auto")}b=EBG.Events;c=new b.Event(b.EventNames.SHOW_AD);c.dispatcher=this;c.timing=b.EventTiming.ONTIME_AND_AFTER;c.eventData={isDefaultImage:a?!0:!1};EBG.eventMgr.dispatchEvent(c)},_verifyPlaceHolder:function(){var a=this._adConfig.placeHolderId;EBG.adaptor.getElementById(a)||document.body||(void(""),
document.write('<img style="width:0;height:0"></img>'));return EBG.adaptor.getElementById(a)},_canShow:function(){return!0},_onPlayHandler:function(){void("");this._executeEvents(this._adConfig.arrOnPlayEvents);EBG.log.endGroup()},_onDownloadHandler:function(){void("");this._executeEvents(this._adConfig.arrOnStartDnlEvents);EBG.log.endGroup()},_collectUrl:function(){void("");var a=this._adConfig;if(EBG.isPreview)void("");
else if(a.shouldCollectUrl)try{var b=top.document.URL;void("");EBG.adaptor.reportToRemoteServer(EBG.format("{0}{1}/BurstingPipe/adServer.bs?cn=curl&ai={2}&url=$${3}$$",EBG.protocol,a.bsPath,a.adId,b))}catch(c){void("")}else void("");EBG.log.endGroup()},_executeEvents:function(a){void("");if(a){for(var b=this._adConfig,c=b.uid,d=b.placeHolderId,e=EBG.adaptor,
f,g,h=0;h<a.length;h++)switch(g=EBGInfra.replaceURLTokens(a[h].url,b),a[h].typeId){case 3:f="ebPlayScript"+h;void("");e.writeScript(e.generateElementId(f,c),g,d);break;case 5:f="ebDnlScript"+h;void("");e.writeScript(e.generateElementId(f,c),g,d);break;case 4:f="ebPlayIFR"+h;void("");e.writeReportingIFrame(e.generateElementId(f,c),g,d);break;case 6:f="ebDnlIFR"+h;void("",
f,g);e.writeReportingIFrame(e.generateElementId(f,c),g,d);break;default:void("",a[h].typeId,a[h].url)}EBG.log.endGroup()}},_addSystemInteractions:function(){void("");var a=EBG.Interactions.SystemInts,b=this._adConfig;try{var c=b.interactions[a.CLICK],d=this._addCounterInteraction.bind(this);if(c){var e=EBG.Interactions.Categories.SYSTEM;b.interactions[a.DEFAULT_CLICK]?this._hasDefaultImageInteraction=!0:
b.interactions[a.DEFAULT_CLICK]=EBG.cloneObj(c);d(a.CLICK,e);d(a.DEFAULT_CLICK,e)}var f=new EBG.Interactions.CounterInteractionData(a.ACTUAL_SIZE,e,b.uid);f.initiationType=EBG.Interactions.InitiationTypes.AUTO;f.numLeftToReport=f.numToReport=1;f.reportImmediately=!0;f.useInteractionsStrPipe=!0;b.interactionTracker={ActualSize:{reported:0,seq:0}};var g=new EBG.Interactions.CounterInteraction(f);EBG.intMgr.addInteraction(g,a.ACTUAL_SIZE);EBG.Ads.StdBanner&&this instanceof EBG.Ads.StdBanner||EBG.Ads.WallpaperAd&&
this instanceof EBG.Ads.WallpaperAd||(d(a.AD_START,e,!0,1),d(a.END_OF_SESSION,e,!1,1),d(a.AD_STACKING,e,!1,1),d(a.MULTI_BURN,e,!1,1),d(a.AD_COLLISION,e,!1,1),d(a.AD_CAROUSEL,e,!1,1),d(a.HEAVY_AD_INTERVENTION,e,!1,1),b.adParamsEnabled&&d(a.AD_PARAMS,e,!1,5,null,null,!0),b.verUrlEnabled&&d(a.VER_URL,e,!1,1,null,null,!0))}catch(h){void("")}EBG.log.endGroup()},_addCounterInteraction:function(a,b,c){void("");var d=this._adConfig.interactions[a];
b=new EBG.Interactions.CounterInteractionData(a,b,this._adConfig.uid);b.initiationType=d.nInitiated?EBG.Interactions.InitiationTypes.USER:EBG.Interactions.InitiationTypes.AUTO;b.countAsClick=d.fClick;d.agencyURL&&(void(""),b.remoteServers.agencyUrl=d.agencyURL);d.networkURL&&(void(""),b.remoteServers.networkUrl=d.networkURL);this._adjustClickTarget(a);b.counterJumpUrlData=
d;b.reportImmediately=c?!0:!1;a=new EBG.Interactions.CounterInteraction(b);EBG.intMgr.addInteraction(a);EBG.log.endGroup()},_addVideoInteractions:function(){},_addCustomInteractions:function(){},_adjustClickTarget:function(a){void("");a=this._adConfig.interactions[a];switch(a.target){case 0:var b=EBG.WindowTarget.SELF;break;case 2:b=EBG.WindowTarget.TOP;break;default:b=EBG.WindowTarget.BLANK}a.target=b;EBG.log.endGroup()},_subscribeToEvents:function(){void("");
var a=this,b=a._subscribeToAdEvent.bind(a),c=a._adConfig,d=EBG.EBMessage,e=EBG.Events,f=e.EventNames,g=e.EventTiming,h=g.ONTIME,k=g.AFTER,l=g.BEFORE;c.interactionsToReport&&b(f.ADD_INTERACTION,a._handleInteractionsSubscription,l);b(d.CLICKTHROUGH,a._counterInteractionHandler);b(d.VERSION_TRACKING_IMPRESSION,a._versionTrackingImpressionHandler);b(f.DEFAULT_IMPRESSION,a._versionTrackingImpressionHandler,h);b(f.DEFAULT_CLICK,a._counterInteractionHandler);b(f.ADD_CREATIVES,a._onAddCreativesHandler,h);
b(f.SHOW_AD,a._onDownloadHandler,h);b(f.SHOW_AD,a._onPlayHandler,k);b(f.SHOW_AD,a._collectUrl,k);c.adParamsEnabled&&b(f.AD_START,a._reportAdParams,g.AFTER);b(d.NOTIFY_INTERACTION_MONITOR,a._notifyInteractionManager);d=new e.EventSubscription(f.ELEMENT_LOADED,function(m){m.eventData.adUId==c.uid&&a._triggerAdStart()},a);d.timing=h;EBG.eventMgr.subscribeToEvent(d);b(f.THROTTLED,a._handleCreativeThrottled);EBG.eventMgr.subscribeToEvent(new e.EventSubscription(f.PAGE_UNLOAD,a._unLoadHandler,a));EBG.log.endGroup()},
_handleInteractionsSubscription:function(a){try{var b=a.eventData.interactionData.reportingName;if(this._adConfig.interactionsToReport&&this._adConfig.interactionsToReport[b])return void(""),!0;void("");return!1}catch(c){void("")}},_onAddCreativesHandler:function(a){void("");
var b=this._adConfig;a&&a.eventData&&a.eventData.creativeType&&a.eventData.creativeType==EBG.Events.EventNames.ADD_BANNER_DEFAULT_IMAGE_CREATIVE||this._checkForCreativeThrottling();this._actualSizeDetector||(this._actualSizeDetector=new EBG.RichModules.ActualSizeDetector(b,a));try{if(EBG.Initializer._getAdClass({tn:b.templateName}).requiresIframeBust&&b.actualServingMode!=EBG.Adaptors.ServingMode.SCRIPT)void("");
else{var c=a.dispatcher._adConfig.placeHolderId;if(c){void("");var d=(b.displayWin||EBG.adaptor.getDisplayWin()).document.getElementById(c);d&&(d.style.backgroundImage="",d.onclick=function(){})}else void("")}}catch(e){void("")}},_checkForCreativeThrottling:function(){void("");
var a=this._CCs;for(cc in a)a.hasOwnProperty(cc)&&a[cc].detectThrottling&&(a[cc].detectThrottling(),this._subscribeToAdEvent(EBG.Events.EventNames.MOUSE_OVER,this._stopPollingForThrottle,EBG.Events.EventTiming.ONTIME))},_stopPollingForThrottle:function(a){if(a&&a.eventData){a=a.eventData;var b=!0,c=this._CCs;if(a&&a.target&&a.target.children){for(var d in c)c.hasOwnProperty(d)&&(a.target.children[d]&&c[d].stopPollingForThrottle&&c[d].stopPollingForThrottle(),c[d].isPollingForThrottle&&1==c[d].isPollingForThrottle&&
(b=!1));b&&(d=EBG.Events,a=new d.EventSubscription(d.EventNames.MOUSE_OVER,this._stopPollingForThrottle,this),a.dispatcherFilters={"_adConfig.rnd":this._adConfig.rnd},a.timing=d.EventTiming.ONTIME,EBG.eventMgr.unsubscribeFromEvent(a))}}},_updateURLs:function(){for(var a=EBGInfra.replaceURLTokens,b=this._adConfig,c=b.clickTrackingUrls,d=0;d<c.length;d++)c[d]=a(c[d]);c=b.interactions;for(var e in c)c.hasOwnProperty(e)&&(c[e].agencyURL=a(c[e].agencyURL,b),c[e].networkURL=a(c[e].networkURL,b),c[e].jumpUrl=
a(c[e].jumpUrl,b))},_handleMultiBurn:function(){this._reportMultiBurn(this._checkMultiBurn())},_checkMultiBurn:function(){void("");var a={isAdCarousel:!1,isAdCollision:!1,isMultiBurn:!1},b=this._adConfig,c=b.advertiserId,d=b.placementId;b=b.uid;try{var e=EBG.adaptor.getTopAccessibleWindow(!1);e.ebAds=e.ebAds||{};for(var f in e.ebAds){var g=e.ebAds[f];if(b!=g._adConfig.uid&&g.placeHolderElement){if(!g.removed)try{0==g.placeHolderElement.getClientRects().length&&(g.removed=
!0)}catch(k){g.removed=!0}if(g.removed){var h=(new Date).getTime()/1E3-g.startTime;!a.isAdCarousel&&10<h&&150>h&&(a.isAdCarousel=!0)}else a.isMultiBurn||d!==g._adConfig.placementId?a.isMultiBurn||a.isAdCollision||!c||c!==g._adConfig.advertiserId||(a.isAdCollision=!0):a.isMultiBurn=!0}}}catch(k){void("")}return a},_reportMultiBurn:function(a){var b=this._adConfig.uid,c=EBG.Interactions.SystemInts;a.isMultiBurn?EBG.intMgr.handleCounterInteraction(c.MULTI_BURN,b):a.isAdCollision&&
EBG.intMgr.handleCounterInteraction(c.AD_COLLISION,b);a.isAdCarousel&&EBG.intMgr.handleCounterInteraction(c.AD_CAROUSEL,b)},_reportAdParams:function(a){a=this._adConfig;if(EBG.intMgr.isInteractionExist(EBG.Interactions.SystemInts.AD_PARAMS.toLowerCase(),EBG.Interactions.InteractionTypes.COUNTER,a.uid))if(!EBG.adaptor.isPageLoaded())this._subscribeToAdEvent(EBG.Events.EventNames.PAGE_LOAD,this._reportAdParams);else if(a.adParamsEnabled){var b=this._getServingModeNum(),c=this._getBannerLocation();c=
c&&c.X+"x"+c.Y;var d=this.visibilityMgr?this.visibilityMgr.getVisibilityProviderNum():0,e=a.width+"x"+a.height,f=this._getAdCodeBase(),g=EBG.adaptor.browser.getEnvironment();b={ifr:b,loc:c,size:e,cb:f,env:g};a.Purposes.Debug&&(b.vsbp=d);a.wurflValue&&(b.bi=a.wurflValue);EBG.intMgr.handleCounterInteraction(EBG.Interactions.SystemInts.AD_PARAMS,a.uid,0,!1,{value:b})}},_calculateTimePageLoaded:function(a){a=this._adConfig;EBG.adaptor.isPageLoaded()?this._adConfig.performance&&this._dpm.send(EBG.DataProfile.DEBUG,
{timePage:EBG.getCtick(a.startTimeD,a.startTimeP,"cframe"===a.exscope)}):this._subscribeToAdEvent(EBG.Events.EventNames.PAGE_LOAD,this._calculateTimePageLoaded)},_getBannerLocation:function(a){var b=this,c=EBG.adaptor;if(a&&EBG.isNumber(a.X)&&EBG.isNumber(a.Y)){var d,e=function(){d=c.getPositioningByElement(b.frameElement);a.X+=d.X;a.Y+=d.Y};c.walkUpIframes(function(){b.location.ancestorOrigins?b.location.ancestorOrigins[0]&&b.location.ancestorOrigins[0]==b.location.origin&&b.frameElement&&e.call(b):
b.frameElement&&e.call(b)},null,c.getDisplayWin())}return a},_getAdCodeBase:function(a){a=EBG.isDefined(a)?a:0;this._showOnlyDefaultImg&&(a=0);1==a&&this._adConfig.hasConverter&&this._adConfig.useHtmlConvertor&&(a=3);return a},_getServingModeNum:function(){var a={SCRIPT:0,FRIENDLY_IFRAME:1,IFRAME:2,INNER_IFRAME:3,TOPMOST_FRIENDLY_IFRAME:4};if(!EBG.adaptor.serving)return-1;var b=EBG.adaptor.serving.detectServingEnvironment(this._adConfig.actualServingMode);return EBG.isDefined(a[b])?a[b]:-1},_getTemplateNameNum:function(){return{Html5StdBanner:0,
Html5Banner:1,Html5SEBanner:2,Html5ExpBanner:3,Html5PoliteBanner:4,StdBanner:5,Banner:6,SingleExpBanner:7,ExpBanner:8,Visibility:9,FloatingAd:10,FloatingAdWithReminder:11,Tracking:12}[this._adConfig.templateName]||-1},_pairsToObj:function(a,b){return EBGInfra.pairsToObj(a,b)},_subscribeToAdEvent:function(a,b,c){a=new EBG.Events.EventSubscription(a,b,this);a.dispatcherFilters={"_adConfig.rnd":this._adConfig.rnd};c&&(a.timing=c);EBG.eventMgr.subscribeToEvent(a);return a},_getCDIUrl:function(a){a=a&&
a.defaultImagePath?a.defaultImagePath:null;return EBG.isDefinedNotNull(a)&&""!=a?a:EBG.combinePaths(this._adConfig.resourcePath,this._adConfig.defaultImagePath)},_removePrefixFromVersions:function(){var a="",b=this._adConfig.massVersioning.adVersions.toString();if(b){a=[];b=b.split(",");for(var c=0;c<b.length;c++){var d=b[c].indexOf("_");a.push(-1==d?b[c]:b[c].substring(0,d))}a=a.join()}return a},buildJSONImgObj:function(a,b){var c=this._adConfig;a=EBG.format(a+"_{0}",c.uid);return{tagName:EBG.Adaptors.TagNames.IMG,
attributes:{id:a,src:b,width:c.width,height:c.height,style:{width:c.width,height:c.height},title:c.title?c.title:"",onload:EBG.format('(function(e) { var event = new EBG.Events.Event(EBG.Events.EventNames.ELEMENT_LOADED);event.dispatcher = this;event.eventData = { DOMEvent: e, elementId: "{0}", adUId:"{1}" };event.timing = EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(event);} )(typeof arguments != "undefined" ? arguments[0] : null);',a,c.uid)}}},setImageClick:function(a,b,c,
d,e){var f=this._adConfig.uid;a.attributes.onclick=EBG.format('EBG.ads["'+f+'"].onImageClick("{0}", {1},"{2}", "{3}", "{4}", "{5}")',f,b,a.attributes.id,c,d,e);EBG.mergeObj({cursor:"pointer; cursor: hand"},a.attributes.style)},_addDefaultImgRequest:function(){this.checkAndShowDefaultImage(this.showDefaultImage)},checkAndShowDefaultImage:function(a){var b=this._adConfig,c="",d=".xml",e=!0,f=b.massVersioning;if(EBG.isDefinedNotNull(b.svJSON)||EBG.isDefinedNotNull(b.sv3CatalogMap)||f.versionFullPath)d=
".json",e=!1;EBG.isDefinedNotNull(f)&&""!=f.defaultAdVersion&&""!=f.adBasePath&&(c=f.defaultAdVersion,c=0<f.massVersionFolderDivider?EBG.Ads.Ad.Fn.fixMVPathString(c,f.massVersionFolderDivider):c,f.versionFullPath&&(c=c.p),c=EBG.combinePaths(f.adBasePath,c+d),c=f.versionFullPath?EBG.combinePaths("//"+b.sHost,c):EBG.combinePaths(b.resourcePath,c));b=e?this._readMassVersionInfo:this._readJsonVersionInfo;c&&EBG.adaptor.getDataFromRemoteServer(c,b,this,!0,e)||a.apply(this)},subscribeToStandardElementEvents:function(a){},
showDefaultImage:function(a){void("");var b=this._adConfig,c=EBG.Events,d=c.EventNames,e=c.EventTiming,f=(b.showOnlyImage||this._cdiReason)&&this._hasDefaultImageInteraction;if(b.showOnlyImage||b.imageOnly||b.shouldReportImpression)var g=a&&a.isValid?a.defaultImagePath:EBG.combinePaths(b.resourcePath,b.defaultImagePath);else g=a&&a.isValid?this._getCDIUrl(a):this._getCDIUrl(),b.massVersioning.adVersions="";g=this.buildJSONImgObj("ebDefaultImg",g);var h=a&&a.isValid&&
a.jumpUrl?a.jumpUrl:f?b.interactions[EBG.Interactions.SystemInts.DEFAULT_CLICK].jumpUrl:b.interactions[EBG.Interactions.SystemInts.CLICK].jumpUrl;h&&this.setImageClick(g,f,h,a&&a.isValid?a.selectedVersion:"",a&&a.isValid?a.thirdPartyClks:"");a&&a.thirdPartyImps&&a.thirdPartyImps.length&&this._reportImpressionTrackingURLs(a.thirdPartyImps);a=new c.Event(d.ADD_CREATIVES);a.dispatcher=this;a.eventData={tagsObj:g,assetId:g.attributes.id,isPanel:!1,creativeType:d.ADD_BANNER_DEFAULT_IMAGE_CREATIVE};a.timing=
e.BEFORE;f=EBG.eventMgr.dispatchEvent(a);!f&&(c=new c.Event(d.ADD_BANNER_DEFAULT_IMAGE_CREATIVE),c.eventData={assetId:g.attributes.id},c.dispatcher=this,c.timing=e.BEFORE,f=EBG.eventMgr.dispatchEvent(c),!f&&(d=EBG.adaptor,b=d.getElementById(b.placeHolderId)))&&(f=d.createImageElement(g),d.setInnerHtml(b,""),b.appendChild(f),this._defaultImgResId=g.attributes.id,this.subscribeToStandardElementEvents(this._defaultImgResId),c.timing=e.ONTIME_AND_AFTER,EBG.eventMgr.dispatchEvent(c),a.timing=e.ONTIME_AND_AFTER,
EBG.eventMgr.dispatchEvent(a),EBG.log.endGroup())},_triggerAdStart:function(a){var b=EBG.Events;this._shouldWaitForTriggerAdStart()&&(!EBGInfra.isDefined(a)||a.name!==EBG.EBMessage.TRIGGER_AD_START)||this._adConfig.adStarted||(this._adConfig.adStarted=!0,a=new b.Event(b.EventNames.AD_START),a.eventData={intName:EBG.Interactions.SystemInts.Ad_START},a.dispatcher=this,a.timing=b.EventTiming.BEFORE,EBG.eventMgr.dispatchEvent(a)||(this._shouldFireAdStart()&&EBG.intMgr.handleCounterInteraction(EBG.Interactions.SystemInts.AD_START,
this._adConfig.uid),a.timing=b.EventTiming.ONTIME_AND_AFTER,EBG.eventMgr.dispatchEvent(a)))},_shouldFireAdStart:function(){var a=this._adConfig;return a.displayVerification||a.visibility.mode==EBG.VisibilityMode.BASIC_MODE||a.visibility.mode==EBG.VisibilityMode.ENHANCED_MODE},_shouldWaitForTriggerAdStart:function(){return!1},_readJsonVersionInfo:function(a){var b=JSON.parse(a),c=this._adConfig;a=c.massVersioning.defaultAdVersion&&c.massVersioning.defaultAdVersion.indexOf&&c.massVersioning.defaultAdVersion.indexOf("_");
a=c.massVersioning.defaultAdVersion&&c.massVersioning.defaultAdVersion.v?c.massVersioning.defaultAdVersion.v:-1==a?c.massVersioning.defaultAdVersion:c.massVersioning.defaultAdVersion.substring(0,a);a={isValid:!!b.DefaultImage,jumpUrl:b.ClickthroughURL?b.ClickthroughURL:"",defaultImagePath:b.DefaultImage?b.DefaultImage:"",selectedVersion:a,thirdPartyImps:b.ThirdPartyImpressionURL?this._parseUrlValue(b.ThirdPartyImpressionURL):[],thirdPartyClks:b.ThirdPartyClickthroughURL?this._parseUrlValue(b.ThirdPartyClickthroughURL):
[],versionId:b.versionId?b.versionId:0};if(a.isValid&&EBG.isNumber(b.DefaultImage)){a.isValid=!1;b=c.assets;var d="ebMovie"+a.defaultImagePath;EBG.isDefinedNotNull(b[d].dsPath)&&(a.defaultImagePath=EBG.isInWorkshop?b[d].dsPath:EBG.combinePaths(c.resourcePath,b[d].dsPath),a.isValid=!0)}(this._showOnlyDefaultImg?this.showDefaultImage:this._showImgAsCreative).apply(this,[a])},_readMassVersionInfo:function(a){var b=this._adConfig,c={isValid:!1,jumpUrl:"",defaultImagePath:"",selectedVersion:"",thirdPartyImps:[],
thirdPartyClks:[]};try{if(EBG.isDefined(a)&&null!=a){var d=a.documentElement.attributes.getNamedItem("productClickThrough"),e=a.documentElement.attributes.getNamedItem("DefaultImage"),f=a.documentElement.attributes.getNamedItem("ThirdPartyImps"),g=a.documentElement.attributes.getNamedItem("ThirdPartyClickThrough"),h=b.massVersioning.defaultAdVersion.indexOf("_");c={isValid:null!=e&&""!=e.value,jumpUrl:null!=d?d.value:"",defaultImagePath:null!=e?e.value:"",selectedVersion:-1==h?b.massVersioning.defaultAdVersion:
b.massVersioning.defaultAdVersion.substring(0,h),thirdPartyImps:f&&f.value?this._parseUrlValue(f.value):[],thirdPartyClks:g&&g.value?this._parseUrlValue(g.value):[]};if(c.isValid&&EBG.isNumber(c.defaultImagePath)){c.isValid=!1;var k=b.assets,l="ebMovie"+c.defaultImagePath;EBG.isDefinedNotNull(k[l].dsPath)&&(c.defaultImagePath=EBG.isInWorkshop?k[l].dsPath:EBG.combinePaths(b.resourcePath,k[l].dsPath),c.isValid=!0)}}(this._showOnlyDefaultImg?this.showDefaultImage:this._showImgAsCreative).apply(this,
[c])}catch(m){void(""),this.showDefaultImage(c)}},_parseUrlValue:function(a){var b=[];a=a.split("\u007f");for(var c=0;c<a.length;c++)for(var d=a[c].split("|"),e=0;e<d.length;e++)b.push(d[e]);return b},_sendInitAdInformation:function(){var a=this._adConfig;a.sendMetricsData&&this._dpm.send(EBG.DataProfile.INTERACTION,{ua:window.navigator.userAgent});var b={frmt:this._getTemplateNameNum(),srvmd:this._getServingModeNum(),prtcl:EBG.protocol},c=this._getBannerLocation();
c&&(b.loc=c.X+"x"+c.Y);b.size=a.width+"x"+a.height;b.cb=this._getAdCodeBase();this._dpm.send(EBG.DataProfile.SERVING,b)},_sendCustomFormatInformation:function(){var a=this._adConfig;if(a.liquid&&EBG.customFormats){var b=EBG.customFormats[a.uid];if((b=Object.values(b)&&Object.values(b)[0])&&b.pm){var c={};c.liquid_id=b.pm.PROGRAMMATIC_SETTINGS_FILENAME.split("_")[1].split(".")[0];this._dpm.send(EBG.DataProfile.DEBUG,c)}}if(a.hasOwnProperty("CF_DebugData")){c={};for(var d in a.CF_DebugData)c["cf_"+
d]=a.CF_DebugData[d];this._dpm.send(EBG.DataProfile.DEBUG,c)}},_switchAssetsAfterThrottle:function(){},_handleCreativeThrottled:function(a){var b=EBG.ThrottleStates,c=this._adConfig.uid,d=a.eventData,e=EBG.adaptor;d&&(d.state&&d.state==b.RESUME?(clearTimeout(this._throttleTimeout),this._throttleState=b.RESUME):d.state&&d.state==b.POLLED&&a.dispatcher._adConfig.uid==c?(this._switchAssetsAfterThrottle(),e.flash.removeThrottleDetectionSwf(c)):this.visibilityMgr&&d.id&&(this.visibilityMgr.isVisibile()?
(d=(d=e.getElementById(d.id))&&e.getBoundingClientRect(d),this._throttleState==b.THROTTLE&&(!d||0<d.width&&0<d.height)?(this._switchAssetsAfterThrottle(),e.flash.removeThrottleDetectionSwf(c)):this._throttleTimeout=EBG.runTimed(this,this._handleCreativeThrottled,[a],this._throttleTimeoutDuration)):this._subscribeToAdEvent(EBG.Events.EventNames.PAGE_SCROLL,this._checkIfStillThrottled),this._throttleState=b.THROTTLE))},_checkIfStillThrottled:function(a){var b=this._adConfig,c=EBG.Events,d=c.EventNames.PAGE_SCROLL;
a?this.visibilityMgr&&!this._throttleTimeout&&this._throttleState==EBG.ThrottleStates.THROTTLE&&this.visibilityMgr.isVisibile()&&(this._throttleTimeout=EBG.runTimed(this,this._checkIfStillThrottled,[],1E3)):(this._throttleState==EBG.ThrottleStates.THROTTLE&&this.visibilityMgr&&this.visibilityMgr.isVisibile()&&(this._switchAssetsAfterThrottle(),EBG.adaptor.flash.removeThrottleDetectionSwf(b.uid),a=new c.EventSubscription(d,this._checkIfStillThrottled,this),a.dispatcherFilters={"_adConfig.rnd":b.rnd},
a.timing=c.EventTiming.ONTIME,EBG.eventMgr.unsubscribeFromEvent(a)),clearTimeout(this._throttleTimeout),this._throttleTimeout=null,this._throttleState==EBG.ThrottleStates.RESUME&&(a=new c.EventSubscription(d,this._checkIfStillThrottled,this),a.dispatcherFilters={"_adConfig.rnd":b.rnd},a.timing=c.EventTiming.ONTIME,EBG.eventMgr.unsubscribeFromEvent(a)))},dispatchCustomEvent:function(a,b,c,d){a=new EBG.Events.Event(a);a.dispatcher=d;a.eventData={assetId:b};a.timing=c;return EBG.eventMgr.dispatchEvent(a)},
_notifyInteractionManager:function(a){var b={};a&&a.eventData&&(b=a.eventData);b.elapsedTime="";EBG.intMgr.getAdDuration&&(b.elapsedTime=EBG.intMgr.getAdDuration(this._adConfig.uid));EBG.adaptor.notifyIntMonitor(a.eventData)},onImageClick:function(a,b,c,d,e,f){void("");var g=EBG.Events;try{var h=b?new g.Event(g.EventNames.DEFAULT_CLICK):new g.Event(EBG.EBMessage.CLICKTHROUGH);h.eventData=b?{intName:EBG.Interactions.SystemInts.DEFAULT_CLICK}:
{intName:EBG.Interactions.SystemInts.CLICK};EBG.isDefined(d)&&(h.eventData.clickUrl=d);EBG.isDefined(e)&&(h.eventData.clickedVersion=e);EBG.isDefined(f)&&(h.eventData.clickedVerUrl=f);h.dispatcher=EBG.ads[a];EBG.eventMgr.dispatchEvent(h);if(EBG.adaptor.intMonitorExist()){var k=new g.Event(EBG.EBMessage.NOTIFY_INTERACTION_MONITOR);k.eventData={command:EBG.EBMessage.CLICKTHROUGH,args:"",objName:c,adId:EBG.Ads.Ad.Fn.getAdIdFromAdUId(a)};EBG.eventMgr.dispatchEvent(k)}}catch(l){void("",
l)}},_unLoadHandler:function(){void("");var a=EBG.Events,b=new a.Event(a.EventNames.AD_UNLOAD);b.dispatcher=this;b.timing=a.EventTiming.BEFORE;if(!EBG.eventMgr.dispatchEvent(b)){try{EBG.adaptor.removeElement(this._adConfig.placeHolderId)}catch(c){void("")}b.timing=a.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(b)}EBG.log.endGroup()},sendTLDebug:function(a,b){var c=this._adConfig;c.ffs&&
c.ffs.CFF_DisableTimelineDebug||!this.timeline||(this.timeline.update(a,b),a=this.timeline.getData(),this.sendDebug(a))},sendDebug:function(a){a.adsid=""+this.adsid;this._dpm.sendNow(this._adConfig.dpUrlEvents,a)}};EBG.declareClass(EBG.Ads.Ad,null);
EBG.Ads.Ad.Fn={getAdIdFromAdUId:function(a){return a.split("_")[0]},getRandFromAdUId:function(a){return a.split("_")[1]},getVersionToReport:function(a){var b=a;a&&EBG.isArray(a)&&1==a.length?b=a[0]:a&&EBG.isArray(a)?b="m":a.indexOf&&(b=-1<a.indexOf(",")?"m":-1<a.indexOf("_")?a.substr(0,a.indexOf("_")):a);return b},getAdVersions:function(a){var b="";a=a.adVersions.split(",");for(var c=0;c<a.length;c++)b&&(b+=","),b+=a[c];return b},fixMVPathString:function(a,b){if(0<b){a=a.split(",");for(var c="",d=
"",e,f,g,h=0;h<a.length;h++)g=a[h],e="",EBG.isDefinedNotNull(g.match("_"))&&(e=g.substr(g.indexOf("_"))),g=parseInt(g),f=parseInt(g/b),g=f+e+"/"+g,c+=d+g,""==d&&(d=",")}return c},_handlePageResizeOrScroll:function(){}};EBG.declareNamespace("EnableVisibilityUtil");EBG.EnableVisibilityUtil=function(){};EBG.EnableVisibilityUtil.initVisibilityManager=function(a,b){this.visibilityMgr?this.visibilityMgr.updateResourceObjId(b):this.visibilityMgr=new EBG.RichModules.VisibilityManager(a,b)};
EBG.EnableVisibilityUtil.addVisibilityInteractions=function(){for(var a=EBG.Interactions.Categories.SYSTEM,b=EBG.Interactions.SystemInts,c=[b.VISIBILITY_RECORDABLE,b.VISIBILITY_AGENCY_RECORDABLE,b.VISIBILITY_ADVERTISER_RECORDABLE,b.VISIBILITY_ADVERTISER,b.VISIBILITY_AGENCY,b.VISIBILITY_IAB];c.length;){var d=c.pop();this._addCounterInteraction(d,a,d===b.VISIBILITY_IAB,1)}c=[b.VISIBILITY_AGENCY_DURATION,b.VISIBILITY_ADVERTISER_DURATION,b.VISIBILITY_AVG_AD_SURFACE];for(EBG.adaptor.isInApp()||c.push(b.VISIBILITY_AVG_SCREEN_SHARE);c.length;)this._addTimerInteraction(c.pop(),
a)};
EBG.EnableVisibilityUtil.addPanelVisibilityInteractions=function(){for(var a=EBG.Interactions.Categories.SYSTEM,b=EBG.Interactions.SystemInts,c=[b.VISIBILITY_RECORDABLE,b.VISIBILITY_AGENCY_RECORDABLE,b.VISIBILITY_ADVERTISER_RECORDABLE,b.VISIBILITY_ADVERTISER,b.VISIBILITY_AGENCY,b.VISIBILITY_IAB,b.AD_STACKING];c.length;){var d=c.pop();this._addCounterInteraction("P"+d,a,d===b.VISIBILITY_IAB,1,!0)}c=[b.VISIBILITY_AGENCY_DURATION,b.VISIBILITY_ADVERTISER_DURATION,b.VISIBILITY_AVG_AD_SURFACE];for(EBG.adaptor.isInApp()||c.push(b.VISIBILITY_AVG_SCREEN_SHARE);c.length;)this._addTimerInteraction("P"+
c.pop(),a,!0)};EBG.declareClass(EBG.EnableVisibilityUtil,null);EBG.Ads.RichAd=function(a){void("");void("");this._downloadMode=a.dlm;EBG.callSuperConstructor(EBG.Ads.RichAd,this,[a]);EBG.log.endGroup()};
EBG.Ads.RichAd.prototype={isInFullScreenMode:!1,visibilityMgr:null,videoLoaderDrivers:[],_wallpaper:null,_registeredToMouseMove:!1,_mouseMoveTimeOut:null,_isStdAd:function(){return!1},_subscribeToEvents:function(){void("");var a=this._subscribeToAdEvent.bind(this),b=EBG.Events.EventNames,c=EBG.EBMessage,d=EBG.Events.EventTiming;try{EBG.callSuperFunction(EBG.Ads.RichAd,this,"_subscribeToEvents"),void(""),EBG.adaptor.isPageLoaded()?
EBG.runTimed(this,this._handlePageLoaded,[],0):a(b.PAGE_LOAD,this._handlePageLoaded),a(c.NOTIFIED_INTERACTION,this._notifiedInteractionHandler),a(c.VIDEO_INIT,this._videoInitHandler),a(c.VIDEO_INTERACTION,this._videoInteractionHandler),a(c.USER_ACTION_COUNTER,this._counterInteractionHandler),a(c.AUTOMATIC_EVENT_COUNTER,this._counterInteractionHandler),a(c.START_TIMER,this._startTimerHandler),a(c.STOP_TIMER,this._stopTimerHandler),a(c.START_VIDEO_TIMER,this._startTimerVideoHandler),a(c.STOP_VIDEO_TIMER,
this._stopTimerHandler),a(c.UPDATE_TIMER,this._updateTimerHandler),a(c.START_VIDEO,this._startAggregateHandler),a(c.STOP_VIDEO,this._stopAggregateHandler),a(c.UPDATE_VIDEO_DURATION,this._updateAggregationTimeHandler),a(c.INIT_VIDEO_LOADER,this._initVideoLoaderHandler),a(c.VIDEO_LOAD,this._videoLoadHandler),a(c.VIDEO_FS_OPEN,this._videoFSOpenHandler),a(c.VIDEO_FS_CLOSE,this._videoFSCloseHandler),a(c.SET_STATE,this._setStateInCreativeState),a(c.RESET_STATE,this._setStateInCreativeState),a(b.MOUSE_MOVE_NEEDED,
this._mouseMoveNeededHandler,d.BEFORE),a(b.SHOW_AD,this.adCreativesAddedHandler,d.AFTER),a(b.ADD_CREATIVES,this.addCreativesHandler,d.ONTIME),a(b.ADD_BANNER_DEFAULT_IMAGE_CREATIVE,this.addCreativesHandler,d.ONTIME),a(b.DWELL_UNIQUE,this._dwellUniqueEventHandler,d.ONTIME),a(b.RICH_FLASH_PLAYED,this._richFlashPlayedEventHandler,d.ONTIME),a(c.SHOW_DEFAULT_IMAGE,this._addDefaultImgRequest),this._dwellTimeManager=new EBG.Interactions.DwellTimeManager(this._adConfig),this._dwellTimeManager.init(),this._adConfig.bgImgSrc&&
(a(b.CLOSE_AD,this._removeBackgroundImage),a(b.PAGE_UNLOAD,this._removeBackgroundImage)),void("")}catch(e){void("")}EBG.log.endGroup()},_handlePageLoaded:function(){},_handleDelayedImpressionReport:function(){},_clearDelayedImpData:function(){},_reportImpression:function(){},_mouseMoveNeededHandler:function(){if(!this._registeredToMouseMove){var a=new EBG.Events.EventSubscription(EBG.Events.EventNames.MOUSE_MOVE,this._mouseMoveHandler,
this);a.isDocumentEvent=!0;EBG.eventMgr.subscribeToEvent(a);this._registeredToMouseMove=!0}},_mouseMoveHandler:function(a){var b=this;try{b._mouseMoveTimeOut||(b._mouseMoveTimeOut=setTimeout(function(){b._mouseMoveTimeOut=null;for(var c in b._CCs)if(b._CCs.hasOwnProperty(c)&&b._CCs[c]._registeredToMouseMove){var d=EBG.adaptor.getMouseCoordinates(a.eventData);b._CCs[c]._handleMouseMove(d)}},100))}catch(c){void("")}},_dwellUniqueEventHandler:function(a){EBG.intMgr.reportDwellUnique(this._adConfig.uid,
a.eventData.firstTime)},_richFlashPlayedEventHandler:function(a){EBG.intMgr.reportRichFlashPlayed(this._adConfig.uid)},addCreativesHandler:function(a){void("");try{this._adConfig.bgImgSrc&&this._changeBackgroundImage(),this._updateVisibilityManagerData(a.eventData),this._updateAdStackingData(a.eventData)}catch(b){void("")}EBG.log.endGroup()},_updateVisibilityManagerData:function(a){var b=this._adConfig;if(a.isPanel){this.visibilityMgrPanelCollection=
this.visibilityMgrPanelCollection||{};var c=!(this._panels&&this._panels[a.panelName]&&this._panels[a.panelName].visibilityIntEnabled||1==EBG.adaptor.getObjKeys(b.panels).length);this.visibilityMgrPanelCollection[a.assetId]||(this.visibilityMgrPanelCollection[a.assetId]=new EBG.RichModules.VisibilityManager(b,a.assetId,{isPanel:!0,muteInteractions:c,customData:{panelName:a.panelName}}))}else EBG.EnableVisibilityUtil&&EBG.EnableVisibilityUtil.initVisibilityManager.apply(this,[b,a.assetId])},_updateAdStackingData:function(a){this._adStackingDetectorPanel=
this._adStackingDetectorPanel||new EBG.RichModules.AdStackingDetector(this._adConfig,!0);a.isPanel?this._panels&&1==EBG.adaptor.getObjKeys(this._adConfig.panels).length&&this._adStackingDetectorPanel.addElementId(a.assetId,!0):this._adStackingDetector.addElementId(a.assetId,!0)},_addPreloadImg:function(){var a=this._adConfig;this._preloadImgResId=this._addImgAsCreative("ebPreloadImg",EBG.isInWorkshop?a.preloadImagePath:EBG.combinePaths(a.resourcePath,a.preloadImagePath),EBG.Events.EventNames.ADD_BANNER_PRELOAD_IMAGE_CREATIVE)},
_addImgAsCreative:function(a,b,c,d){var e=EBG.Events,f=e.EventTiming;a=this.buildJSONImgObj(a,d&&d.isValid?d.defaultImagePath:b);(b=d&&d.isValid?d.jumpUrl:this._adConfig.interactions[EBG.Interactions.SystemInts.CLICK].jumpUrl)&&this.setImageClick(a,!1,b,d&&d.isValid?d.selectedVersion:"",d&&d.isValid?d.thirdPartyClks:"");e=new e.Event(e.EventNames.ADD_CREATIVES);e.dispatcher=this;e.eventData={tagsObj:a,assetId:a.attributes.id,isPanel:!1,creativeType:c};e.timing=f.BEFORE;if((b=EBG.eventMgr.dispatchEvent(e))||
(b=this.dispatchCustomEvent(c,a.attributes.id,f.BEFORE,this)))return a.attributes.id;b=EBG.adaptor.getElementById(this._adConfig.placeHolderId);if(this._richShown)return null;var g=EBG.adaptor.getElementById("emptyDiv"+this._banner.divId);if(d=d&&g?g:b)return b=EBG.adaptor.createImageElement(a),EBG.adaptor.setInnerHtml(d,""),d.appendChild(b),this.subscribeToStandardElementEvents(a.attributes.id),e.timing=f.ONTIME_AND_AFTER,EBG.eventMgr.dispatchEvent(e),this.dispatchCustomEvent(c,a.attributes.id,f.ONTIME_AND_AFTER,
this),a.attributes.id},_showImgAsCreative:function(a){this._richShown||(this._defaultImgResId=this._addImgAsCreative("ebDefaultImg",EBG.isInWorkshop?this._adConfig.defaultImagePath:EBG.combinePaths(this._adConfig.resourcePath,this._adConfig.defaultImagePath),EBG.Events.EventNames.ADD_BANNER_DEFAULT_IMAGE_CREATIVE,a))},adCreativesAddedHandler:function(){void("");try{this._startTimer(EBG.Interactions.SystemInts.AD_DURATION)}catch(a){void("",
a)}EBG.log.endGroup()},getAdLocationOnPage:function(){var a=this._adConfig,b=this.getAdOffset();if(null==b)return b;var c=EBG.adaptor.getWindowViewPortMetrics(a.displayWin||EBG.adaptor.getDisplayWin());return{isAdOnLeft:b.X+a.width/2<c.Width/2,isAdOnTop:b.Y+a.height/2<c.Height/2}},getAdOffset:function(){return null},getVideoLoaderDriver:function(a,b){void("");var c=this.videoLoaderDrivers;b=b.replace(/\./ig,"/");for(var d=0;d<c.length;d++){var e=c[d];if(e.data.res.id==
a&&e.data.apiPath==b)return void(""),c[d]}void("");return null},_initVideoLoaderHandler:function(a){a.eventData.apiPath=a.eventData.apiPath.replace(/\./ig,"/");void("",a.eventData.apiPath,a.eventData.stretchToFit,
a.eventData.streaming,a.eventData.autoplay,a.eventData.xPos,a.eventData.yPos,a.eventData.width,a.eventData.height,a.eventData.handleClick,a.eventData.newComp);a.eventData.res=EBG.adaptor.getElementById(a.flashResId);a.eventData.ad=this;a=new EBG.Video.VideoLoaderDriver(a.eventData);this.videoLoaderDrivers.push(a)},_videoLoadHandler:function(a){void("",a.eventData.apiPath,
a.eventData.movieName,a.eventData.mute,a.eventData.volume,a.eventData.buffer,a.eventData.fsmovieName,a.eventData.newComp,a.flashResId);a.eventData.apiPath=a.eventData.apiPath.replace(/\./ig,"/");this.getVideoLoaderDriver(a.flashResId,a.eventData.apiPath).load(a.eventData)},_startAggregateHandler:function(a){void("");var b=EBG.VideoInteraction;try{EBG.intMgr.isInteractionExist(b.FULLSCREEN_DURATION.toLowerCase(),EBG.Interactions.InteractionTypes.TIMER,this._adConfig.uid)||
(this._addAggregateInteraction(b.FULLSCREEN_DURATION,EBG.Interactions.Categories.VIDEO),this._addAggregateInteraction(b.VIDEO_PLAY_DURATION,EBG.Interactions.Categories.VIDEO));var c=a.eventData.intName,d=this._getAssetIdFromEvent(a);EBG.intMgr.startAggregate(c,this._adConfig.uid,d)}catch(e){void("")}EBG.log.endGroup()},_updateAggregationTimeHandler:function(a){void("");try{var b=a.eventData.intName,c=parseInt(a.eventData.deltalDuration),
d=this._getAssetIdFromEvent(a);EBG.intMgr.updateAggregation(b,this._adConfig.uid,c,d)}catch(e){void("")}EBG.log.endGroup()},_stopAggregateHandler:function(a){void("");try{var b=a.eventData.intName,c=this._getAssetIdFromEvent(a);EBG.intMgr.stopAggregate(b,this._adConfig.uid,c)}catch(d){void("")}EBG.log.endGroup()},_startTimerVideoHandler:function(a){void("");
var b=EBG.VideoInteraction;try{EBG.intMgr.isInteractionExist(b.FULLSCREEN_DURATION.toLowerCase(),EBG.Interactions.InteractionTypes.TIMER,this._adConfig.uid)||(this._addTimerInteraction(b.FULLSCREEN_DURATION,EBG.Interactions.Categories.VIDEO),this._addTimerInteraction(b.VIDEO_PLAY_DURATION,EBG.Interactions.Categories.VIDEO))}catch(c){void("")}this._startTimerHandler(a);EBG.log.endGroup()},_startTimerHandler:function(a){void("");
try{var b=a.eventData.intName,c=this._getAssetIdFromEvent(a);this._startTimer(b,c)}catch(d){void("")}EBG.log.endGroup()},_stopTimerHandler:function(a){void("");try{var b=a.eventData.intName,c=this._getAssetIdFromEvent(a);this._stopTimer(b,c)}catch(d){void("")}EBG.log.endGroup()},_getAssetIdFromEvent:function(a){var b=this._adConfig,c=EBGInfra.isDefined(a.eventData.assetId)?a.eventData.assetId:
null;EBGInfra.isDefined(c)&&EBGInfra.notNull(c)||!a.eventData.ebmovie||(c=0,"0"!=a.eventData.ebmovie&&(a=EBG.format("ebMovie{0}",a.eventData.ebmovie),b.assets&&b.assets[a]&&(c=b.assets[a].assetID),b.bestAsset&&b.bestAsset[a]&&(c=b.bestAsset[a].assetID)));return c},_updateTimerHandler:function(a){void("");try{var b=a.eventData.intName,c=a.eventData.timerValue;"ebintduration"==b&&(b=EBG.Interactions.SystemInts.INT_DURATION,c/=1E3);this._updateTimer(b,c)}catch(d){void("",
d)}EBG.log.endGroup()},_startTimer:function(a,b){void("");EBG.intMgr.startTimer(a,this._adConfig.uid,b);EBG.log.endGroup()},_stopTimer:function(a,b){void("");EBG.intMgr.stopTimer(a,this._adConfig.uid,b);EBG.log.endGroup()},_updateTimer:function(a,b){void("");EBG.intMgr.updateTimer(a,this._adConfig.uid,b);EBG.log.endGroup()},_notifiedInteractionHandler:function(a){void("");
try{a.eventData.intName=a.eventData.name,a.eventData.name==EBG.Interactions.SystemInts.PLAYER_PARAMS&&(a.eventData.value.env=EBG.adaptor.browser.getEnvironment()),EBG.intMgr.handleCounterInteraction(a.eventData.name,this._adConfig.uid,0,!1,a.eventData)}catch(b){void("")}EBG.log.endGroup()},_videoInitHandler:function(a){!this._videoInit&&this._dpm&&this._adConfig.dpUrlEvents&&(this._dpm.sendNow(this._adConfig.dpUrlEvents,{video:1}),this._videoInit=!0)},
_videoInteractionHandler:function(a){void("");var b=this,c=b._adConfig;try{var d=a.eventData,e=b._getAssetIdFromEvent(a),f=d.userInitiated?d.userInitiated:!1,g;d.intName==EBG.VideoInteraction.STARTED&&b.visibilityMgr&&b.visibilityMgr.calculateVisibilityPercentage()>=c.visibility.iabMinSurface&&(b._handleVideoVisibilityChangeSub=b._subscribeToAdEvent(EBG.Events.EventNames.VISIBILITY_CHECK,function(h){h.eventData.percentage<c.visibility.iabMinSurface&&(b._videoRemainedVisible=
!1,EBG.eventMgr.unsubscribeFromEvent(b._handleVideoVisibilityChangeSub))},EBG.Events.EventTiming.ONTIME),b._videoRemainedVisible=!0);EBGInfra.hasOwnValue(EBG.VideoQuartiles,d.intName,!0)&&b._videoRemainedVisible&&(g={value:1});d.intName==EBG.VideoInteraction.FULLPLAY&&b._handleVideoVisibilityChangeSub&&EBG.eventMgr.unsubscribeFromEvent(b._handleVideoVisibilityChangeSub);EBG.intMgr.handleVideoInteraction(d.intName,c.uid,e,f,g)}catch(h){void("")}EBG.log.endGroup()},
_videoFSOpenHandler:function(a){this.isInFullScreenMode=!0;a={eventData:{assetId:this._adConfig.FSMovie.assetID,userInitiated:!0,intName:"ebFSStart"}};this._videoInteractionHandler(a);a=new EBG.Events.Event(EBG.Events.EventNames.FULL_SCREEN_START);a.dispatcher=this;a.eventData="FullScreen";EBG.eventMgr.dispatchEvent(a)},_videoFSCloseHandler:function(){this.isInFullScreenMode=!1;var a={eventData:{assetId:this._adConfig.FSMovie.assetID,userInitiated:!0,intName:"ebFSEnd"}};a.eventData.assetId=this._adConfig.FSMovie.assetID;
this._videoInteractionHandler(a);a=new EBG.Events.Event(EBG.Events.EventNames.FULL_SCREEN_END);a.dispatcher=this;a.eventData="FullScreen";EBG.eventMgr.dispatchEvent(a)},_addSystemInteractions:function(){void("");var a=EBG.Interactions.SystemInts,b=EBG.Interactions.Categories.SYSTEM;EBG.callSuperFunction(EBG.Ads.RichAd,this,"_addSystemInteractions");try{this._addTimerInteraction(a.INT_DURATION,b),this._addTimerInteraction(a.AD_DURATION,b),this._addTimerInteraction(a.DWELL_TIME,
b),EBG.EnableVisibilityUtil&&EBG.EnableVisibilityUtil.addVisibilityInteractions.apply(this),(this._adConfig.playerParamsEnabled||this._adConfig.sendMetricsData)&&this._addCounterInteraction(a.PLAYER_PARAMS,b,!1,5,null,null,!0)}catch(c){void("")}EBG.log.endGroup()},_addCounterInteraction:function(a,b,c,d,e,f,g){void("");var h=EBG.isDefinedNotNull(f)?f:a;h=this._adConfig.interactions[h];var k=new EBG.Interactions.CounterInteractionData(a,
b,this._adConfig.uid);e&&(k.isPanel=!0);h?EBG.callSuperFunction(EBG.Ads.RichAd,this,"_addCounterInteraction",[a,b,c]):(k.initiationType=EBG.Interactions.InitiationTypes.AUTO,k.numLeftToReport=k.numToReport=d?d:k.numLeftToReport,k.reportImmediately=c?!0:!1,k.useInteractionsStrPipe=g?!0:!1,a=new EBG.Interactions.CounterInteraction(k),EBG.intMgr.addInteraction(a,f));EBG.log.endGroup()},_addTimerInteraction:function(a,b,c,d){a=new EBG.Interactions.TimerInteractionData(a,b,this._adConfig.uid);c&&(a.isPanel=
c,a.assetID=d||0);c=new EBG.Interactions.TimerInteraction(a);EBG.intMgr.addInteraction(c)},_addAggregateInteraction:function(a,b,c){a=new EBG.Interactions.AggregationInteractionData(a,b,this._adConfig.uid);c&&(a.isPanel=c);c=new EBG.Interactions.AggregateInteraction(a);EBG.intMgr.addInteraction(c)},_addVideoInteractions:function(){void("");var a=EBG.VideoInteraction,b=this._addVideoInteraction.bind(this);try{b(a.STARTED,void 0,void 0,this.videoReportImmediate),
b(a.PERCENT_25_PLAYED,void 0,void 0,this.videoReportImmediate),b(a.PERCENT_50_PLAYED,void 0,void 0,this.videoReportImmediate),b(a.PERCENT_75_PLAYED,void 0,void 0,this.videoReportImmediate),b(a.FULLPLAY,void 0,void 0,this.videoReportImmediate,this.sync),b(a.MUTE,!0),b(a.UNMUTE,!0),b(a.UNMUTED),b(a.PAUSE,!0),b(a.REPLAY,!0),b(a.SLIDER_DRAGGED,!0),b(a.FULLSCREEN_START,!0),b(a.FULLSCREEN_END,!0),b(a.FULLSCREEN_MUTE,!0),b(a.FULLSCREEN_PAUSE,!0),b(a.USER_INITIATED_VIDEO,!1,1),b(a.SKIP,!0)}catch(c){void("",
c)}EBG.log.endGroup()},_addVideoInteraction:function(a,b,c,d,e){void("");var f=EBG.Interactions;a=new f.CounterInteractionData(a,f.Categories.VIDEO,this._adConfig.uid);a.initiationType=b?f.InitiationTypes.USER:f.InitiationTypes.AUTO;c&&(a.numLeftToReport=c);a.reportImmediately=!!d;a.sync=!!e;b=new f.CounterInteraction(a);EBG.intMgr.addInteraction(b);EBG.log.endGroup()},_addCustomInteractions:function(){void("");try{var a=
this._adConfig.interactions,b;for(b in a)if(a.hasOwnProperty(b)){var c=EBG.intMgr.adsData[this._adConfig.uid];switch(a[b].type){case 0:c.Counter.hasOwnProperty(b)||b!==EBG.Interactions.SystemInts.CLICK&&b!==EBG.Interactions.SystemInts.DEFAULT_CLICK&&this._addCounterInteraction(b,EBG.Interactions.Categories.CUSTOM);break;case 1:c.Timer.hasOwnProperty(b)||this._addTimerInteraction(b,EBG.Interactions.Categories.CUSTOM)}}}catch(d){void("")}EBG.log.endGroup()},subscribeToStandardElementEvents:function(a){var b=
new EBG.Events.EventSubscription("mouseover",this._handleMouseEvent,this);b.isElementEvent=!0;b.elementId=a;EBG.eventMgr.subscribeToEvent(b);b=new EBG.Events.EventSubscription("mouseout",this._handleMouseEvent,this);b.isElementEvent=!0;b.elementId=a;EBG.eventMgr.subscribeToEvent(b)},_handleMouseEvent:function(a){void(""+a.type);var b=a.currentTarget?a.currentTarget:a.srcElement,c=a.relatedTarget?a.relatedTarget:null,d="",e=b.id,f=e.lastIndexOf("_")+1;var g=b.id.split("_");
var h=g.length;g=g[h-2]+"_"+g[h-1];g=EBGInfra.isDefined(g)?g:"";f&&(d=e.substring(f));e="mouseover"==a.type?new EBG.Events.Event(EBG.Events.EventNames.MOUSE_OVER):new EBG.Events.Event(EBG.Events.EventNames.MOUSE_OUT);"mouseout"==a.type&&EBGInfra.isDefined(EBG.ads[g])&&EBG.ads[g].isInFullScreenMode?void(""):(e.dispatcher={_adConfig:{rnd:d}},e.eventData={target:b,relatedTarget:c},EBG.eventMgr.dispatchEvent(e),
EBG.log.endGroup())},_verifyPlaceHolder:function(){EBG.callSuperFunction(EBG.Ads.RichAd,this,"_verifyPlaceHolder")||EBG.adaptor.addPlaceHolder({tagName:EBG.Adaptors.TagNames.DIV,attributes:{id:this._adConfig.placeHolderId,dir:"ltr"},children:null})},_changeBackgroundImage:function(){var a=this._adConfig;this._wallpaper=new EBG.Adaptors.Wallpaper;var b=new EBG.Adaptors.Wallpaper.BgData;b.imgSrc=EBG.combinePaths(a.resourcePath,a.bgImgSrc);b.tiling=a.bgRepeat;b.scrolling=a.bgIgnoreScrolling;b.positionX=
a.bgPosX;b.positionY=a.bgPosY;this._wallpaper.SetBackgroundImage(b)},_removeBackgroundImage:function(){this._wallpaper&&this._wallpaper.RemoveBackgroundImage()},_setStateInCreativeState:function(a){var b=this._adConfig;b.optOut?void(""):(a=EBG.format("{0}{1}/{2}/adServer.bs?cn=SetState&CampaignID={3}&StateValue={4}&ord={5}",EBG.protocol,b.bsPath,"BurstingPipe",b.campaignId,a.eventData.stateValue?a.eventData.stateValue:"",Math.random()),EBG.adaptor.reportToRemoteServer(a,
!0,!0))}};EBG.declareClass(EBG.Ads.RichAd,EBG.Ads.Ad);EBG.Ads.RichBannerHtml5=function(a){void("");void("");this._updateAdConfig(a);this._adConfig=a;this._handleAppearance();EBG.callSuperConstructor(EBG.Ads.RichBannerHtml5,this,[a]);EBG.log.endGroup()};EBG.Ads.RichBannerHtml5.requiresIframeBust=!1;
EBG.Ads.RichBannerHtml5.prototype={_isClickOccur:!1,_CCs:{},_banner:{divId:"",resId:"",width:0,height:0},_canShow:function(){var a=!1;this._adConfig.adHtmlPath?EBG.adaptor.browser.isIE()&&!this._adConfig.isPreview?(a=(this._adConfig.displayWin||EBG.adaptor.getDisplayWin()).document.documentMode,a=9==a&&this._adConfig.isSafeFrame?!1:8<a):a=!0:this._adConfig.imageOnly=!0;return a},_handleAppearance:function(){EBG.AdaptiveUtils&&this._adConfig.adaptiveAd&&(this._updatePlaceHolder(),this._adaptiveUtils=
new EBG.AdaptiveUtils(this._adConfig),this._adaptiveUtils.updateAdConfig(),this._adaptiveUtils.subscribeToEvents())},handleIOSAdaptiveResize:function(){this._bannerCC.handleIOSAdaptiveResize()},_updatePlaceHolder:function(){this._verifyPlaceHolder();var a=EBG.adaptor.getElementById(this._adConfig.placeHolderId),b=this._adConfig.width&&EBG.isNumber(this._adConfig.width)?this._adConfig.width+"px":"100%",c=this._adConfig.height&&EBG.isNumber(this._adConfig.height)?this._adConfig.height+"px":"100%";this.resizePlaceHolder=
!1;EBG.adaptor.setElemStyle(a,"width",b);EBG.adaptor.setElemStyle(a,"height",c)},_updateAdConfig:function(a){this._updateSVJSON(a)},_updateSVJSON:function(a){var b=EBG.isGlobalDef("ebAdXmlPath")?ebAdXmlPath:"";b&&a.svJSON&&(a.svPreview=b);a.sv3CatalogMap&&a.massVersioning&&a.massVersioning.adVersions&&""!=a.massVersioning.adVersions&&(versions=0<a.massVersioning.massVersionFolderDivider?EBG.Ads.Ad.Fn.fixMVPathString(a.massVersioning.adVersions,a.massVersioning.massVersionFolderDivider):a.massVersioning.adVersions,
a.versions=versions);a.massVersioning&&a.massVersioning.versionFullPath&&(a.versions=a.massVersioning.adVersionsObject,b=EBG.isGlobalDef("ebAdJson")?ebAdJson:null)&&(a.versionPreviewJson=b)},_subscribeToEvents:function(){EBG.callSuperFunction(EBG.Ads.RichBannerHtml5,this,"_subscribeToEvents");this._subscribeToAdEvent(EBG.EBMessage.CLICKTHROUGH,this._updateAssetsWithClick);this._subscribeToAdEvent(EBG.EBMessage.SWIPE,function(){EBG.intMgr.handleCounterInteraction(EBG.Interactions.SystemInts.SWIPE,
this._adConfig.uid)});this._subscribeToAdEvent(EBG.EBMessage.DISPOSE,function(){var a=new EBG.Events.Event(EBG.Events.EventNames.PAGE_UNLOAD);EBG.eventMgr.dispatchEvent(a)});this._shouldWaitForTriggerAdStart()&&this._subscribeToAdEvent(EBG.EBMessage.TRIGGER_AD_START,this._triggerAdStart)},_updateAssetsWithClick:function(a){this._isClickOccur=!0;clickedProductId=a&&a.eventData&&a.eventData.isProductClick&&a.eventData.clickedVersion?a.eventData.clickedVersion:null;a={clickOccur:!0,clickedProductId:clickedProductId};
for(var b in this._CCs)this._CCs.hasOwnProperty(b)&&this._CCs[b].updateClick(a)},_writeCreativeElements:function(){void("");var a=EBG.adaptor.generateElementId("BannerDiv",this._adConfig.uid),b={tagName:EBG.Adaptors.TagNames.DIV,attributes:{id:a,dir:"ltr",style:{}},children:this._bannerCC.buildCreativeContainerJson()};"undefined"!=typeof this._adConfig.display&&(b.attributes.style.display=this._adConfig.display);var c=b.children[0]?b.children[0].attributes.id:
this._bannerCC.iframeId;this._adConfig.forceClickthrough&&b.children.unshift(this.buildClickDivJson());var d=new EBG.Events.Event(EBG.Events.EventNames.ADD_CREATIVES);d.dispatcher=this;d.eventData={tagsObj:b,assetId:c,isPanel:!1,creativeType:EBG.Events.EventNames.ADD_HTML5_MAIN_CREATIVE};d.timing=EBG.Events.EventTiming.BEFORE;EBG.eventMgr.dispatchEvent(d)||(EBG.adaptor.addInlineDOM(b,this._adConfig.placeHolderId),this.bannerDivId=a,this._banner.divId=a,this._banner.width=this._adConfig.width,this._banner.height=
this._adConfig.height,void(""),d.timing=EBG.Events.EventTiming.ONTIME,EBG.eventMgr.dispatchEvent(d),this.subscribeToStandardElementEvents(a),d.timing=EBG.Events.EventTiming.AFTER,EBG.eventMgr.dispatchEvent(d),EBG.log.endGroup())},_addCreatives:function(){void("");this._loadBanner();EBG.log.endGroup()},_loadBanner:function(){this._bannerCC=new EBG.IFrameCC(this._adConfig,{clickOccur:this._isClickOccur});this._bannerCC.iframeId=
EBG.adaptor.generateElementId("BannerIFrame",this._adConfig.uid);this._CCs[this._bannerCC.iframeId]=this._bannerCC;this._bannerCC.setAssetCreativeParams();this._writeCreativeElements()},_addSystemInteractions:function(){void("");EBG.callSuperFunction(EBG.Ads.RichBannerHtml5,this,"_addSystemInteractions");if(EBG.adaptor.browser.isMobile())try{var a=new EBG.Interactions.CounterInteractionData(EBG.Interactions.SystemInts.SWIPE,EBG.Interactions.Categories.SYSTEM,
this._adConfig.uid);a.initiationType=EBG.Interactions.InitiationTypes.USER;var b=new EBG.Interactions.CounterInteraction(a);EBG.intMgr.addInteraction(b,EBG.Interactions.SystemInts.SWIPE)}catch(c){void("")}EBG.log.endGroup()},_getBannerLocation:function(){if(this._bannerCC&&this._bannerCC.iframeId)var a=EBG.adaptor.getPositioningById(this._bannerCC.iframeId,!0,this._adConfig.actualServingMode);else if(this._preloadImgResId)a=EBG.adaptor.getPositioningById(this._preloadImgResId);
else if(this._showOnlyDefaultImg&&this._defaultImgResId)a=EBG.adaptor.getPositioningById(this._defaultImgResId);else return null;return EBG.callSuperFunction(EBG.Ads.RichBannerHtml5,this,"_getBannerLocation",[a])},_getAdCodeBase:function(){return EBG.callSuperFunction(EBG.Ads.RichBannerHtml5,this,"_getAdCodeBase",[2])},_switchAssetsAfterThrottle:function(){},_shouldCheckIfFlashBlocked:function(){return!1},buildClickDivJson:function(){var a=EBG.format("ClickDiv_{0}",this._adConfig.uid);a={tagName:EBG.Adaptors.TagNames.DIV,
attributes:{id:a,name:a,style:{width:EBG.px(this._adConfig.width),height:EBG.px(this._adConfig.height),position:"absolute",top:"auto",left:"auto",cursor:"pointer"},onclick:EBG.format('EBG.ads["'+this._adConfig.uid+'"].onImageClick("{0}", {1})',this._adConfig.uid,!1)}};EBG.adaptor.browser.isIE()&&(a.attributes.style.background="url(about:blank)");a.attributes.style.display="inline-block";return a}};EBG.declareClass(EBG.Ads.RichBannerHtml5,EBG.Ads.RichAd);EBG.declareNamespace("CreativeContainer");
EBG.CreativeContainer=function(a){void("");void("");this._adConfig=a;EBG.log.endGroup()};EBG.declareClass(EBG.CreativeContainer,null);EBG.declareNamespace("IFrameCC");
EBG.IFrameCC=function(a,b){void("");void("");EBG.callSuperConstructor(EBG.IFrameCC,this,[a]);this._isClickOccur=b.clickOccur;this._isDocLoaded=this._isEBInitialized=!1;this.iframeId=this._iframe=null;this._isReqInitReceived=!1;this._assetCreativeParams=null;this._subscribeToEvents();this.pm=EBG.pm;this.useFriendlyIframe=this._adConfig.isSafeFrame||this._adConfig.isSkype;this._registerToEvents();this._listenToMessages();this._videoAssetsActive=[];
EBG.log.endGroup()};
EBG.IFrameCC.prototype={_isContentLoading:!1,_videoAssetsActive:null,isAssetFullyLoaded:function(){return this._isEBInitialized&&this._isDocLoaded},_subscribeToEvents:function(){if(!EBG.adaptor.isReady()){var a=new EBG.Events.EventSubscription(EBG.EBMessage.ADAPTOR_READY,this._checkSendInit,this);a.timing=EBG.Events.EventTiming.ONTIME;EBG.eventMgr.subscribeToEvent(a)}a=new EBG.Events.EventSubscription(EBG.Events.EventNames.MESSAGE_CREATIVE,function(b){!b.eventData.msgType||!b.eventData.msgData||b.eventData.assetId&&
this.iframeId!=b.eventData.assetId||this._sendMessage(b.eventData.msgType,b.eventData.msgData)},this);a.timing=EBG.Events.EventTiming.ONTIME;EBG.eventMgr.subscribeToEvent(a)},isEBInitialized:function(){return this._isEBInitialized},isDocLoaded:function(){return this._isDocLoaded},updateClick:function(a){this._isClickOccur=a.clickOccur;this._sendMessage(EBG.EBMessage.UPDATE_CLICK,a)},setAssetCreativeParams:function(){this._adConfig.AdCreativeParams&&(this._assetCreativeParams=this._adConfig.AdCreativeParams)},
_handleMessage:function(a,b){void("");if(!this._iframe)this._getIframeElement(),EBG.runTimed(this,this._handleMessage,[a,b],20);else if(!this._iframe.contentWindow)EBG.runTimed(this,this._handleMessage,[a,b],20);else if(b.source===this._iframe.contentWindow&&(a=JSON.parse(b.data),void(""),a))switch(a.type){case EBG.EBMessage.REQ_INIT:this._isReqInitReceived=!0;!EBG.adaptor.isReady()&&EBG.adaptor.isSDKDefined()||this._sendInitToCreative();
break;case EBG.EBMessage.INITDONE:this._handleInitDone();break;case EBG.EBMessage.GET_ENVIROMENT:this._sendAdKitData(a.type);break;case EBG.EBMessage.CLOSE_AD:this._dispatchCloseAdEvent();break;case EBG.EBMessage.HEAVY_AD_INTERVENTION:this._handleHeavyAdIntervention(a.data.body.message);break;default:this._handleGeneralMessage(a)}EBG.log.endGroup()},_handleGeneralMessage:function(a){var b=new EBG.Events.Event(a.type);b.dispatcher=this;if(a.data&&(b.eventData=a.data,b.eventData&&b.eventData.command))this[b.eventData.command](b.eventData);
EBG.eventMgr.dispatchEvent(b);this.handleIntMonitor(a)},handleIntMonitor:function(a){if(EBG.adaptor.intMonitorExist()){var b=new EBG.Events.Event(EBG.EBMessage.NOTIFY_INTERACTION_MONITOR);b.eventData=this._createIntMonitorObj(a);EBG.eventMgr.dispatchEvent(b)}},_handleInitDone:function(){this._isContentLoading=!1;this._isEBInitialized=!0;var a=new EBG.Events.Event(EBG.Events.EventNames.CREATIVE_CONTAINER_READY);a.dispatcher=this;a.eventData=this.iframeId;EBG.eventMgr.dispatchEvent(a);EBG.adaptor.isPageLoaded()&&
(a=new EBG.Events.Event(EBG.Events.EbEventNames.PAGE_LOAD),a.dispatcher=this,this._handleEvents(a))},_handleHeavyAdIntervention:function(a){haiValue=-1!=a.toUpperCase().indexOf("CPU")?0:-1!=a.toUpperCase().indexOf("NETWORK")?1:2;EBG.intMgr.handleCounterInteraction(EBG.Interactions.SystemInts.HEAVY_AD_INTERVENTION,this._adConfig.uid,0,!1,{value:haiValue});this._dpm=EBG.dataPipeMgr.getPipe(this._adConfig.sID);this._dpm.sendNow(this._adConfig.dpUrlEvents,{haimsg:a})},_saveAssetSrc:function(a){a.src=
this.iframeId},_registerVideo:function(a){-1==EBGInfra.indexOfArray(this._videoAssetsActive,a.assetId)&&this._videoAssetsActive.push(a.assetId)},_unregisterVideo:function(a){if(0<this._videoAssetsActive.length)var b=EBGInfra.indexOfArray(this._videoAssetsActive,a.assetId);this._videoAssetsActive.splice(b,1)},notifyDocLoaded:function(a){this._isDocLoaded=!0;this._saveAssetSrc(a)},getWidth:function(){return this._adConfig.width?this._adConfig.width:this.getActualSize().width},getHeight:function(){return this._adConfig.height?
this._adConfig.height:this.getActualSize().height},getActualSize:function(){var a=EBG.adaptor.getElementById(this.iframeId);return a?EBG.adaptor.getBoundingClientRect(a):{width:0,height:0}},getAdPartsData:function(){var a={type:EBG.adParts.BANNER,adkitConfigUrl:this._adConfig.assets["config.js"]?this._adConfig.resourcePath+this._adConfig.assets["config.js"].dsPath:""};a.width=a.containerWidth=this.getWidth();a.height=a.containerHeight=this.getHeight();return a},_sendAdKitData:function(a){this._dpm=
EBG.dataPipeMgr.getPipe(this._adConfig.sID);this._dpm.send(EBG.DataProfile.SERVING,{adkit:1});var b=EBG.cloneObj(this._adConfig.adKitData),c=EBG.ads&&this._adConfig&&this._adConfig.uid&&EBG.ads[this._adConfig.uid]?EBG.ads[this._adConfig.uid]._adaptiveUtils:null;if(c){b.adParts=b.adParts||{};b.adParts.type=EBG.adParts.BANNER;b.adParts.adkitConfigUrl=this._adConfig.assets["config.js"]?this._adConfig.resourcePath+this._adConfig.assets["config.js"].dsPath:"";c=c.getAsset();var d=this.getActualSize();
c&&(b.adParts.name=c.name,b.adParts.width=c.width,b.adParts.height=c.height);d&&(b.adParts.containerWidth=d.width,b.adParts.containerHeight=d.height,b.actualWidth=d.width,b.actualHeight=d.height)}else b.adParts=this.getAdPartsData(),b.adParts.width=this._adConfig.originalWidth||b.adParts.width,b.adParts.height=this._adConfig.originalHeight||b.adParts.height;this._adConfig.expansionParams&&(b.adParts.expansionParams=this._adConfig.expansionParams);this._sendMessage(a,b)},handleIOSAdaptiveResize:function(){var a=
this._iframe.getBoundingClientRect(),b=this._iframe.offsetParent.getBoundingClientRect(),c=this._iframe.style,d=!1;a.height!=b.height&&(c.height=EBG.px(b.height),d=!0);a.width!=b.width&&(c.width=EBG.px(b.width),d=!0);d?EBG.runTimed(this,this.handleIOSAdaptiveResize,[],100):(c.height="",c.width="")},_createIntMonitorObj:function(a){var b="";if(a)switch(a.type){case EBG.EBMessage.VIDEO_INTERACTION:a.data&&(b=EBG.format("'{0}',{1}",a.data.intName,a.data.ordinalNum));break;case EBG.EBMessage.EXPAND:case EBG.EBMessage.COLLAPSE:b=
this._handleSpecialInt(a);break;default:b=a.data.intName}return{command:a.type,args:b,objName:this.iframeId,adId:this._adConfig.adId}},_handleSpecialInt:function(a){var b="";switch(a.type){case EBG.EBMessage.EXPAND:b=a.data&&EBGInfra.isDefinedNotNull(a.data.panelName)?a.data.panelName:"";b+=a.data&&EBGInfra.isDefinedNotNull(a.data.actionType)&&""!=a.data.actionType?","+a.data.actionType:",User";break;case EBG.EBMessage.COLLAPSE:b=a.data&&EBGInfra.isDefinedNotNull(a.data.panelName)?a.data.panelName:
""}return b},_listenToMessages:function(){void("");for(var a in EBG.EBMessage)EBG.EBMessage.hasOwnProperty(a)&&(a=EBG.EBMessage[a],void(""),EBG.pm.bind(a,this._handleMessage,this,this._adConfig.displayWin||EBG.adaptor.getDisplayWin()))},_UnbindMessages:function(){void("");for(var a in EBG.EBMessage)EBG.EBMessage.hasOwnProperty(a)&&(a=EBG.EBMessage[a],void("",
a),EBG.pm.unbind(a,this._handleMessage))},_sendMessage:function(a,b){this._iframe&&(this.useFriendlyIframe?EBG.runTimed(this,function(){this._iframe&&this._iframe.contentWindow&&this._iframe.contentWindow.EBG&&this._iframe.contentWindow.EBG.pm&&this._iframe.contentWindow.EBG.pm.dispatch(a,b,window,this._iframe.contentWindow)},[],1):EBG.pm({target:this._iframe.contentWindow,type:a,data:b}))},_handleEvents:function(a){void("");void("");this._isEBInitialized&&
this._sendMessage(a.name,a.eventData);EBG.log.endGroup()},_registerToEvents:function(){for(var a in EBG.Events.EbEventNames)EBG.Events.EbEventNames.hasOwnProperty(a)&&EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EbEventNames[a],this._handleEvents,this))},_unregisterToEvents:function(){for(var a in EBG.Events.EbEventNames)EBG.Events.EbEventNames.hasOwnProperty(a)&&EBG.eventMgr.unsubscribeFromEvent(new EBG.Events.EventSubscription(EBG.Events.EbEventNames[a],this._handleEvents,
this))},_dispatchCloseAdEvent:function(){var a=new EBG.Events.Event(EBG.Events.EventNames.CLOSE_AD);a.dispatcher=this;a.timing=EBG.Events.EventTiming.ONTIME;EBG.eventMgr.dispatchEvent(a)},_checkSendInit:function(){this._isReqInitReceived&&this._sendInitToCreative()},_sendInitToCreative:function(){void("");if(this._adConfig){var a={assetCreativeParams:this._assetCreativeParams,clickOccur:this._isClickOccur,clickedProductIds:this._getClickedProductIDs(),adConfig:this._adConfig,
ffs:EBG.serverResponses[this._adConfig.uid].ffs,dsBasePath:this._adConfig.resourcePath,events:EBG.Events.EbEventNames,assetId:this.iframeId,visibilityAssetId:this.iframeId,browserData:{browserTypes:EBG.adaptor.browser._browserTypes,browserType:EBG.adaptor.browser._browserType,browserVer:EBG.adaptor.browser.getVersion(),isMobile:EBG.adaptor.browser.isMobile(),isIOS:EBG.adaptor.browser.isiOS(),isAndroid:EBG.adaptor.browser.isAndroid(),isAndroidNative:EBG.adaptor.browser.isAndroidNative()}};this._sendMessage(EBG.EBMessage.INIT,
a)}else void("")},_getIframeElement:function(){void("");var a=EBG.adaptor.getElementById(this.iframeId);a?(this._iframe=a,void(""),EBG.log.endGroup(),this.useFriendlyIframe&&!this._isContentLoading&&this._loadContentToIframe(this.getIframePath())):(EBG.runTimed(this,this._getIframeElement,[],20),void(""),EBG.log.endGroup())},
_loadContentToIframe:function(a){this._isContentLoading=!0;var b=a.split("/");b.pop();b=b.join("/")+"/";var c=a.match(/\?.*$/)[0],d=this._adConfig.adKitData;d.adParts=this.getAdPartsData();var e=this;this._getAssetHtmlContent(a,function(f){f?(f='<base href="'+b+'"/>'+f,e._iframe.contentWindow.document.open("text/html","replace"),e._iframe.contentWindow.ebSafeFrame={pm:function(g){g&&EBG.runTimed(e,function(){e.pm.dispatch(g.type,g.data,e._iframe.contentWindow,g.target)},[],1)},sendMessage:function(g){this.pm(g)},
getClickTagUrl:function(){return EBG.intMgr.getClickTag(e._adConfig.uid)},getAdKitData:function(){return{data:JSON.stringify({data:d,type:EBG.EBMessage.GET_ENVIROMENT}),source:window}}},e._iframe.contentWindow.ebQueryString=c,e._iframe.contentWindow.document.write(f),setTimeout(function(){e._iframe.contentWindow.document.close()},200)):e._isContentLoading=!1})},_getAssetHtmlContent:function(a,b){EBG.adaptor.getDataFromRemoteServer(a,function(c){b(c)},this,!0,!1)},_buildIfrmSrc:function(a){a=EBG.format("{0}{1}v={2}",
EBG.combinePaths(this._adConfig.resourcePath,a),-1<a.indexOf("?")?"&":"?",EBG.html5Ver);if(this._adConfig.useAsyncEBLoader||this._adConfig.isAsync)a+="&n=1";this._adConfig.isInstream&&this._adConfig.ffs.CFF_EBVpaidVersion&&this._adConfig.moduleInfo&&this._adConfig.moduleInfo.vpaidVersionHtml5&&(a+="&vpaidV="+this._adConfig.moduleInfo.vpaidVersionHtml5);this._adConfig.pluId&&(a+="&plu="+this._adConfig.pluId,this._adConfig.bigScriptPrefix&&(a+="&prefix="+this._adConfig.bigScriptPrefix));this._adConfig.sHost?
a+="&sHost="+this._adConfig.sHost:this._adConfig.bigScriptDomain&&(a+="&sHost="+this._adConfig.bigScriptDomain);this._adConfig.isInstream&&(a+="&nonCached="+EBG.protocol+this._adConfig.sms);this._adConfig.isClickTag&&(a=EBG.format("{0}&clickTag={1}",a,escape(EBG.intMgr.getClickTag(this._adConfig.uid))));EBG.isPreview&&(a=EBG.format("{0}&isPreview={1}",a,"1"));return a},buildCreativeContainerJson:function(){var a=this.useFriendlyIframe?this.getFriendlyIframePath():this.getIframePath();a={tagName:EBG.Adaptors.TagNames.IFRAME,
attributes:{id:this.iframeId,name:this.iframeId,src:a,onload:EBG.format('(function(e) { var event = new EBG.Events.Event(EBG.Events.EventNames.ELEMENT_LOADED);event.dispatcher = this;event.eventData = { DOMEvent: e, elementId: "{0}", adUId:"{1}" };event.timing = EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(event);} )(typeof arguments != "undefined" ? arguments[0] : null);',this.iframeId,this._adConfig.uid),width:this._adConfig.width?this._adConfig.width:"100%",height:this._adConfig.height?
this._adConfig.height:"100%",allowfullscreen:!0}};a.attributes.style={width:this._adConfig.width?EBG.px(this._adConfig.width):"100%",height:this._adConfig.height?EBG.px(this._adConfig.height):"100%"};this._getIframeElement();return[a]},getIframePath:function(){return this._buildIfrmSrc(this._adConfig.adHtmlPath)},getFriendlyIframePath:function(){var a,b="";if(EBG.adaptor.browser.isIE()&&11>EBG.adaptor.browser.getVersion()){try{(a=EBG.adaptor.inject({tagName:EBG.Adaptors.TagNames.IFRAME,attributes:{id:"ebSampleIFrame"+
this._adConfig.rnd,src:"",width:1,height:1,allowfullscreen:!0,visibility:"hidden",display:"none"}},EBG.Adaptors.InjectionMethod.APPEND,EBG.adaptor.getElementById(this._adConfig.placeHolderId)))&&a.contentWindow&&(a.contentWindow.document.open("text/html","replace"),a.contentWindow.document.stam={})}catch(c){b="javascript:'<script>window.onload=function(){document.write(\\'<script>document.domain=\\\""+document.domain+"\\\";<\\\\/script>\\');document.close();};\x3c/script>'"}a&&a.parentElement&&a.parentElement.removeChild(a)}return b},
_getClickedProductIDs:function(){return this._adConfig.uid&&EBG.intMgr.adsData[this._adConfig.uid]&&EBG.intMgr.adsData[this._adConfig.uid].isProductClicked?EBG.intMgr.adsData[this._adConfig.uid].isProductClicked:{}},sendPanelFrequencyInfo:function(a){this._sendMessage(EBG.EBMessage.PANEL_FREQUENCY,{disableCreativeExpand:!a})}};EBG.declareClass(EBG.IFrameCC,EBG.CreativeContainer);EBG.declareNamespace("BWDetection");
EBG.BWDetection={checked:!1,checking:!1,speed:0,_adjustment:.75,_images:[{path:EBG.format("{0}{1}micro.gif",ebPtcl,ebO.sms),bytes:51,start:null,end:null},{path:EBG.format("{0}{1}micro.gif",ebPtcl,ebO.sms),bytes:51,start:null,end:null},{path:EBG.format("{0}{1}bw_image.png",ebPtcl,ebO.sms),bytes:43677,start:null,end:null}],_loaded:0,_loadImage:function(a){this._images[a].start=(new Date).getTime();var b=new Image,c=Math.random();b.onload=function(){EBG.BWDetection._imageLoaded(a)};b.src=this._images[a].path+
"?rnd="+c},_imageLoaded:function(a){this._images[a].end=(new Date).getTime();this._loaded++;this._loaded==this._images.length&&this._calculateSpeed()},_dispatchEvent:function(){var a=new EBG.Events.Event(EBG.Events.EventNames.BANDWITH_DETECTED);a.dispatcher=this;a.eventData=this.speed;EBG.eventMgr.dispatchEvent(a)},_calculateSpeed:function(){var a=Math.min(this._images[0].end-this._images[0].start,this._images[1].end-this._images[1].start),b=this._images[2].end-this._images[2].start,c=b,d=this._images[2].bytes;
b>a&&(c=b-a,d-=this._images[0].bytes);this.speed=Math.round(d/(c/1E3)/1024*8)*this._adjustment;Infinity==this.speed&&(this.speed=25E3);void(""+this.speed);this.checked=!0;this.checking=!1;this._dispatchEvent()},init:function(){this.checking=!0;this._loadImage(0);this._loadImage(1);this._loadImage(2);var a=this;setTimeout(function(){a.checked||(a.speed=56,a.checked=!0,a.checking=!1,a._dispatchEvent())},5E3)}};
try{ebO.extensionHooks.splice(0,0,function(a,b){function c(){var d=new EBG.Events.EventSubscription(EBG.Events.EventNames.CREATE_ADAPTOR,function(e){e.eventData.currentClass.prototype.getRequestMethod=function(f){if(EBG.adaptor.browser.isMobile()&&b.ffs.CFF_ForceGET)return"GET";var g=EBG.adaptor.browser.isMobile()&&b.ffs.CFF_URLThreshold?4E3:2E3;return this.browser.isIE()&&6==this.browser.getVersion()||this.isInApp()?"GET":f.length>g?"POST":"GET"}});d.timing=EBG.Events.EventTiming.BEFORE;EBG.eventMgr.subscribeToEvent(d)}
(b.ffs.CFF_ForceGET||b.ffs.CFF_URLThreshold||81==b.pluId)&&c()})}catch(a){void(""+a.description),ebO.extensionHooks=tempExtensionHook}EBG.declareNamespace("InAppImpressionManager");EBG.InAppImpressionManager=function(a){this.adConfig=a.adConfig;this._dpm=EBG.dataPipeMgr.getPipe(a.sid)};
EBG.InAppImpressionManager.prototype={init:function(){var a=new EBG.Events.EventSubscription(EBG.EBMessage.SDK_BRIDGE_LOADED,this._loadEventCallBack,this);a.timing=EBG.Events.EventTiming.AFTER;EBG.eventMgr.subscribeToEvent(a);a=new EBG.Events.EventSubscription(EBG.EBMessage.MRAID_LOADED,this._loadEventCallBack,this);a.timing=EBG.Events.EventTiming.AFTER;EBG.eventMgr.subscribeToEvent(a)},_loadEventCallBack:function(a){a.name===EBG.EBMessage.SDK_BRIDGE_LOADED&&(this.sdkState=a.eventData.loaded);a.name===
EBG.EBMessage.MRAID_LOADED&&(this.mraidState=a.eventData.loaded);"undefined"!==typeof this.sdkState&&"undefined"!==typeof this.mraidState&&(this.sdkState?this.startSession():this._handleDispatchEvent({supportsSDK:!1}))},startSession:function(){if(!this.sessionStarted){var a=window.ebSDKBridge;this.key=this.adConfig.rnd;if(a){var b=this._handleSDKMessage.bind(this),c={sessionKey:this.key,mraidStatus:this.mraidState?"supported":"unsupported"};a.addEventListener(EBG.SDK_BRIDGE_EVENTS.SESSION_START,b);
a.addEventListener(EBG.SDK_BRIDGE_EVENTS.GEOMETRY_CHANGE,b);a.startSession(c);this.sessionStarted=!0}else this._handleDispatchEvent({supportsSDK:!1})}},_handleSDKMessage:function(a){if(a.sessionKey===this.key){var b=a.data;this.supportsSDK=this.supportsSDK||b.supportsSDK;"sessionStart"===a.type&&(this.adConfig.inAppSettings.sdkSupport=b.supportsSDK?1:0,this.adConfig.inAppSettings.mraidSupport=b.mraidSupport?1:0,this.adConfig.inAppSettings.omidSupport=b.omidSupport?1:0);if("undefined"!==typeof this.supportsSDK){var c=
{supportsSDK:this.supportsSDK};b.trigger&&(c.sdkTrigger=b.trigger);b.isViewable&&(c.isViewable=b.isViewable);b.width&&(c.width=b.width);b.height&&(c.height=b.height);b.percentageInView&&(c.percentageInView=b.percentageInView);this._handleDispatchEvent(c);this._handleDebugData(a)}}},_handleDispatchEvent:function(a){var b=new EBG.Events.Event(EBG.Events.EventNames.INAPP_IMPRESSION);b.dispatcherFilters={ebRand:this.adConfig.rnd};b.timing=EBG.Events.EventTiming.ONTIME;b.eventData=a||{};EBG.eventMgr.dispatchEvent(b)},
_handleDebugData:function(a){a.type==EBG.SDK_BRIDGE_EVENTS.SESSION_START&&this._dpm.send(EBG.DataProfile.DEBUG,{sdk_mraidSupport:~~a.data.mraidSupport,sdk_omidSupport:~~a.data.omidSupport,sdk_purpose:this.adConfig.inAppSettings&&this.adConfig.inAppSettings.sdkPurpose})}};EBG.declareClass(EBG.InAppImpressionManager,null);EBG.declareNamespace("Initializer");
EBG.Initializer={initialize:function(){var a=null;try{if(void 0===c||!c){var b=EBG.Initializer;a=b._getCurrentServerResponse(a);a.ffs.CFF_DecodeConfig&&b._decodeConfiguration(a);b._initGlobals(a);b._callExtensionHooks(a);b._initAdaptor(a);b._initManagers(a);b._initDisplayAd(a);EBG.adaptor?EBG.adaptor.headlessTests(a.sid,a.adConfig.actualServingMode):this._dpm&&this._dpm.sendNow(EBG.DataProfile.DEBUG,{invalid_headlessTests:"1"})}}catch(g){void("");var c="initialize";
b="none";if(g.stack){var d=g.stack.match(/((.*)@|at (.*) ).*:(\d+:\d+)/);5==d.length?(c=d[2]||d[3],b=d[4]):c=g.stack.replace(/\n/," ").substr(0,100)}d=a.adConfig;d.startTimeP=d.startTimeP||EBG.now();if(EBG.DataPipeManager){var e=(new EBG.DataPipeManager(d.startTimeD,d.startTimeP)).getPipe(a.sid),f=EBG.protocol+a.lmu+"/lm/evt";f&&!e.isBucketExists("evt")&&e.createBucket("evt",["general","platform","serving","error"],f);e.sendNow(f,{srcv:a.scv,formatid:""+d.formatId,templatename:d.templateName,dtime:""+
(new Date).getTime(),siteid:""+d.siteId,cid:""+d.campaignId,pid:""+d.placementId,adid:""+d.adId,errmsg:g.message,errfunc:c,errpos:b,errstack:g.stack.replace(/\(.*\/|(ccfix)/g,"(").replace(/\n(\s)*/g," || ").substr(0,1E3)})}}return a},_initManagers:function(a){var b=EBG.Events,c=new b.Event(b.EventNames.INIT_MANAGERS);c.eventData={"_adConfig.rnd":a.rnd};c.timing=b.EventTiming.BEFORE;EBG.eventMgr.dispatchEvent(c);var d=EBG.Initializer;d._initInteractionManager(a);d._initAnimationManager(a);d._initPositioningHelper();
d._initGeometryHelper();d._initElementWatcher();c.timing=b.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(c)},_initDisplayAd:function(a){EBG.Initializer._updateAdConfig(a);if(EBG.Initializer._shouldInitAd(a)){this._initDataPipeManager(a);this._sendInitialDataPipeData(a);var b=EBG.adaptor,c=window;try{if(c=b.getDisplayWin(),EBG.isDefined(c.EBG))try{EBGInfra.mergeObj(EBG,c.EBG,!1)}catch(d){c.EBG=EBG}else c.EBG=EBG}catch(d){if(c=window,EBG.isDefined(c.EBG))try{EBGInfra.mergeObj(EBG,c.EBG,!1)}catch(e){c.EBG=
EBG}else c.EBG=EBG}a.adConfig.customJSVars&&a.adConfig.customJSVars.mdProgFormatID&&a.adConfig.customJSVars.mdProgEnable||a.adConfig.singleTagProgrammatic?b.loadModule("ProgrammaticSettingsMgr",a.adConfig,function(d){(new (d||window).EBG.Modules.ProgrammaticSettingsMgr(a.adConfig)).getSettings(function(){EBG.Initializer._initAd(a)},this)},this):EBG.Initializer._initAd(a)}},_shouldInitAd:function(a){var b=EBG.adaptor;return a.innerIframe||0==a.ifrm||-1==a.ifrm&&b.serving&&b.serving.servingMode!=EBG.Adaptors.ServingMode.IFRAME},
_getCurrentServerResponse:function(){var a=0,b=EBG.getBigScript();b=b&&b.getAttribute("c");if(b&&window.szmk)var c=window.szmk["c"+b];else for(;a<ebOArr.length;){if((c=ebOArr[a])&&!c.csc&&this._getAdClass(c)){ebOArr.splice(a,1);break}a++}return c},_initGlobals:function(a){var b=a.adConfig;b.exscope="bs";var c=EBG.getTimes();b.startTimeP=c.pnow;b.startTimeD=b.handleStartTime=c.dtime;var d=navigator.userAgent.toLowerCase();c=a.bigs||ebBigS;EBG.isOfflineDemo=!!window.gEbfOfflineDemo;"/"==a.resPath.charAt(a.resPath.length-
1)&&"/"==a.resPath.charAt(a.resPath.length-2)&&(a.resPath=a.resPath.substring(0,a.resPath.length-1));EBG.resourcePath=a.resPath;b.lmu=a.lmu;b.rnd=a.rnd;b.uid=EBG.format("{0}_{1}",b.adId,b.rnd);b.ffs=a.ffs;b.resourcePath=a.resPath;b.modulesDir=unescape(c)+"Modules"+a.modv+"/";b.bigScriptDomain=/\/\/./.test(c)?c.split("/")[2]:c.split("/")[0];b.ffs.CFF_EBPrefix&&(b.bigScriptPrefix=c.substring(c.indexOf(b.bigScriptDomain)+b.bigScriptDomain.length+1,c.indexOf("BurstingCachedScripts")));EBG.isNumber(a.gdpr)&&
(b.gdpr=a.gdpr);/^(\{|\${).*/g.test(a.gdprconsent)||(b.gdprconsent=a.gdprconsent);EBG.sms=b.sms=a.sms||"";EBG.fcsVirtualPath=a.fvp||"";EBG.pluId=a.pi;EBG.dataCapture=EBG.bs=a.bs;EBG.protocol=ebPtcl;EBG.reportPageVer=a.rpv;EBG.html5Ver=a.html5v;EBG.flashPixelVer=a.vfp;EBG.isMSNMessenger=(-1<d.indexOf("msn messenger")||-1<d.indexOf("windows live messenger"))&&window==parent;EBG.isIMBanner=window.gfEbExpBanerIM||window.gfEbExpBannerIM;EBG.isTestMode=a.tm;EBG.isPreview=a.pr;EBG.isInWorkshop=window.gEbFlyLocal;
"undefined"!=typeof a.d&&EBG.log.setLevel(a.d);EBG.iframeLocation=a.ifl||window.gstrEbIframeLocation;EBG.minZIndex=a.z||window.gnEbMinZIndex||1E4;EBG.eyeDivRefElement=window.gEbEyeDivRefElement;if(b&&b.isInstream||a.ffs&&a.ffs.CFF_DisableUiVz)b.UiVz=!1;EBG.eventMgr=EBG.eventMgr||new EBG.Events.EventManager;EBG.ads={};try{var e=EBG.Adaptors.StdWebAdaptor._getTopAccessibleWindow(!1)||window;e.ebAds=e.ebAds||{};EBG.ads=e.ebAds}catch(f){}EBG.serverResponses=EBG.serverResponses||{};(e=b.adHtmlPath)&&a.h5mi&&
(b.adKitData={paths:{cachedScript:c,nonCachedScript:ebPtcl+a.sms,folderRoot:a.resPath+e.substring(0,e.lastIndexOf("/")+1)},version:a.h5mi.adkitversion})},_initServingMode:function(a){var b=this._getAdClass(a),c=a.adConfig;a.requiresIframeBust=b.requiresIframeBust;var d=EBG.adaptor,e=d.serving?d.serving.detectServingMode(!0):null;if(d.isSafeFrame())a.ifrm=0,c.UiVz=!1;else if(b.requiresIframeBust){a.innerIframe&&(a.ifrm=EBG.Adaptors.ServingMode.INNER_IFRAME);if(!a.ifrm||a.soi)a.ifrm=0;d.initServingMode(a.ifrm,
!1,e);d.inPlacementIframe()&&(b=EBG.Events,c=new b.EventSubscription(b.EventNames.AIE_LOADED,this._handleAieLoad,this),c.dispatcherFilters={"_adConfig.rnd":a.rnd},c.timing=b.EventTiming.BEFORE,EBG.eventMgr.subscribeToEvent(c),d.serving.handleAieServing(a))}else if(a.ifrm=0,void(""),b!=EBG.Ads.StdBanner&&b!=EBG.Ads.StdBannerHtml5){d.initServingMode(a.ifrm,!b.requiresIframeBust,e);if(e==EBG.Adaptors.ServingMode.FRIENDLY_IFRAME){c.UiVz=
!1;try{document.close()}catch(f){void("")}}e==EBG.Adaptors.ServingMode.SCRIPT&&(c.UiVz=!1)}else c.UiVz=!1},_handleAieLoad:function(a){a.eventData.loadDefault&&a.eventData.currentResponse.tn!=EBG.adTypes.VisibilityAd&&(EBG.Initializer._initManagers(a.eventData.currentResponse),EBG.Initializer._initDisplayAd(a.eventData.currentResponse))},_callExtensionHooks:function(a){if(a.extensionHooks)for(;0!==a.extensionHooks.length;)a.extensionHooks.pop().apply(null,
[a.adConfig,a])},getRichestAdaptor:function(){return EBG.Adaptors.WebAdaptor||EBG.Adaptors.StdWebAdaptor},getRichestInteractionManager:function(){return EBG.Interactions.InteractionManager||EBG.Interactions.StdInteractionManager},_initAdaptor:function(a){function b(){var g=new f.eventData.currentClass;g.initInnerModules(a.plt,a.bt,a.bv,a.dt,a.bc,a.bi);return g}void("");var c=this,d=c.getRichestAdaptor(),e=EBG.Events,f=new e.Event(e.EventNames.CREATE_ADAPTOR);
f.eventData={currentClass:d};f.timing=e.EventTiming.BEFORE;EBG.eventMgr.dispatchEvent(f);EBG.adaptor?EBG.adaptor.constructor.toString()!==f.eventData.currentClass.toString()?(d=b(),EBG.adaptor.copy(d),EBG.adaptor=d,void("")):void(""):(d=b(),EBG.adaptor=d,void(""));f.timing=e.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(f);c._initServingMode(a);EBG.adaptor.registerSpecialBrowserEvents();
EBG.eventMgr.attachToAdaptor();c._handleInAppSdks(a,function(){c._dispatchAdaptorReady()},c);e=new e.Event(e.EventNames.ADAPTOR_MODULES_READY);EBG.eventMgr.dispatchEvent(e);EBG.log.endGroup()},_handleInAppSdks:function(a,b,c){var d={},e=null,f=a.adConfig,g=EBG.adaptor,h=this,k=a.bigs+"inapp/ia_0_0_1/";EBG.DataPipeManager&&(EBG.dataPipeMgr=new EBG.DataPipeManager(f.startTimeD,f.startTimeP),h._dpm=EBG.dataPipeMgr.getPipe(a.sid));var l=f.inAppSettings=function(q,r){var v=q.CFF_InApp_BridgeAdv,x=!!q["CFF_InApp_BridgeAdvOn_"+
r],w=!!q["CFF_InApp_BridgeAdvOff_"+r],A=q.CFF_InApp_LogAdv,B=!!q["CFF_InApp_LogAdvOn_"+r],C=!!q["CFF_InApp_LogAdvOff_"+r],y=q.CFF_InApp_ReportAdv,z=!!q["CFF_InApp_ReportAdvOn_"+r];r=!!q["CFF_InApp_ReportAdvOff_"+r];y=!!(y&&!r||!y&&z);z=!(!q.CFF_InApp_ReportSite||!y);return{allowBridge:!(!q.CFF_InApp_BridgeSite||!(v&&!w||!v&&x)),reportSiteSupported:~~q.CFF_InApp_ReportSite,reportSupportedAdvertiser:~~y,allowLogging:!(!q.CFF_InApp_LogSite||!(A&&!C||!A&&B)),allowInappReporting:z,onRender:q.CFF_InAppOnRender,
sdkPurpose:z?1:2}}(f.ffs,a.advid);l||(l=f.inAppSettings={sdkPurpose:2},h.inAppV2Failure={msg:"inAppSettingsFailure"});var m=function(){if(h._dpm){var q="unknown";try{window.mraid&&(q=window.mraid.getVersion())}catch(w){h._dpm.send(EBG.DataProfile.ERROR,{errinfo:w.message,errfunc:"loadMRAIDUtil",errpos:"none",errstack:w.stack?w.stack.replace(/\(.*\/|(ccfix)/g,"(").replace(/\n(\s)*/g," || ").substr(0,1E3):"none"})}h._dpm.send(EBG.DataProfile.SERVING,{mraidv:q})}e&&EBG.clearInterval(e);f.openWindow=
!1;var r=g.getElementById(a.phid);if(r){r.style.visibility="hidden";var v=EBG.runTimed(this,function(){r.style.visibility="visible"},[],400)}q=EBG.Events;var x=new q.EventSubscription(q.EventNames.SHOW_AD,function(w){EBG.runTimed(this,function(){w.dispatcher._banner&&w.dispatcher._banner.divId&&(g.getElementById(w.dispatcher._banner.divId).style.left=EBG.px(0))},[],0)});x.timing=q.EventTiming.AFTER;EBG.eventMgr.subscribeToEvent(x);g.loadModule("MRAIDUtil",f,function(){EBG.clearInterval(v);EBG.ads[f.uid].MRAIDUtil=
new EBG.MRAIDUtil(f,b,c)},h)},p=function(q,r){var v=document.createElement("script");v.src=q;v.onload=r;v.onerror=r;(EBG.getBigScript().parentElement||document.getElementsByTagName("html")[0]).appendChild(v);setTimeout(function(){r({type:"timeout"})},1E3)},n=function(){l.sdkBridgeEnabled=!0;var q=function(v){if(!h.loadedFiles.sdkBridge){var x=EBG.now()-r;h.loadedFiles.sdkBridge=v.type;var w=!("load"!==v.type&&"present"!==v.type);l.sdkBridgeLoaded=w;h._dispatchSDKEvent({eventName:EBG.EBMessage.SDK_BRIDGE_LOADED,
loaded:w,reason:v.type});h._dpm.send(EBG.DataProfile.DEBUG,{sdk_bridgeLoadState:h.loadedFiles.sdkBridge,sdk_bridgeLoadTime:x,sdk_purpose:l.sdkPurpose})}};if(window.ebSDKBridge)return q({type:"present"});var r=EBG.now();p(k+"sdkBridge.js",q)},t=function(){d.fmraid=1;var q=EBG.now();p("mraid.js",function(r){if(!h.loadedFiles.mraid){var v=EBG.now()-q;h.loadedFiles.mraid=r.type;var x="load"===r.type;setTimeout(function(){EBG.isMRAID()&&(d.mraid=1,h._dpm.send(EBG.DataProfile.SERVING,d))},5);h._dispatchSDKEvent({eventName:EBG.EBMessage.MRAID_LOADED,
loaded:x,reason:r.type});x&&m();a.inApp&&(l=l||{sdkPurpose:2},h._dpm.send(EBG.DataProfile.DEBUG,{sdk_mraidLoadState:h.loadedFiles.mraid,sdk_mraidloadTime:v,sdk_purpose:l.sdkPurpose}))}});e=EBG.runTimed(c,b,[],250)};try{var u=g.getTopAccessibleWindow(!1)||window;if(-1<navigator.userAgent.toLowerCase().indexOf("afma-sdk")||-1<u.location.href.indexOf("js=afma-sdk"))d.afma=1}catch(q){}f&&f.customJSVars&&f.customJSVars.mdForceDisableMRAID&&(d.dmraid=1);a.inApp&&l?(h.loadedFiles={},!l.allowBridge||!a.nxt||
EBG.isPreview&&EBG.isTestMode||(EBG.inAppImpressionManager=(new EBG.InAppImpressionManager(a)).init(),n()),d.dmraid?h._dispatchSDKEvent({eventName:EBG.EBMessage.MRAID_LOADED,mraidLoaded:!1,loaded:!1,reason:"user_disabled"}):EBG.isMRAID()?(this._dispatchSDKEvent({eventName:EBG.EBMessage.MRAID_LOADED,mraidLoaded:!0,loaded:!0,reason:"present"}),d.mraid=1,m()):t(),a.mraidObj=d):(this._dispatchSDKEvent({eventName:EBG.EBMessage.MRAID_LOADED,mraidLoaded:!1,loaded:!1,reason:"not_loaded"}),this._dispatchAdaptorReady())},
_dispatchSDKEvent:function(a){var b=new EBG.Events.Event(a.eventName);b.timing=EBG.Events.EventTiming.AFTER;b.eventData=a||{};EBG.eventMgr.dispatchEvent(b)},_dispatchAdaptorReady:function(){if(!EBG.adaptor._isReady){EBG.adaptor._isReady=!0;var a=EBG.Events,b=new a.Event(EBG.EBMessage.ADAPTOR_READY);b.dispatcher=this;b.timing=a.EventTiming.BEFORE;EBG.eventMgr.dispatchEvent(b)||(b.timing=a.EventTiming.ONTIME,EBG.eventMgr.dispatchEvent(b))}},_initInteractionManager:function(a){var b=EBG.Events;newEvent=
new b.Event(b.EventNames.CREATE_INT_MGR);newEvent.eventData={currentClass:this.getRichestInteractionManager()};newEvent.timing=b.EventTiming.BEFORE;EBG.eventMgr.dispatchEvent(newEvent);EBG.intMgr&&EBG.intMgr.constructor.toString()==newEvent.eventData.currentClass.toString()||(void(""),a=new newEvent.eventData.currentClass(a),EBG.intMgr=a,void(""));newEvent.timing=b.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(newEvent)},
_initAnimationManager:function(a){void("");try{var b=EBG.Events;EBG.RichModules&&EBG.RichModules.AnimationManager&&(newEvent=new b.Event(b.EventNames.CREATE_ANIM_MGR),newEvent.eventData=EBG.RichModules.AnimationManager,newEvent.timing=b.EventTiming.BEFORE,EBG.eventMgr.dispatchEvent(newEvent),EBG.animationMgr||(EBG.animationMgr=new newEvent.eventData),!EBG.animator&&EBG.RichModules&&EBG.RichModules.Animator&&(EBG.animator=new EBG.RichModules.Animator(a.adConfig)),
newEvent.timing=b.EventTiming.ONTIME_AND_AFTER,EBG.eventMgr.dispatchEvent(newEvent))}catch(c){void("")}EBG.log.endGroup()},_initDataPipeManager:function(a){var b=a.adConfig||{};b.dpProfileEvents=["general","platform","serving","error"];b.dpProfileInteractions=["general","serving","platform","interaction"];b.Purposes.Measurements&&b.dpProfileInteractions.push("urls");b.Purposes.Debug&&(b.dpProfileEvents.push("visibility","debug"),b.dpProfileInteractions.push("visibility",
"debug"));a.lmu&&(b.dpUrlInteractions=EBG.protocol+a.lmu+"/lm/int",b.dpUrlEvents=EBG.protocol+a.lmu+"/lm/evt",b.dpServer="lm");EBG.dataPipeMgr=new EBG.DataPipeManager(b.startTimeD,b.startTimeP);var c=EBG.dataPipeMgr.getPipe(a.sid);b.sendMetricsData&&c.createBucket("int",b.dpProfileInteractions,b.dpUrlInteractions);this._reportDebugData(a,c)},_reportDebugData:function(a,b){var c=a.adConfig,d=window.__cmp&&"function"==typeof window.__cmp,e=window.__tcfapi&&"function"==typeof window.__tcfapi,f=function(m){for(var p=
window,n;!n;){try{p.frames[m]&&(n=p)}catch(t){}if(p===window.top)break;if(p&&p.parent)p=p.parent;else break}return n},g={s_flag:a.ffs.CFF_Shark?1:0,s_nxt:a.nxt?1:0,s_bt:-1<"|5|2|4|8|".indexOf("|"+a.bt+"|")?1:0,s_chromeff:(5==a.bt||2==a.bt)&&-1<"|7|9|10|11|15|16|22|25|32|33|36|37|39|40|41|42|".indexOf("|"+a.plt+"|")&&62<a.bv?1:0,s_ios:4==a.bt&&-1<"|7|10|11|".indexOf("|"+a.plt+"|")&&11<a.bv?1:0,s_edge:8==a.bt&&-1<"|15|19|".indexOf(a.plt)&&17<a.bv?1:0,s_vv:a.ffs.CFF_SharkVV||!window.ebVV?1:0,s_instrm:a.instrm?
0:1,s_tn:"StdBanner"==a.tn&&!c.adHtmlPath||"Html5Banner"==a.tn&&a.ffs.CFF_B_Std||"Tracking"==a.tn&&a.ffs.CFF_SharkT?1:0,s_frp:c.flashResPath?0:1,s_av:a.av?0:1,s_avd:a.avd?0:1,s_mvfd:a.mvfd?0:1,s_geb:window.gEbBAd?0:1,s_gstr:window.gstrEbPreLoadScripts?0:1,s_ebadcs:!window.ebAdCS||(a.ubss=-1<window.ebAdCS.indexOf("_bskp_"))?1:0,s_ebac:window.ebAC?1:0,s_ope:a.ope?0:1,s_osde:a.osde&&a.osde.length?0:1,s_rspn:c.isResponsive?1:0,s_adpt:c.adaptiveAd?1:0,s_cdiv:c.centerPlaceholderDiv?1:0,s_optout:~~(EBG.adaptor.optOut&&
c.isGeoStrict||!c.Purposes.Cookies)};g.s_gbt=g.s_chromeff||g.s_ios||g.s_edge;var h=c.customJSVars;c.liquid=g.liquid="undefined"!=typeof c.customJSVars?h.hasOwnProperty("mdIsDomainConfigEnabled")&&1==h.mdIsDomainConfigEnabled||h.hasOwnProperty("mdIsProgEnabled")&&1==h.mdIsProgEnabled||h.hasOwnProperty("mdProgEnabled")&&1==h.mdProgEnabled||h.hasOwnProperty("mdProgEnable")&&1==h.mdProgEnable||h.hasOwnProperty("mdcbApplyCustomBehavior")&&1==h.mdcbApplyCustomBehavior?1:0:0;try{c.ffs.CFF_LogLS&&!g.s_optout&&
window.localStorage?(localStorage.setItem("amzSizmeklsTest","yes"),"yes"===localStorage.getItem("amzSizmeklsTest")?(localStorage.removeItem("amzSizmeklsTest"),g.s_ls=1):g.s_ls=0):g.s_ls=void 0}catch(m){g.s_ls="failed"}if(h=c.performance)g.timeBigS=c.startTimeD-h.startTimeBigS,g.timeBS=h.startTimeBigS-h.startTimeBS,h.serverResponseTime&&(g.timeSR=h.serverResponseTime);if(a.ffs.CFF_CMPDebug){g.s_cmp=d?1:0;g.s_cmpi=!d&&f("__cmpLocator")?1:0;g.s_tcf=e?1:0;g.s_tcfi=!e&&f("__tcfapiLocator")?1:0;var k=g.s_tcf||
g.s_tcfi?"tcf":g.s_cmp||g.s_cmpi?"cmp":"";if(k){var l=k.toUpperCase()+"Detector";EBG.adaptor.loadModule(l,c,function(){try{var m=new EBG.Adaptors[l]({timeout:1E3,accurateTimeout:a.ffs.CFF_AccurateTimeout?3:0});m.getConsentData(function(p){g["s_"+k+"s"]=p&&p.consentData?p.consentData:0;g["s_"+k+"r"]=m._reason;g["s_"+k+"t"]=m._time;g["s_"+k+"to"]=m._timeoutActualTime;g["s_"+k+"tg"]=m._timeoutTimeGap||-1;b.send(EBG.DataProfile.DEBUG,g)},this)}catch(p){b.send(EBG.DataProfile.DEBUG,g)}},this)}else g.s_cmps=
0,g.s_cmpr=0,b.send(EBG.DataProfile.DEBUG,g)}else b.send(EBG.DataProfile.DEBUG,g)},_initGeometryHelper:function(){void("");try{var a=EBG.Events;if(EBG.RichModules&&EBG.RichModules.Geometry){var b=new a.Event(a.EventNames.CREATE_GEOMETRY_HELPER);b.eventData=EBG.RichModules.Geometry;b.timing=a.EventTiming.BEFORE;EBG.eventMgr.dispatchEvent(b);EBG.geometry||(EBG.geometry=new b.eventData);b.timing=a.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(b)}}catch(c){void("",
c)}EBG.log.endGroup()},_initElementWatcher:function(){void("");try{EBG.RichModules&&EBG.RichModules.ElementWatcher&&!EBG.elementWatcher&&(EBG.elementWatcher=new EBG.RichModules.ElementWatcher)}catch(a){void("")}EBG.log.endGroup()},_getNumericDataFromFlag:function(a,b){for(var c in a)if(0==c.indexOf(b)&&a[c]){var d=parseFloat(c.substr(b.length).replace("_","."));if(!isNaN(d))return d}return 0},_initPositioningHelper:function(){void("");
try{var a=EBG.Events;if(EBG.Positioning&&EBG.Positioning.PositionManager){var b=new a.Event(a.EventNames.CREATE_POSITIONING_HELPER);b.eventData=EBG.Positioning.PositionManager;b.timing=a.EventTiming.BEFORE;EBG.eventMgr.dispatchEvent(b);EBG.posHelper||(EBG.posHelper=new b.eventData);b.timing=a.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(b)}}catch(c){void("")}EBG.log.endGroup()},_initAd:function(a){try{var b=a.adConfig,c=EBG.Events;this.inAppV2Failure&&
this._dpm.sendNow(b.dpUrlEvents,{v2Failure:this.inAppV2Failure.msg});var d=this._getAdClass(a);b.scv=a.scv;var e=new c.Event(c.EventNames.CREATE_AD);e.eventData={currentClass:d,adConfig:b};e.timing=c.EventTiming.BEFORE;e.dispatcher={_adConfig:{rnd:b.rnd,uid:b.uid}};EBG.eventMgr.dispatchEvent(e);new e.eventData.currentClass(b);e.timing=c.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(e);EBG.adaptor.getDisplayWin().EBG.ads[b.uid]||(EBG.adaptor.getDisplayWin().EBG.ads[b.uid]=EBG.ads[b.uid]);
var f=EBG.BWDetection;f&&window.gEBMainWindow&&gEBMainWindow.EBP&&(gEBMainWindow.EBP.ebBW&&gEBMainWindow.EBP.ebBW.checked?(f.speed=gEBMainWindow.EBP.ebBW.speed,f.checked=!0):gEBMainWindow.EBP.BW&&gEBMainWindow.EBP.BW.checked&&(f.speed=gEBMainWindow.EBP.BW.speed,f.checked=!0));if(b.pckAssets){a=0;for(var g in b.pckAssets)b.pckAssets.hasOwnProperty(g)&&a++;0<a&&!f.checked&&(b.bwApplied=!0,f.init());b.BWD=f}}catch(h){void(""),f="none",g="_initAd",h.stack&&(a=h.stack.match(/((.*)@|at (.*) ).*:(\d+:\d+)/),
5==a.length?(g=a[2]||a[3],f=a[4]):g=h.stack.replace(/\n/," ").substr(0,100)),b.dpUrlEvents&&!this._dpm.isBucketExists("evt")&&this._dpm.createBucket("evt",b.dpProfileEvents,b.dpUrlEvents),this._dpm.send(EBG.DataProfile.ERROR,{errmsg:h.message,errfunc:g,errpos:f,errstack:h.stack.replace(/\(.*\/|(ccfix)/g,"(").replace(/\n(\s)*/g," || ").substr(0,1E3)})}},_getAdClass:function(a){var b=EBG.adTypes,c=EBG.Ads;switch(a.tn){case b.Image:var d=c.ImageEx;break;case b.RichBannerHtml5:d=c.RichBannerHtml5;break;
case b.PoliteBannerHtml5:d=c.PoliteBannerHtml5;break;case b.SEBannerHtml5:d=c.SEBannerHtml5;break;case b.ExpBannerHtml5:d=c.ExpBannerHtml5;break;case b.StdBannerHtml5:d=c.StdBannerHtml5;break;case b.StdBanner:d=a.IABBV||a.IABEV?c.StdBannerEx:c.StdBanner;break;case b.Banner:d=c.RichBanner;break;case b.SingleExpBanner:d=c.SingleExpBanner;break;case b.ExpBanner:d=c.ExpBanner;break;case b.VisibilityAd:d=c.VisibilityAd;break;case b.FloatingAd:d=c.Floating;break;case b.FloatingAdWithRem:d=c.FloatingWithReminder;
break;case b.TrackingAd:d=c.TrackingAd;break;case b.FourthParty:d=c.FourthPartyWithTrackingAd;break;case b.WallpaperAd:d=c.WallpaperAd;break;case b.Html5InstreamBanner:d=c.Html5InstreamBanner}return d},_decodeConfiguration:function(a){for(var b=["ncu","p","lid","gdprconsent","dlm"],c=0;c<b.length;c++){var d=b[c];EBG.isDefined(a[d])&&(a[d]=decodeURIComponent(a[d]))}},_updateAdConfig:function(a){var b=a.adConfig,c=a.bigs||ebBigS,d=EBG.adaptor;b.isNXT=!!a.nxt;b.protocol=EBG.protocol;b.sHost=window.sHost;
b.nonSecureResourcePath=window.ebNSRP;EBG.serverResponses[b.uid]||(EBG.serverResponses[b.uid]=a);b.sUrlTokens=a.ut;b.placeHolderId=a.phid;b.isAsync=!!window.ebAC||!!window.ebAsync;a.element_id&&(b.element_id=a.element_id);var e=d.getPageWin();if(e=EBG.getPageUrl(e))b.ebReferrer=e;b.html5supported=a.html5Enabled;b.useHtmlConvertor=b.html5supported&&window.ebUseHtml5;b.autolina=a.autolina||0;if(b.autolina&&EBG.AutolinaClass)try{EBG.Autolina=new EBG.AutolinaClass}catch(p){}b.preloadCustomScript=window.ebAdCS;
b.actualServingMode=d.serving?d.serving.detectServingMode(!0):null;a.ffs.CFF_RemoveUivz&&(d.focused=b.focused?b.focused:d.focused);b._interactionServer=a.is||"BurstingPipe";b._interactionPipe=EBG.combinePaths(EBG.protocol+a.bs,b._interactionServer+"/adServer.bs?cn=int&iv=2&int=");b._interactionsStrPipe=EBG.combinePaths(EBG.protocol+a.bs,b._interactionServer+"/adServer.bs?cn=int&iv=2&interactionsStr=");b.expandDynamic&&(b.showSinglePanel=1);b.clickTrackingUrls||(b.clickTrackingUrls=[]);a.ncu&&(b.clickTrackingUrls.push(a.ncu),
b.ncu=a.ncu);b.defaultImpTrackingUrls||(b.defaultImpTrackingUrls=[],b.defaultClickTrackingUrls=[]);a.dctu&&(b.defaultClickTrackingUrls=a.dctu);a.ditu&&(b.defaultImpTrackingUrls=a.ditu);b.delayedImpParams=a.delayedImpParams;b.impressionTrackingURLs=[];a.itu&&0<a.itu.length&&(b.impressionTrackingURLs=a.itu);window.gEbBAd&&(gEbBAd.playRS&&gEbBAd.playRS.strNUrl&&b.impressionTrackingURLs.push(gEbBAd.playRS.strNUrl),gEbBAd.strNImpUrl&&b.impressionTrackingURLs.push(gEbBAd.strNImpUrl));b.imageOnly=!1;b.page=
escape(a.p.replace(/~|\^|\|/ig,"_"));b.massVersioning={targetAudienceId:a.ta&&"-1"!=a.ta?a.ta:"",deliveryGroupId:a.dg&&"-1"!=a.dg?a.dg:"",subDeliveryGroupId:a.sdg&&"-1"!=a.sdg?a.sdg:"",logDeliveryGroupId:a.logdg&&"-1"!=a.logdg?a.logdg:"",adVersions:a.av||"",defaultAdVersion:a.avd||"",adBasePath:a.abp||"",massVersionFolderDivider:a.mvfd||0,versionTargetAudienceId:a.tav&&"-1"!=a.tav?a.tav:"",dgTargetAudienceId:a.tadg&&"-1"!=a.tadg?a.tadg:"",originalDeliveryGroupId:a.dgo&&"-1"!=a.dgo?a.dgo:""};e=b.massVersioning;
if(0<=e.adVersions.indexOf("/")||0<=e.defaultAdVersion.indexOf("/"))if(e.versionFullPath=!0,e.defaultAdVersion&&(e.defaultAdVersion=JSON.parse(e.defaultAdVersion)),e.adVersions){e.adVersions=JSON.parse(e.adVersions);e.adVersionsObject=[];for(var f=[],g,h=0;h<e.adVersions.length;h++)g=e.adVersions[h],e.adVersionsObject.push(g),f.push(g.v);e.adVersions=f}a.soi&&!a.eb4p&&(b.showOnlyImage=a.soi,e.adVersions=e.defaultAdVersion);EBGInfra.isDefinedNotNull(a.diAppId)&&(b.diAppId=a.diAppId);a.rdi&&(b.reportImpressionType=
!0===a.rdi?EBG.ReportImpressionType.DELAYED:a.rdi,b.shouldReportImpression=!0);b.defaultImageReason=a.dir||"";b.mobileSDK=a.sdk||"";b.isOfflineDemo=EBG.isOfflineDemo;if("undefined"==typeof b.openWindow&&(b.openWindow=!0,d.getDisplayWin()!=d.getDisplayWin().parent))for(h in b.interactions)if(0===b.interactions[h].target){b.openWindow=!1;break}this._updateAdConfigToHandleOpenWindow(a);b.bigSDir=unescape(c);b.imagesDir=unescape(c)+"Res/Images"+a.imgv+"/";b.arrOnStartDnlEvents=a.osde;b.arrOnPlayEvents=
a.ope;b.isGeoStrict=0!=a.igs?1:0;b.geoData=a.geo?a.geo:{};h=a.oo||0;d.optOut=b.optOut=window.gEbFOptOut||h;d.histLen=b.histLen=a.hl||30;b.sPublisherPlacementId=a.ppi||"";b.width=b.width||"";b.height=b.height||"";b.adHtmlOptions?(b.width=a.adw||b.width,b.height=a.adh||b.height,b.defaultWidth=a.w||b.width,b.defaultHeight=a.h||b.height,b.adaptiveAd=!0):b.isResponsive?(b.defaultWidth=a.w||b.width,b.defaultHeight=a.h||b.height,b.width="",b.height=""):(b.width=a.w||b.width,b.height=a.h||b.height);b.shouldCollectUrl=
a.cu||0;b.sID=a.sid||"";b.dlm=a.dlm||3;b.testImp=!!a.t;b.usercookie=a.usercookie||"";b.visibility={};h=b.visibility;c=EBG.VisibilityMode;h.mode=c.DEFAULT_MODE;a.IABEV||a.insVis?h.mode=c.ENHANCED_MODE:a.IABBV&&(h.mode=c.BASIC_MODE);h.iabMinSurface=a.IABMS;h.iabMinDuration=a.IABMD;h.agencyMinSurface=a.AgMS;h.agencyMinDuration=a.AgMD;h.advertiserMinSurface=a.AdMS;h.advertiserMinDuration=a.AdMD;h.iabMinLargeSurface=30;h.iabMinLargeDuration=a.IABMD;b.isInstreamVisibility=!!a.insVis;b.isInstreamVerification=
!!a.insVer;b.displayVerification=!!a.disVer;b.gdprpurposes=a.gdprpurposes;c={};if(b.gdprpurposes)for(e=b.gdprpurposes.toString(2),f=0,h=e.length-1;0<=h;--h)++f,"1"==e[h]&&(c[f]=1);b.Purposes={Cookies:!!c[EBG.Purposes.COOKIES],Measurements:!!c[EBG.Purposes.MEASUREMENTS],Debug:!!c[EBG.Purposes.DEBUG]};b.sendMetricsData=!!a.lcu;b.agencyId=a.agid;b.campaignId=a.campaignId;b.siteId=a.siteId;if(b.panels){h=!1;1==d.getObjKeys(b.panels).length&&(h=!0);for(var k in b.panels)b.panels.hasOwnProperty(k)&&(b.panels[k].visibilityIntEnabled=
h)}b.wurflValue=a.bi;k=EBG.Interactions.SystemInts;if(h=b.interactionsToReport)h[k.AD_START]=k.AD_START,h[k.END_OF_SESSION]=k.END_OF_SESSION,h[k.AD_STACKING]=k.AD_STACKING,h[k.ACTUAL_SIZE]=k.ACTUAL_SIZE,h[k.MULTI_BURN]=k.MULTI_BURN,h[k.AD_COLLISION]=k.AD_COLLISION,h[k.AD_CAROUSEL]=k.AD_CAROUSEL,h.visibility&&(h[k.VISIBILITY_RECORDABLE]=k.VISIBILITY_RECORDABLE,h[k.VISIBILITY_AGENCY_RECORDABLE]=k.VISIBILITY_AGENCY_RECORDABLE,h[k.VISIBILITY_ADVERTISER_RECORDABLE]=k.VISIBILITY_ADVERTISER_RECORDABLE,h[k.VISIBILITY_ADVERTISER]=
k.VISIBILITY_ADVERTISER,h[k.VISIBILITY_AGENCY]=k.VISIBILITY_AGENCY,h[k.VISIBILITY_IAB]=k.VISIBILITY_IAB,h[k.VISIBILITY_ADVERTISER_DURATION]=k.VISIBILITY_ADVERTISER_DURATION,h[k.VISIBILITY_AGENCY_DURATION]=k.VISIBILITY_AGENCY_DURATION,h[k.VISIBILITY_AVG_AD_SURFACE]=k.VISIBILITY_AVG_AD_SURFACE,d.isInApp()||(h[k.VISIBILITY_AVG_SCREEN_SHARE]=k.VISIBILITY_AVG_SCREEN_SHARE));b.adParamsEnabled=b.displayVerification||b.isInstreamVerification;b.playerParamsEnabled=b.isInstreamVerification;b.verUrlEnabled=
b.isInstreamVerification||!!a.verUrl;b.defaultFlashName&&!b.defaultFlashPath&&(b.defaultFlashPath=b.imagesDir+"BannerAssets/"+b.defaultFlashName);b.offsetX=a.offsetX||0;b.offsetY=a.offsetY||0;k={};k.certificationProgram=a.AcCP;k.customUrl=a.CAcURL;k.includeMarker=b.AcIncludeMarker;k.iconPosition=parseInt(b.AcIconPosition);b.adChoice=k;a.wm&&(b.wmode=a.wm.toLowerCase());b.pushDownConfig||"none"==a.disp||(b.display=a.disp||"inline");b.disableAutoExpand=a.dex||0;b.aiE=a.aiE||{};b.appPool=a.appPool||
"BurstingPipe";b.interactionServer=a.is||"BurstingPipe";b.advertiserId=a.advid;b.moduleInfo=a.h5mi||{};try{window.gEbBAd&&(gEbBAd.panelsWMode&&(b.panelsWMode=gEbBAd.panelsWMode),gEbBAd.strWmode&&(b.wmode=gEbBAd.strWmode.toLowerCase()))}catch(p){void("")}if(d.isSafeFrame()){b.isSafeFrame=!0;k=EBG.PanelPositionType;for(var l in b.panels){h=b.panels[l];try{var m=$sf.ext.geom();if(h.posType==k.PAGE_RELATIVE_PERCENTAGE||h.posType==k.VIEWPORT_RELATIVE_PERCENTAGE)h.xPos=
Math.round(h.xPos/100*(m.win.w-h.width)),h.yPos=Math.round(h.yPos/100*(m.win.h-h.height));h.posType!=k.BANNER_RELATIVE_PIXELS&&(h.xPos-=m.self.l,h.yPos-=m.self.t)}catch(p){h.xPos=0,h.yPos=0}h.posType=k.BANNER_RELATIVE_PIXELS}}d.isAMP()&&(b.isAMP=!0,b.expandDynamic=0);d.isSkype()&&(b.isSkype=!0);b.isInApp=d.isInApp();b.locationPolling=this._setLocationPolling(b.locationPolling);a.eb4p&&(b.fourthPartyTag=a.eb4p)},_setLocationPolling:function(a){0<a?(a=Math.min(a,100),a=Math.max(a,10)):a=0;return a},
_updateAdConfigToHandleOpenWindow:function(a){var b=a.adConfig;b.bsPath=b.dataCapture=a.bs;b.pluId=EBG.pluId;b.protocol=EBG.protocol;EBGInfra.isDefined(a.lid)&&(b.lineId=a.lid);b.isPreview=!!a.pr;b.isTestMode=!!a.tm},_sendInitialDataPipeData:function(a){var b=a.adConfig,c=EBG.DataProfile,d=EBG.adaptor,e=d.browser,f=this._dpm=EBG.dataPipeMgr.getPipe(b.sID);f.send(c.GENERAL,{srcv:a.scv.substring(1),adid:b.adId,pid:b.placementId,AgencyID:b.agencyId||0,cid:b.campaignId||0,siteid:b.siteId||0,advid:b.advertiserId||
0,ctime:+new Date,tzoff:(new Date).getTimezoneOffset()});f.send(c.PLATFORM,{os:e._platform,brsrc:e._browserCode,brsrv:e._browserVer,brsrt:e._browserType});d.isSkype()&&f.send(c.PLATFORM,{skype:1});f.send(c.URLS,{dmn:a.dmn});var g={};b.Purposes.Debug&&a.mraidObj&&a.inApp&&(g=a.mraidObj);b.reportImpressionType&&(g.rdi=b.reportImpressionType);b.dlm&&(g.dlm=b.dlm);EBG.isDefined(b.preloadImagePath)&&(g.preimg=""==b.preloadImagePath?1:2);b.forceClickthrough&&(g.cltovl=1);a.inApp&&(g.inapp=1);b.isInstream&&
(g.instream=1);window.$sf&&(g.sf=1);b.preloadCustomScript&&(g.cs=1);a.pi&&(g.isplu=1);a.innerIframe&&(g.aie=1);g.env=e.getEnvironment();g.dt=e._deviceType;g.wvsb=~~(b.isInstreamVisibility||b.visibility.mode!=EBG.VisibilityMode.DEFAULT_MODE);g.wvrf=~~(b.isInstreamVerification||b.displayVerification);b.wurflValue&&(g.bi=b.wurflValue);if(b.isSafeFrame){g.sf=1;try{g.sfv=$sf.getVersion()}catch(k){g.sfv=$sf.ver||"1.1"}}f.send(c.SERVING,g);b.sendMetricsData&&(f.send(c.INTERACTION,{IntrN:"metrics",IntrT:2,
Usr:b.usercookie}),!window||!window.location||e.isIE()&&9>=e.getVersion()||d.loadModule("URLUtil",b,function(){if(EBG.URLUtil){var k=function(l){f.send(c.URLS,{turl:l.top,rurl:l.referrer,aorg:l.aorg})}.bind(this);new EBG.URLUtil(k,{maximumUrlLength:5E3,maximumAorgUrls:3})}},this));if(b.ffs.CFF_GlblChk){a="doNotInit ebArrModulesToTrigger ebAttrConf ebAttribution ebRD ebRDGlobal ebSafeFrame ebUseHtml5 ebUserIdGuid gEbAd gEbBAd gEbBannerData gEbDisableSmartServeAPI gEbEyeDivRefElement gEbfLoadAsAS2 gEbFlyLocal gEbfNewOfflineDemo gEbfOfflineDemo gEbFOptOut gEbPIT gEbURLTokens gfEbCacheResources gfEbChangeRelativeElements gfEbExpBanerIM gfEbExpBannerIM gfEbForceStreaming gfEbInlineBanner gfEbRemoveScroll gfEbUseCompression gfEbUseHTTPS gfEbUseMozHideIframe gnEbLowBWLimit gnEbMinZIndex gstrAdPrefix gstrEbDisplayPos gstrEbDomain gstrEbIframeLocation gstrEbPreLoadScripts providersData strPage".split(" ");
b={dbg:1};for(d=0;d<a.length;++d)window[a[d]]&&(b[a[d]]=1);if(window.gEbBAd)for(var h in window.gEbBAd)window.gEbBAd.hasOwnProperty(h)&&(b["g_"+h]=1);f.send(c.DEBUG,b)}}};
try{var currentResponse=EBG.Initializer.initialize();if(currentResponse.adConfig.UiVz&&!currentResponse.requiresIframeBust&&(currentResponse.IABBV||currentResponse.IABEV)&&!EBG.adaptor.isSafeFrame()&&"Visibility"!=currentResponse.tn){var vizClone=EBG.cloneObj(currentResponse);vizClone.tn=vizClone.adConfig.templateName="Visibility";vizClone.ifrm=2;vizClone.soi=0;ebOArr[ebOArr.length]=vizClone;var newEbSrc=ebSrc.replace(currentResponse.tn,vizClone.tn);newEbSrc=newEbSrc.replace(/ex(debug|_api|)\.js/ig,
".js");var newScript=document.createElement("SCRIPT");newScript.src=newEbSrc;vizClone.ebSrc=newEbSrc;if(currentResponse.adConfig.adStarted){var target=document.getElementById(vizClone.phid);target&&target.appendChild(newScript)}else{var sub=new EBG.Events.EventSubscription(EBG.Events.EventNames.AD_START,function(){var a=document.getElementById(vizClone.phid);a&&a.appendChild(newScript)},this);sub.timing=EBG.Events.EventTiming.ONTIME;EBG.eventMgr.subscribeToEvent(sub)}}}catch(a){void("",
a)};
