define(["core/adInfo","utils/urlUtils","infra/subject","ebLoaderOrigin"],function(e,n,t){var a=null,r=null,i=new t,o=EB.addEventListener,u=function(e){return e>0&&e<=EB.getVersionCount()},s=function(){return null==r&&(r=f()),r},l=function(){return null==a&&(a=E()),a},c=function(){var n=0,t=e.svCatalogSchema.svData;if(t){var a=!0;for(var r in t)if(t[r].value instanceof Array){var i=t[r].value.length;a?(n=i,a=!1):n>i&&(n=i)}}return n},E=function(){var n={},t=e.svSchema.svData;if(t)for(var a in t){var r=t[a];null!=r&&(n[a]=r.value)}return n},f=function(){for(var n=[],t=c(),a=e.svCatalogSchema.svData,r=0;t>r;r++){var i={};for(var o in a)i[o]={value:a[o].value[r]};n.push(i)}return n},v=function(n){return e.rootFolder+"/"+n},g=function(e){},B=function(e){return e},m=function(n){var t=null,a=e.additionalAssets[n];return a instanceof Object&&"string"==typeof a.FileName&&a.FileName.length&&(t=e.rootFolder+"/AdditionalAssets/"+a.FileName),t};EB.addEventListener=function(e,n){switch(e){case EBG.EventName.SV_DATA_READY:case EBG.EventName.CATALOG_READY:n();break;case EBG.EventName.EXPAND:case EBG.EventName.COLLAPSE:i.registerForEvent(e,-1,n);break;default:o.call(EB,e,n)}},EB.clickthrough=function(){var t=null;switch(arguments.length){case 0:t=e.clickThrough&&e.clickThrough.url;break;case 2:t=arguments[1]}"string"==typeof t&&window.open(n.fixURL(t),"_blank","fullscreen=yes")},EB.getAssetUrl=function(e,t){var a=null,r=typeof e,i=typeof e;if("object"===r)switch(e.format){case"wsRelUrl":a=v(e.data);break;case"dsRelUrl":a=g(e.data);break;case"absUrl":a=B(e.data)}else e&&"string"===r?a=n.hasProtocol(e)?B(e):v(e):("string"===i||"number"===i)&&(a=m(t));return a},EB.getSVData=function(e){var n=null,t=l();return t&&(e?t[e]&&(n=t[e].value):n=t),n},EB.getVersions=function(){var e=null,n="number"==typeof arguments[0]?arguments[0]:1,t="number"==typeof arguments[1]?arguments[1]:EB.getVersionCount(),a="function"==typeof arguments[1]?arguments[1]:arguments[2];if(u(n)&&u(t)&&"function"==typeof a){var r=s();if(r){e={versionData:{}};for(var i=n;t>=i;i++)e.versionData[i]=r[i-1]}}a(e)},EB.getVersionCount=function(){var e=0,n=s();return n&&(e=n.length),e},EB.getMinVersions=function(){return this.getVersionCount()},EB.clickedVersion=function(){},EB.isCatalogReady=function(){return!0},EB.getVersionDataByKey=function(e,n,t){var a=s();t(a&&u(e)?a[e-1][n.toLowerCase()]:null)},EB.getVisibilityData=function(){return{available:!1}},EB.expand=function(){i.dispatchEvent(EBG.EventName.EXPAND)},EB.collapse=function(){i.dispatchEvent(EBG.EventName.COLLAPSE)},null==EB.getAssetProps&&(EB.getAssetProps=function(e){return e?{type:"aniview",src:"aniview/"+e.replace(/(.*)\..*$/,"$1")}:void 0}),EBG.EventName.EXPAND&&(EBG.EventName.EXPAND="EXPAND"),EBG.EventName.COLLAPSE&&(EBG.EventName.COLLAPSE="COLLAPSE")});